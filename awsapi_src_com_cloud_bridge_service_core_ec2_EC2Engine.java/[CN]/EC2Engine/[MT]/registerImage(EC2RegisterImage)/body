{
  EC2CreateImageResponse image=new EC2CreateImageResponse();
  try {
    List<CloudStackTemplate> templates=getApi().registerTemplate((request.getDescription() == null ? request.getName() : request.getDescription()),request.getFormat(),request.getHypervisor(),request.getName(),toOSTypeId(request.getOsTypeName()),request.getLocation(),toZoneId(request.getZoneName(),null),null,null,null,null,null,null,null,null,null);
    if (templates != null) {
      for (      CloudStackTemplate template : templates) {
        if (template != null && template.getId() != null) {
          image.setId(template.getId().toString());
          return image;
        }
      }
    }
  }
 catch (  Exception e) {
    logger.error("EC2 RegisterImage - ",e);
    handleException(e);
  }
  return image;
}
