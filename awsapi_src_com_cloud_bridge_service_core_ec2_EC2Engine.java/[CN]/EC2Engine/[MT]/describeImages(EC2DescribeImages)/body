{
  EC2DescribeImagesResponse images=new EC2DescribeImagesResponse();
  try {
    String[] templateIds=request.getImageSet();
    EC2ImageFilterSet ifs=request.getFilterSet();
    if (templateIds.length == 0) {
      images=listTemplates(null,images);
    }
 else {
      for (      String s : templateIds) {
        images=listTemplates(s,images);
      }
    }
    if (ifs != null)     return ifs.evaluate(images);
  }
 catch (  Exception e) {
    logger.error("EC2 DescribeImages - ",e);
    handleException(e);
  }
  return images;
}
