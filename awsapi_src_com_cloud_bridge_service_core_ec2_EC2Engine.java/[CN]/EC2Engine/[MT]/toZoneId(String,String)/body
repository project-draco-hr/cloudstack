{
  EC2DescribeAvailabilityZonesResponse zones=null;
  String[] interestedZones=null;
  if (null != zoneName) {
    interestedZones=new String[1];
    interestedZones[0]=zoneName;
  }
 else {
    CloudStackZone zone=findZone();
    if (zone != null) {
      return zone.getId();
    }
  }
  zones=listZones(interestedZones,domainId);
  if (zones == null || zones.getAvailabilityZoneSet().length == 0)   throw new EC2ServiceException(ClientError.InvalidParameterValue,"Unknown zoneName value - " + zoneName);
  EC2AvailabilityZone[] zoneSet=zones.getAvailabilityZoneSet();
  return zoneSet[0].getId();
}
