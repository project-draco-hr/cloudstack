{
  String keyPairName=request.getKeyName();
  EC2SSHKeyPair response=new EC2SSHKeyPair();
  try {
    CloudStackKeyPair resp=getApi().createSSHKeyPair(keyPairName,null,null);
    if (resp == null) {
      throw new Exception("Ivalid CloudStack API response");
    }
    response.setFingerprint(resp.getFingerprint());
    response.setKeyName(resp.getName());
    response.setPrivateKey(resp.getPrivatekey());
  }
 catch (  Exception e) {
    logger.error("EC2 CreateKeyPair - ",e);
    handleException(e);
  }
  return response;
}
