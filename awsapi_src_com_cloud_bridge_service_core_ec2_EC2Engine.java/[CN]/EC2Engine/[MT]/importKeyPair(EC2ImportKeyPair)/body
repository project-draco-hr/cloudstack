{
  EC2SSHKeyPair response=new EC2SSHKeyPair();
  try {
    CloudStackKeyPair resp=getApi().registerSSHKeyPair(request.getKeyName(),request.getPublicKeyMaterial());
    if (resp == null) {
      throw new Exception("Ivalid CloudStack API response");
    }
    response.setFingerprint(resp.getFingerprint());
    response.setKeyName(resp.getName());
    response.setPrivateKey(resp.getPrivatekey());
  }
 catch (  Exception e) {
    logger.error("EC2 ImportKeyPair - ",e);
    handleException(e);
  }
  return response;
}
