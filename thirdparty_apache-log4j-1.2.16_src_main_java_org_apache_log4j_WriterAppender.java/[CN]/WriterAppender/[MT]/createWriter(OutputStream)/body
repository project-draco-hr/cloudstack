{
  OutputStreamWriter retval=null;
  String enc=getEncoding();
  if (enc != null) {
    try {
      retval=new OutputStreamWriter(os,enc);
    }
 catch (    IOException e) {
      if (e instanceof InterruptedIOException) {
        Thread.currentThread().interrupt();
      }
      LogLog.warn("Error initializing output writer.");
      LogLog.warn("Unsupported encoding?");
    }
  }
  if (retval == null) {
    retval=new OutputStreamWriter(os);
  }
  return retval;
}
