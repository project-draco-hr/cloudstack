{
  final CloudStackVersion dbVersion=CloudStackVersion.parse("4.8.0");
  assertNotNull(dbVersion);
  final CloudStackVersion currentVersion=CloudStackVersion.parse("4.8.2.0");
  assertNotNull(currentVersion);
  final DatabaseUpgradeChecker checker=new DatabaseUpgradeChecker();
  final DbUpgrade[] upgrades=checker.calculateUpgradePath(dbVersion,currentVersion);
  assertNotNull(upgrades);
  assertEquals(2,upgrades.length);
  assertTrue(upgrades[0] instanceof Upgrade480to481);
  assertTrue(Arrays.equals(new String[]{"4.8.1",currentVersion.toString()},upgrades[1].getUpgradableVersionRange()));
  assertEquals(currentVersion.toString(),upgrades[1].getUpgradedVersion());
}
