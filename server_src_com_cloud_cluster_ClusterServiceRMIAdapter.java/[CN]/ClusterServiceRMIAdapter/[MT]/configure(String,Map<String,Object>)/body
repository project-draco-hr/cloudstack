{
  _name=name;
  ComponentLocator locator=ComponentLocator.getCurrentLocator();
  manager=locator.getManager(ClusterManager.class);
  if (manager == null)   throw new ConfigurationException("Unable to get " + ClusterManager.class.getName());
  _mshostDao=locator.getDao(ManagementServerHostDao.class);
  if (_mshostDao == null)   throw new ConfigurationException("Unable to get " + ManagementServerHostDao.class.getName());
  File dbPropsFile=PropertiesUtil.findConfigFile("db.properties");
  Properties dbProps=new Properties();
  try {
    dbProps.load(new FileInputStream(dbPropsFile));
  }
 catch (  FileNotFoundException e) {
    throw new ConfigurationException("Unable to find db.properties");
  }
catch (  IOException e) {
    throw new ConfigurationException("Unable to load db.properties content");
  }
  _clusterServicePort=NumbersUtil.parseInt(dbProps.getProperty("cluster.rmi.port"),DEFAULT_SERVICE_PORT);
  if (s_logger.isInfoEnabled())   s_logger.info("Cluster RMI port : " + _clusterServicePort);
  if (System.getSecurityManager() == null) {
    System.setSecurityManager(new SecurityManager());
  }
  try {
    ClusterService service=(ClusterService)UnicastRemoteObject.exportObject(new ClusterServiceRMIImpl(manager),0);
    Registry registry=LocateRegistry.getRegistry(_clusterServicePort);
    registry.rebind(composeEndpointName(manager.getSelfNodeIP(),getServicePort()),service);
  }
 catch (  Exception e) {
    throw new ConfigurationException("Unable to register RMI cluster service");
  }
  return true;
}
