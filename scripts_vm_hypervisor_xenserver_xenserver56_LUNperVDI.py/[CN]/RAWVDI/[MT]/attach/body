def attach(self, sr_uuid, vdi_uuid):
    self.sr._loadvdis()
    if (not self.sr.vdis.has_key(vdi_uuid)):
        raise xs_errors.XenError('VDIUnavailable')
    if (not util.pathexists(self.path)):
        self.sr.refresh()
        if (not util.wait_for_path(self.path, MAX_TIMEOUT)):
            util.SMlog(('Unable to detect LUN attached to host [%s]' % self.sr.path))
            raise xs_errors.XenError('VDIUnavailable')
    return super(RAWVDI, self).attach(sr_uuid, vdi_uuid)
