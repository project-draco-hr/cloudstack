{
  AsyncJobVO job=_jobDao.findById(jobId);
  String jobUuid=null;
  if (job != null) {
    jobUuid=job.getUuid();
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Complete async job-" + jobId + " = [ "+ jobUuid+ " ], jobStatus: "+ jobStatus+ ", resultCode: "+ resultCode+ ", result: "+ resultObject);
    }
  }
 else {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("job-" + jobId + " no longer exists, we just log completion info here. "+ jobStatus+ ", resultCode: "+ resultCode+ ", result: "+ resultObject);
    }
    return;
  }
  Transaction txt=Transaction.currentTxn();
  try {
    txt.start();
    job.setCompleteMsid(getMsid());
    job.setStatus(jobStatus);
    job.setResultCode(resultCode);
    publishOnEventBus(job,"complete");
    job.setInstanceType(null);
    job.setInstanceId(null);
    if (resultObject != null) {
      job.setResult(ApiSerializerHelper.toSerializedStringOld(resultObject));
    }
    job.setLastUpdated(DateUtil.currentGMTTime());
    _jobDao.update(jobId,job);
    txt.commit();
  }
 catch (  Exception e) {
    s_logger.error("Unexpected exception while completing async job-" + jobId + " = [ "+ jobUuid+ " ]",e);
    txt.rollback();
  }
}
