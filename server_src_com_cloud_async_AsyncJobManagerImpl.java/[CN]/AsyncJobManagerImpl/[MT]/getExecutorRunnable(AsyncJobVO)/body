{
  return new Runnable(){
    public void run(){
      long jobId=0;
      Transaction txn=Transaction.open(Transaction.CLOUD_DB);
      try {
        jobId=job.getId();
        NDC.push("job-" + jobId);
        if (s_logger.isDebugEnabled()) {
          s_logger.debug("Executing " + job.getCmd() + " for job-"+ jobId);
        }
        Class<?> cmdClass=Class.forName(job.getCmd());
        BaseCmd cmdObj=(BaseCmd)cmdClass.newInstance();
        Type mapType=new TypeToken<Map<String,String>>(){
        }
.getType();
        Gson gson=GsonHelper.getBuilder().create();
        Map<String,String> params=gson.fromJson(job.getCmdInfo(),mapType);
        _dispatcher.dispatch(cmdObj,params);
        completeAsyncJob(jobId,AsyncJobResult.STATUS_SUCCEEDED,0,cmdObj.getResponse());
        if (s_logger.isDebugEnabled())         s_logger.debug("Done executing " + job.getCmd() + " for job-"+ jobId);
      }
 catch (      Throwable e) {
        s_logger.error("Unexpected exception while executing " + job.getCmd(),e);
      }
 finally {
        StackMaid.current().exitCleanup();
        txn.close();
        NDC.pop();
      }
    }
  }
;
}
