def _scan(self, force):
    for i in range(SR.SCAN_RETRY_ATTEMPTS):
        error = False
        pattern = os.path.join(self.path, ('*%s' % FileVDI.FILE_SUFFIX))
        vhds = vhdutil.getAllVHDs(pattern, FileVDI.extractUuid)
        for (uuid, vhdInfo) in vhds.iteritems():
            if vhdInfo.error:
                error = True
                break
        if (not error):
            return vhds
        Util.log(('Scan error on attempt %d' % i))
    if force:
        return vhds
    raise util.SMException('Scan error')
