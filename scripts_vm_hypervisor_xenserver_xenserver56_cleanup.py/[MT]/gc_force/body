def gc_force(session, srUuid, force=False, dryRun=False):
    'Garbage collect all deleted VDIs in SR "srUuid".\n    The following algorithm is used:\n    1. If we are already GC\'ing or coalescing a VDI pair, abort GC/coalesce\n    2. Scan the SR\n    3. GC\n    4. return\n    '
    Util.log(('=== SR %s: gc_force ===' % srUuid))
    init(srUuid)
    sr = SR.getInstance(srUuid, session)
    if (not lockRunning.acquireNoblock()):
        _abort(srUuid)
    else:
        Util.log('Nothing was running, clear to proceed')
    if force:
        Util.log('FORCED: will continue even if there are VHD errors')
    sr.scanLocked(force)
    sr.cleanupCoalesceJournals()
    try:
        sr.garbageCollect(dryRun)
    finally:
        sr.cleanup()
        Util.log('final SR state:')
        Util.log(sr.toString())
        sr.printVDIs()
        lockRunning.release()
