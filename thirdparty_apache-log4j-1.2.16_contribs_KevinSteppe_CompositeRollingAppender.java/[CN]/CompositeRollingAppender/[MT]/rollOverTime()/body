{
  curTimeRollBackups++;
  if (staticLogFileName) {
    if (datePattern == null) {
      errorHandler.error("Missing DatePattern option in rollOver().");
      return;
    }
    String dateFormat=sdf.format(now);
    if (scheduledFilename.equals(fileName + dateFormat)) {
      errorHandler.error("Compare " + scheduledFilename + " : "+ fileName+ dateFormat);
      return;
    }
    this.closeFile();
    String from, to;
    for (int i=1; i <= curSizeRollBackups; i++) {
      from=fileName + '.' + i;
      to=scheduledFilename + '.' + i;
      rollFile(from,to);
    }
    rollFile(fileName,scheduledFilename);
  }
  try {
    curSizeRollBackups=0;
    scheduledFilename=fileName + sdf.format(now);
    this.setFile(baseFileName,false);
  }
 catch (  IOException e) {
    errorHandler.error("setFile(" + fileName + ", false) call failed.");
  }
}
