{
  RollingCalendar c=new RollingCalendar();
  Date epoch=new Date(0);
  if (datePattern != null) {
    for (int i=TOP_OF_MINUTE; i <= TOP_OF_MONTH; i++) {
      String r0=sdf.format(epoch);
      c.setType(i);
      Date next=new Date(c.getNextCheckMillis(epoch));
      String r1=sdf.format(next);
      if (r0 != null && r1 != null && !r0.equals(r1)) {
        return i;
      }
    }
  }
  return TOP_OF_TROUBLE;
}
