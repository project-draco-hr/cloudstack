{
  if (requestedVolumes == null || requestedVolumes.isEmpty() || pool == null) {
    return false;
  }
  if (pool.getCapacityIops() == null) {
    s_logger.info("Storage pool " + pool.getName() + " ("+ pool.getId()+ ") does not supply Iops capacity, assuming enough capacity");
    return true;
  }
  long currentIops=0;
  List<VolumeVO> volumesInPool=_volumeDao.findByPoolId(pool.getId(),null);
  for (  VolumeVO volumeInPool : volumesInPool) {
    Long minIops=volumeInPool.getMinIops();
    if (minIops != null && minIops > 0) {
      currentIops+=minIops;
    }
  }
  long requestedIops=0;
  for (  Volume requestedVolume : requestedVolumes) {
    Long minIops=requestedVolume.getMinIops();
    if (minIops != null && minIops > 0) {
      requestedIops+=minIops;
    }
  }
  long futureIops=currentIops + requestedIops;
  return futureIops <= pool.getCapacityIops();
}
