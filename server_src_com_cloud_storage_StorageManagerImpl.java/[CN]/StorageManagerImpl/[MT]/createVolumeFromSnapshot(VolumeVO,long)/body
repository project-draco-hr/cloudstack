{
  VolumeVO createdVolume=null;
  SnapshotVO snapshot=_snapshotDao.findById(snapshotId);
  Pair<VolumeVO,String> volumeDetails=createVolumeFromSnapshot(volume,snapshot);
  if (volumeDetails != null) {
    createdVolume=volumeDetails.first();
    UsageEventVO usageEvent=new UsageEventVO(EventTypes.EVENT_VOLUME_CREATE,createdVolume.getAccountId(),createdVolume.getDataCenterId(),createdVolume.getId(),createdVolume.getName(),createdVolume.getDiskOfferingId(),null,createdVolume.getSize());
    _usageEventDao.persist(usageEvent);
  }
  return createdVolume;
}
