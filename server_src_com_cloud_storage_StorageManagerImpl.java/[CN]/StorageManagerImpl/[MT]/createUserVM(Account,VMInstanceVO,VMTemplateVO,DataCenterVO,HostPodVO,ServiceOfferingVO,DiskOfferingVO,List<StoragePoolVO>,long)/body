{
  List<VolumeVO> volumes=create(account,vm,template,dc,pod,offering,diskOffering,avoids,size);
  if (volumes == null || volumes.size() == 0) {
    throw new CloudRuntimeException("Unable to create volume for " + vm.getName());
  }
  for (  VolumeVO v : volumes) {
    try {
      v.setAttached(new Date());
      _volsDao.update(v.getId(),v);
    }
 catch (    Exception e) {
      s_logger.warn("Error updating the attached value for volume " + v.getId() + ":"+ e);
    }
  }
  return volumes.get(0).getPoolId();
}
