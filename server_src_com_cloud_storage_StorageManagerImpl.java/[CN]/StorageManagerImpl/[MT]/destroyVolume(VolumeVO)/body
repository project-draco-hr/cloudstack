{
  Transaction txn=Transaction.currentTxn();
  txn.start();
  _volsDao.update(volume,Volume.Event.Destroy);
  long volumeId=volume.getId();
  _snapshotMgr.deletePoliciesForVolume(volumeId);
  VMInstanceVO vmInstance=_vmInstanceDao.findById(volume.getInstanceId());
  if (vmInstance.getType().equals(VirtualMachine.Type.User)) {
    _accountMgr.decrementResourceCount(volume.getAccountId(),ResourceType.volume);
  }
  txn.commit();
}
