{
  s_logger.debug("Adding pool " + pool.getName() + " to  host "+ hostId);
  if (pool.getPoolType() != StoragePoolType.NetworkFilesystem && pool.getPoolType() != StoragePoolType.Filesystem && pool.getPoolType() != StoragePoolType.IscsiLUN && pool.getPoolType() != StoragePoolType.Iscsi && pool.getPoolType() != StoragePoolType.VMFS && pool.getPoolType() != StoragePoolType.SharedMountPoint && pool.getPoolType() != StoragePoolType.PreSetup) {
    s_logger.warn(" Doesn't support storage pool type " + pool.getPoolType());
    return false;
  }
  ModifyStoragePoolCommand cmd=new ModifyStoragePoolCommand(true,pool);
  final Answer answer=_agentMgr.easySend(hostId,cmd);
  if (answer != null) {
    if (answer.getResult() == false) {
      String msg="Add host failed due to ModifyStoragePoolCommand failed" + answer.getDetails();
      _alertMgr.sendAlert(AlertManager.ALERT_TYPE_HOST,pool.getDataCenterId(),pool.getPodId(),msg,msg);
      s_logger.warn(msg);
      return false;
    }
    if (answer instanceof ModifyStoragePoolAnswer) {
      ModifyStoragePoolAnswer mspAnswer=(ModifyStoragePoolAnswer)answer;
      StoragePoolHostVO poolHost=_poolHostDao.findByPoolHost(pool.getId(),hostId);
      if (poolHost == null) {
        poolHost=new StoragePoolHostVO(pool.getId(),hostId,mspAnswer.getPoolInfo().getLocalPath().replaceAll("//","/"));
        _poolHostDao.persist(poolHost);
      }
 else {
        poolHost.setLocalPath(mspAnswer.getPoolInfo().getLocalPath().replaceAll("//","/"));
      }
      pool.setAvailableBytes(mspAnswer.getPoolInfo().getAvailableBytes());
      pool.setCapacityBytes(mspAnswer.getPoolInfo().getCapacityBytes());
      _storagePoolDao.update(pool.getId(),pool);
      return true;
    }
  }
 else {
    return false;
  }
  return false;
}
