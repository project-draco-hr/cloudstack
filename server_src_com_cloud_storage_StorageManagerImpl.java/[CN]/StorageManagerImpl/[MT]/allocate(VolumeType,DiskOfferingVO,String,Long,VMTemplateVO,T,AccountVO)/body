{
  VolumeVO vol=new VolumeVO(VolumeType.ROOT,name,vm.getDataCenterId(),account.getDomainId(),account.getId(),offering.getId(),size);
  if (vm != null) {
    vol.setInstanceId(vm.getId());
  }
  if (template != null && template.getFormat() != ImageFormat.ISO) {
    vol.setTemplateId(template.getId());
  }
  vol=_volsDao.persist(vol);
  return vol;
}
