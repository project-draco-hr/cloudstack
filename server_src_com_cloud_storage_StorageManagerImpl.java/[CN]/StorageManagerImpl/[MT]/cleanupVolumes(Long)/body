{
  List<VolumeVO> volumesForVm=_volsDao.findByInstance(vmId);
  for (  VolumeVO vol : volumesForVm) {
    if (vol.getVolumeType().equals(VolumeType.ROOT)) {
      destroyVolume(vol);
    }
 else {
      _volsDao.detachVolume(vol.getId());
    }
  }
}
