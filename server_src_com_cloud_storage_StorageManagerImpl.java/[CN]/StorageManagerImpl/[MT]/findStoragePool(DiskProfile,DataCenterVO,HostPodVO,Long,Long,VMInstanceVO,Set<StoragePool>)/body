{
  VirtualMachineProfile<VMInstanceVO> profile=new VirtualMachineProfileImpl<VMInstanceVO>(vm);
  for (  StoragePoolAllocator allocator : _storagePoolAllocators) {
    final List<StoragePool> poolList=allocator.allocateToPool(dskCh,profile,dc.getId(),pod.getId(),clusterId,hostId,avoid,1);
    if (poolList != null && !poolList.isEmpty()) {
      return (StoragePool)this.dataStoreMgr.getDataStore(poolList.get(0).getId(),DataStoreRole.Primary);
    }
  }
  return null;
}
