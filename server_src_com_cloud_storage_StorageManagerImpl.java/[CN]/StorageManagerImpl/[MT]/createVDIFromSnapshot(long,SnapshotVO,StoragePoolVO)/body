{
  String vdiUUID=null;
  Long volumeId=snapshot.getVolumeId();
  VolumeVO volume=_volsDao.findById(volumeId);
  String primaryStoragePoolNameLabel=pool.getUuid();
  String secondaryStoragePoolUrl=getSecondaryStorageURL(volume.getDataCenterId());
  Long dcId=volume.getDataCenterId();
  long accountId=volume.getAccountId();
  String backedUpSnapshotUuid=snapshot.getBackupSnapshotId();
  CreateVolumeFromSnapshotCommand createVolumeFromSnapshotCommand=new CreateVolumeFromSnapshotCommand(primaryStoragePoolNameLabel,secondaryStoragePoolUrl,dcId,accountId,volumeId,backedUpSnapshotUuid,snapshot.getName());
  String basicErrMsg="Failed to create volume from " + snapshot.getName() + " for volume: "+ volume.getId();
  CreateVolumeFromSnapshotAnswer answer=(CreateVolumeFromSnapshotAnswer)sendToHostsOnStoragePool(pool.getId(),createVolumeFromSnapshotCommand,basicErrMsg,_totalRetries,_pauseInterval,_shouldBeSnapshotCapable,null);
  if (answer != null && answer.getResult()) {
    vdiUUID=answer.getVdi();
  }
 else   if (answer != null) {
    s_logger.error(basicErrMsg);
  }
  return new Pair<String,String>(vdiUUID,basicErrMsg);
}
