{
  if (group != null) {
    List<DedicatedResourceVO> dedicatedResources=_dedicatedDao.listByAffinityGroupId(group.getId());
    if (!dedicatedResources.isEmpty()) {
      if (s_logger.isDebugEnabled()) {
        s_logger.debug("Releasing the dedicated resources under group: " + group);
      }
      Transaction txn=Transaction.currentTxn();
      txn.start();
      SearchBuilder<DedicatedResourceVO> listByAffinityGroup=_dedicatedDao.createSearchBuilder();
      listByAffinityGroup.and("affinityGroupId",listByAffinityGroup.entity().getAffinityGroupId(),SearchCriteria.Op.EQ);
      listByAffinityGroup.done();
      SearchCriteria<DedicatedResourceVO> sc=listByAffinityGroup.create();
      sc.setParameters("affinityGroupId",group.getId());
      _dedicatedDao.lockRows(sc,null,true);
      _dedicatedDao.remove(sc);
      txn.commit();
    }
 else {
      if (s_logger.isDebugEnabled()) {
        s_logger.debug("No dedicated resources to releease under group: " + group);
      }
    }
  }
  return;
}
