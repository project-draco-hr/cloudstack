{
  setupPriorityOfRedundantRouter();
  if (this.getNumberOfRoutersToDeploy() > 0) {
    if (networkModel.isNetworkSystem(guestNetwork) || guestNetwork.getGuestType() == Network.GuestType.Shared) {
      this.owner=accountMgr.getAccount(Account.ACCOUNT_ID_SYSTEM);
    }
    this.publicNetwork=networkModel.isProviderSupportServiceInNetwork(guestNetwork.getId(),Service.SourceNat,Provider.VirtualRouter);
    if (this.isRedundant && !this.publicNetwork) {
      logger.error("Didn't support redundant virtual router without public network!");
      this.routers=new ArrayList<>();
    }
 else {
      this.findVirtualProvider();
      this.findOfferingId();
      this.findSourceNatIP();
      this.deployAllVirtualRouters();
    }
  }
}
