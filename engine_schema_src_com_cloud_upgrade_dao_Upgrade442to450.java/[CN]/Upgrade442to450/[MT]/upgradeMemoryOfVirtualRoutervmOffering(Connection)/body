{
  PreparedStatement updatePstmt=null;
  PreparedStatement selectPstmt=null;
  ResultSet selectResultSet=null;
  int newRamSize=256;
  long serviceOfferingId=0;
  try {
    selectPstmt=conn.prepareStatement("SELECT id FROM `cloud`.`service_offering` WHERE vm_type='domainrouter'");
    updatePstmt=conn.prepareStatement("UPDATE `cloud`.`service_offering` SET ram_size=? WHERE id=?");
    selectResultSet=selectPstmt.executeQuery();
    if (selectResultSet.next()) {
      serviceOfferingId=selectResultSet.getLong("id");
    }
    updatePstmt.setInt(1,newRamSize);
    updatePstmt.setLong(2,serviceOfferingId);
    updatePstmt.executeUpdate();
  }
 catch (  SQLException e) {
    throw new CloudRuntimeException("Unable to upgrade ram_size of service offering for domain router. ",e);
  }
 finally {
    try {
      if (selectPstmt != null) {
        selectPstmt.close();
      }
      if (selectResultSet != null) {
        selectResultSet.close();
      }
      if (updatePstmt != null) {
        updatePstmt.close();
      }
    }
 catch (    SQLException e) {
    }
  }
  s_logger.debug("Done upgrading RAM for service offering of domain router to " + newRamSize);
}
