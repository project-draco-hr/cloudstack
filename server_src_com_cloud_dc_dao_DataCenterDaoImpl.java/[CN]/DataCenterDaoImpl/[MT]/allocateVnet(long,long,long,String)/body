{
  ArrayList<Long> dedicatedVlanDbIds=new ArrayList<Long>();
  List<AccountGuestVlanMapVO> maps=_accountGuestVlanMapDao.listAccountGuestVlanMapsByAccount(accountId);
  for (  AccountGuestVlanMapVO map : maps) {
    dedicatedVlanDbIds.add(map.getId());
  }
  if (dedicatedVlanDbIds != null && !dedicatedVlanDbIds.isEmpty()) {
    DataCenterVnetVO vo=_vnetAllocDao.take(physicalNetworkId,accountId,reservationId,dedicatedVlanDbIds);
    if (vo != null)     return vo.getVnet();
  }
  DataCenterVnetVO vo=_vnetAllocDao.take(physicalNetworkId,accountId,reservationId,null);
  if (vo == null) {
    return null;
  }
  return vo.getVnet();
}
