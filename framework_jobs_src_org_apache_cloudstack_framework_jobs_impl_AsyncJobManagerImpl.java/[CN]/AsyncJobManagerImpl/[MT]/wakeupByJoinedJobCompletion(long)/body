{
  SearchCriteria<Long> joinJobSC=JoinJobSearch.create("joinJobId",joinedJobId);
  List<Long> result=_joinMapDao.customSearch(joinJobSC,null);
  if (result.size() > 0) {
    Collections.sort(result);
    Long[] ids=result.toArray(new Long[result.size()]);
    SearchCriteria<AsyncJobVO> jobsSC=JobIdsSearch.create("ids",ids);
    SearchCriteria<SyncQueueItemVO> queueItemsSC=QueueJobIdsSearch.create("contentIds",ids);
    Transaction txn=Transaction.currentTxn();
    txn.start();
    AsyncJobVO job=_jobDao.createForUpdate();
    job.setPendingSignals(AsyncJob.Constants.SIGNAL_MASK_WAKEUP);
    _jobDao.update(job,jobsSC);
    SyncQueueItemVO item=_queueItemDao.createForUpdate();
    item.setLastProcessNumber(null);
    item.setLastProcessMsid(null);
    _queueItemDao.update(item,queueItemsSC);
    txn.commit();
  }
  return _joinMapDao.findJobsToWake(joinedJobId);
}
