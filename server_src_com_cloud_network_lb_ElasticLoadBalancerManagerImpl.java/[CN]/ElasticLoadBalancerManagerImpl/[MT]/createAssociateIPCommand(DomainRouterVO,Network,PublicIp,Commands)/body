{
  IpAddressTO[] ipsToSend=new IpAddressTO[1];
  IpAddressTO ipTO=new IpAddressTO(ip.getAddress().addr(),true,false,false,ip.getVlanTag(),ip.getVlanGateway(),ip.getVlanNetmask(),ip.getMacAddress(),null,0);
  ipTO.setTrafficType(network.getTrafficType());
  ipTO.setNetworkTags(network.getTags());
  ipsToSend[0]=ipTO;
  IpAssocCommand cmd=new IpAssocCommand(ipsToSend);
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_IP,router.getPrivateIpAddress());
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_GUEST_IP,router.getGuestIpAddress());
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_NAME,router.getInstanceName());
  DataCenterVO dcVo=_dcDao.findById(router.getDataCenterIdToDeployIn());
  cmd.setAccessDetail(NetworkElementCommand.ZONE_NETWORK_TYPE,dcVo.getNetworkType().toString());
  cmds.addCommand("IPAssocCommand",cmd);
}
