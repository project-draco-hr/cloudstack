{
  List<DomainRouterVO> unusedElbVms=_elbVmMapDao.listUnusedElbVms();
  if (unusedElbVms != null && unusedElbVms.size() > 0)   s_logger.info("Found " + unusedElbVms.size() + " unused ELB vms");
 else   return;
  User user=_accountService.getSystemUser();
  for (  DomainRouterVO elbVm : unusedElbVms) {
    try {
      s_logger.info("Attempting to stop ELB VM: " + elbVm);
      stop(elbVm,true,user,_systemAcct);
    }
 catch (    ConcurrentOperationException e) {
      s_logger.warn("Unable to stop unused elb vm " + elbVm + " due to ",e);
      continue;
    }
catch (    ResourceUnavailableException e) {
      s_logger.warn("Unable to stop unused elb vm " + elbVm + " due to ",e);
      continue;
    }
    try {
      s_logger.info("Attempting to destroy ELB VM: " + elbVm);
      _itMgr.expunge(elbVm,user,_systemAcct);
    }
 catch (    ResourceUnavailableException e) {
      s_logger.warn("Unable to destroy unused elb vm " + elbVm + " due to ",e);
    }
  }
}
