{
  String accountName="account";
  String publicKeyString="ssh-rsa very public";
  String publicKeyMaterial=spy.getPublicKeyFromKeyKeyMaterial(publicKeyString);
  Mockito.doReturn(1L).when(account).getAccountId();
  Mockito.doReturn(1L).when(account).getAccountId();
  spy._sshKeyPairDao=sshKeyPairDao;
  Mockito.doReturn(Mockito.mock(SSHKeyPairVO.class)).when(sshKeyPairDao).findByPublicKey(1L,1L,publicKeyMaterial);
  Mockito.doReturn(Mockito.mock(SSHKeyPairVO.class)).when(sshKeyPairDao).findByName(1L,1L,accountName);
  Mockito.doReturn(Mockito.mock(SSHKeyPairVO.class)).when(sshKeyPairDao).persist(any(SSHKeyPairVO.class));
  Mockito.doReturn(accountName).when(regCmd).getName();
  Mockito.doReturn(publicKeyString).when(regCmd).getPublicKey();
  Mockito.doReturn(account).when(spy).getOwner(regCmd);
  spy.registerSSHKeyPair(regCmd);
  Mockito.verify(spy,Mockito.times(3)).getPublicKeyFromKeyKeyMaterial(anyString());
}
