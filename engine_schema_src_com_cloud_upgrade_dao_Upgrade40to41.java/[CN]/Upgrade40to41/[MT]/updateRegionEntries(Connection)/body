{
  File dbPropsFile=PropertiesUtil.findConfigFile("db.properties");
  final Properties dbProps;
  if (EncryptionSecretKeyChecker.useEncryption()) {
    StandardPBEStringEncryptor encryptor=EncryptionSecretKeyChecker.getEncryptor();
    dbProps=new EncryptableProperties(encryptor);
  }
 else {
    dbProps=new Properties();
  }
  try {
    dbProps.load(new FileInputStream(dbPropsFile));
  }
 catch (  IOException e) {
    s_logger.fatal("Unable to load db properties file, pl. check the classpath and file path configuration",e);
    return;
  }
catch (  NullPointerException e) {
    s_logger.fatal("Unable to locate db properties file within classpath or absolute path: db.properties");
    return;
  }
  int region_id=1;
  String regionId=dbProps.getProperty("region.id");
  if (regionId != null) {
    region_id=Integer.parseInt(regionId);
  }
  PreparedStatement pstmt=null;
  try {
    s_logger.debug("Updating region table with Id: " + region_id);
    pstmt=conn.prepareStatement("update `cloud`.`region` set id = ?");
    pstmt.setInt(1,region_id);
    pstmt.executeUpdate();
  }
 catch (  SQLException e) {
    throw new CloudRuntimeException("Error while updating region entries",e);
  }
 finally {
    try {
      if (pstmt != null) {
        pstmt.close();
      }
    }
 catch (    SQLException e) {
    }
  }
}
