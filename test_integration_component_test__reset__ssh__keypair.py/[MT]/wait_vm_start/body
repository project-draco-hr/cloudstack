def wait_vm_start(apiclient, account, timeout, sleep):
    while timeout:
        vms = VirtualMachine.list(apiclient, account=account.name, domainid=account.domainid, listall=True)
        if (vms and (vms[0].state == 'Running')):
            return timeout
        time.sleep(sleep)
        timeout = (timeout - 1)
    return timeout
