{
  Long id=(Long)params.get(BaseCmd.Properties.ID.getName());
  Long guestOSCategoryId=(Long)params.get(BaseCmd.Properties.OS_CATEGORY_ID.getName());
  if (guestOSCategoryId == null) {
    guestOSCategoryId=new Long(-1);
  }
  HostVO host=getManagementServer().getHostBy(id);
  if (host == null) {
    throw new ServerApiException(BaseCmd.PARAM_ERROR,"Host with id " + id.toString() + " doesn't exist");
  }
  List<Pair<String,Object>> returnValues=new ArrayList<Pair<String,Object>>();
  try {
    getManagementServer().updateHost(id,guestOSCategoryId);
  }
 catch (  Exception ex) {
    s_logger.error("Failed to update host: ",ex);
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"Failed to update host: " + ex.getMessage());
  }
  final StateMachine<Status,Event> sm=new StateMachine<Status,Event>();
  returnValues.add(new Pair<String,Object>(BaseCmd.Properties.SUCCESS.getName(),"true"));
  returnValues.add(new Pair<String,Object>(getResultObjectName(),composeResultObject(host,sm)));
  return returnValues;
}
