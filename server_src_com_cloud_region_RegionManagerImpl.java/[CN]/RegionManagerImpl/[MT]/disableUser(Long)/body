{
  UserVO user=_userDao.findById(userId);
  if (user == null || user.getRemoved() != null) {
    throw new InvalidParameterValueException("Unable to find active user by id " + userId);
  }
  long regionId=user.getRegionId();
  StringBuffer params=new StringBuffer("/api?command=disableUser&id=" + user.getUuid());
  if (getId() == regionId) {
    UserAccount disabledUser=_accountMgr.disableUser(userId);
    if (disabledUser != null) {
      List<RegionVO> regions=_regionDao.listAll();
      for (      Region region : regions) {
        if (region.getId() == getId()) {
          continue;
        }
        String url=region.getEndPoint() + params + "&"+ ApiConstants.IS_PROPAGATE+ "=true";
        if (makeAPICall(url)) {
          s_logger.debug("Successfully disabled user :" + user.getUuid() + " in Region: "+ region.getId());
        }
 else {
          s_logger.error("Error while disabling user :" + user.getUuid() + " in Region: "+ region.getId());
        }
      }
    }
    return disabledUser;
  }
 else {
    Region region=_regionDao.findById(regionId);
    String url=region.getEndPoint() + params;
    if (makeAPICall(url)) {
      s_logger.debug("Successfully disabled user :" + user.getUuid() + " in source Region: "+ region.getId());
      return null;
    }
 else {
      s_logger.error("Error while disabling user :" + user.getUuid() + " in source Region: "+ region.getId());
      return null;
    }
  }
}
