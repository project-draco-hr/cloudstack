{
  List<LoadBalancingRule> rules=new ArrayList<LoadBalancingRule>();
  for (  LoadBalancerVO lb : lbs) {
    List<LbDestination> dstList=getExistingDestinations(lb.getId());
    if (dstList != null && !dstList.isEmpty()) {
      LoadBalancingRule loadBalancing=new LoadBalancingRule(lb,dstList);
      rules.add(loadBalancing);
    }
  }
  if (!_networkMgr.applyRules(rules,false)) {
    s_logger.debug("LB rules are not completely applied");
    return false;
  }
  for (  LoadBalancerVO lb : lbs) {
    if (lb.getState() == FirewallRule.State.Revoke) {
      _lbDao.remove(lb.getId());
      s_logger.debug("LB " + lb.getId() + " is successfully removed");
    }
 else     if (lb.getState() == FirewallRule.State.Add) {
      lb.setState(FirewallRule.State.Active);
      s_logger.debug("LB rule " + lb.getId() + " state is set to Active");
      _lbDao.persist(lb);
    }
  }
  return true;
}
