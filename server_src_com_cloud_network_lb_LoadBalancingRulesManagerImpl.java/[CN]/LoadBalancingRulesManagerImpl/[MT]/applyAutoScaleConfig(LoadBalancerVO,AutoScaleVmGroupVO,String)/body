{
  LbAutoScaleVmGroup lbAutoScaleVmGroup=getLbAutoScaleVmGroup(vmGroup,currentState,lb);
  List<LbStickinessPolicy> policyList=getStickinessPolicies(lb.getId());
  LoadBalancingRule rule=new LoadBalancingRule(lb,null,policyList,null);
  rule.setAutoScaleVmGroup(lbAutoScaleVmGroup);
  if (!isRollBackAllowedForProvider(lb)) {
    return false;
  }
  List<LoadBalancingRule> rules=Arrays.asList(rule);
  if (!_networkMgr.applyRules(rules,FirewallRule.Purpose.LoadBalancing,this,false)) {
    s_logger.debug("LB rules' autoscale config are not completely applied");
    return false;
  }
  return true;
}
