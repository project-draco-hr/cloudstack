{
  CreateSnapshotResultObject resultObject=new CreateSnapshotResultObject();
  ManagementServer managementServer=getAsyncJobMgr().getExecutorContext().getManagementServer();
  VolumeVO volume=managementServer.findVolumeById(snapshot.getVolumeId());
  resultObject.setId(snapshot.getId());
  long domainId=-1;
  Account account=getAsyncJobMgr().getExecutorContext().getAccountDao().findById(snapshot.getAccountId());
  if (account != null) {
    resultObject.setAccountName(account.getAccountName());
    domainId=account.getDomainId();
    if (domainId != -1) {
      resultObject.setDomainId(domainId);
      resultObject.setDomainName(getAsyncJobMgr().getExecutorContext().getManagementServer().findDomainIdById(domainId).getName());
    }
  }
  String snapshotTypeStr=SnapshotType.values()[snapshot.getSnapshotType()].name();
  resultObject.setSnapshotType(snapshotTypeStr);
  resultObject.setVolumeId(snapshot.getVolumeId());
  resultObject.setVolumeName(volume.getName());
  resultObject.setVolumeType(volume.getVolumeType());
  resultObject.setCreated(snapshot.getCreated());
  resultObject.setName(snapshot.getName());
  return resultObject;
}
