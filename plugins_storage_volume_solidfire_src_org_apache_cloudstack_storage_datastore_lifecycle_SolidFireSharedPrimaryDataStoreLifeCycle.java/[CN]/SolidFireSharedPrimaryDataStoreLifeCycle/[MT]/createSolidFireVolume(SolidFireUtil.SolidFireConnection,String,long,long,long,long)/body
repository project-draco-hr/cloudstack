{
  try {
    Account csAccount=CallContext.current().getCallingAccount();
    long csAccountId=csAccount.getId();
    AccountVO accountVo=_accountDao.findById(csAccountId);
    String sfAccountName=SolidFireUtil.getSolidFireAccountName(accountVo.getUuid(),csAccountId);
    SolidFireUtil.SolidFireAccount sfAccount=SolidFireUtil.getSolidFireAccount(sfConnection,sfAccountName);
    if (sfAccount == null) {
      long accountNumber=SolidFireUtil.createSolidFireAccount(sfConnection,sfAccountName);
      sfAccount=SolidFireUtil.getSolidFireAccountById(sfConnection,accountNumber);
      SolidFireUtil.updateCsDbWithSolidFireAccountInfo(csAccountId,sfAccount,_accountDetailsDao);
    }
    long sfVolumeId=SolidFireUtil.createSolidFireVolume(sfConnection,SolidFireUtil.getSolidFireVolumeName(volumeName),sfAccount.getId(),volumeSize,true,null,minIops,maxIops,burstIops);
    SolidFireUtil.SolidFireVolume sfVolume=SolidFireUtil.getSolidFireVolume(sfConnection,sfVolumeId);
    return sfVolume;
  }
 catch (  Throwable e) {
    throw new CloudRuntimeException("Failed to create a SolidFire volume: " + e.toString());
  }
}
