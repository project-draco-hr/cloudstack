{
  List<StaticNatRuleTO> rulesTO=new ArrayList<StaticNatRuleTO>();
  if (rules != null) {
    for (    final StaticNatRule rule : rules) {
      final IpAddress sourceIp=networkModel.getIp(rule.getSourceIpAddressId());
      final StaticNatRuleTO ruleTO=new StaticNatRuleTO(rule,null,sourceIp.getAddress().addr(),rule.getDestIpAddress());
      rulesTO.add(ruleTO);
    }
  }
  final SetStaticNatRulesCommand cmd=new SetStaticNatRulesCommand(rulesTO,router.getVpcId());
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_IP,routerControlHelper.getRouterControlIp(router.getId()));
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_GUEST_IP,routerControlHelper.getRouterIpInNetwork(guestNetworkId,router.getId()));
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_NAME,router.getInstanceName());
  final DataCenterVO dcVo=dcDao.findById(router.getDataCenterId());
  cmd.setAccessDetail(NetworkElementCommand.ZONE_NETWORK_TYPE,dcVo.getNetworkType().toString());
  cmds.addCommand(cmd);
}
