{
  List<diskDef> disks=new ArrayList<diskDef>();
  List<VolumeVO> rootVolumes=findVolumes(vols,VolumeType.ROOT,true);
  if (rootVolumes.size() != 1) {
    throw new InternalErrorException("Could not find systemVM root disk.");
  }
  VolumeVO rootVolume=rootVolumes.get(0);
  String rootkPath=rootVolume.getPath();
  StorageVol tmplVol=createTmplDataDisk(rootkPath,10L * 1024 * 1024);
  String datadiskPath=tmplVol.getKey();
  diskDef hda=new diskDef();
  hda.defFileBasedDisk(rootkPath,"vda",diskDef.diskBus.VIRTIO,diskDef.diskFmtType.QCOW2);
  disks.add(hda);
  diskDef hdb=new diskDef();
  hdb.defFileBasedDisk(datadiskPath,"vdb",diskDef.diskBus.VIRTIO,diskDef.diskFmtType.RAW);
  disks.add(hdb);
  diskDef hdc=new diskDef();
  hdc.defFileBasedDisk(_sysvmISOPath,"hdc",diskDef.diskBus.IDE,diskDef.diskFmtType.RAW);
  hdc.setDeviceType(diskDef.deviceType.CDROM);
  disks.add(hdc);
  return disks;
}
