{
  List<DiskDef> disks=new ArrayList<DiskDef>();
  List<VolumeVO> rootVolumes=findVolumes(vols,VolumeType.ROOT,true);
  if (rootVolumes.size() != 1) {
    throw new InternalErrorException("Could not find systemVM root disk.");
  }
  VolumeVO rootVolume=rootVolumes.get(0);
  String rootkPath=rootVolume.getPath();
  StorageVol tmplVol=createTmplDataDisk(rootkPath,10L * 1024 * 1024);
  String datadiskPath=tmplVol.getKey();
  DiskDef hda=new DiskDef();
  hda.defFileBasedDisk(rootkPath,"vda",DiskDef.diskBus.VIRTIO,DiskDef.diskFmtType.QCOW2);
  disks.add(hda);
  DiskDef hdb=new DiskDef();
  hdb.defFileBasedDisk(datadiskPath,"vdb",DiskDef.diskBus.VIRTIO,DiskDef.diskFmtType.RAW);
  disks.add(hdb);
  DiskDef hdc=new DiskDef();
  hdc.defFileBasedDisk(_sysvmISOPath,"hdc",DiskDef.diskBus.IDE,DiskDef.diskFmtType.RAW);
  hdc.setDeviceType(DiskDef.deviceType.CDROM);
  disks.add(hdc);
  return disks;
}
