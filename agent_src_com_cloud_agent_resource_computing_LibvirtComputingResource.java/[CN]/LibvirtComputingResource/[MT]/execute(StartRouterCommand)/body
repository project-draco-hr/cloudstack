{
  final VirtualRouter router=cmd.getRouter();
  String result=null;
  State state=State.Stopped;
synchronized (_vms) {
    _vms.put(cmd.getVmName(),State.Starting);
  }
  try {
    result=startDomainRouter(cmd);
    if (result != null) {
      throw new ExecutionException(result,null);
    }
    result=_virtRouterResource.connect(router.getPrivateIpAddress());
    if (result != null) {
      throw new ExecutionException(result,null);
    }
    state=State.Running;
    return new StartRouterAnswer(cmd);
  }
 catch (  final ExecutionException e) {
    return new Answer(cmd,false,e.getMessage());
  }
catch (  final Throwable th) {
    return createErrorAnswer(cmd,"Unable to start router",th);
  }
 finally {
synchronized (_vms) {
      _vms.put(cmd.getVmName(),state);
    }
  }
}
