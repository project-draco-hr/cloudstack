{
  List<InterfaceDef> nics=new ArrayList<InterfaceDef>();
  VirtualRouter router=cmd.getRouter();
  String guestMac=router.getGuestMacAddress();
  String privateMac=router.getPrivateMacAddress();
  String pubMac=router.getPublicMacAddress();
  String brName;
  InterfaceDef pubNic=new InterfaceDef();
  InterfaceDef privNic=new InterfaceDef();
  InterfaceDef vnetNic=new InterfaceDef();
  if ("untagged".equalsIgnoreCase(router.getVnet())) {
    vnetNic.defBridgeNet(_privBridgeName,null,guestMac,InterfaceDef.nicModel.VIRTIO);
  }
 else {
    String vnetId=getVnetId(router.getVnet());
    brName=setVnetBrName(vnetId);
    String vnetDev="vtap" + vnetId;
    createVnet(vnetId,_pifs.first());
    vnetNic.defBridgeNet(brName,null,guestMac,InterfaceDef.nicModel.VIRTIO);
  }
  nics.add(vnetNic);
  privNic.defPrivateNet(_privNwName,null,privateMac,InterfaceDef.nicModel.VIRTIO);
  nics.add(privNic);
  if ("untagged".equalsIgnoreCase(router.getVlanId())) {
    pubNic.defBridgeNet(_publicBridgeName,null,pubMac,InterfaceDef.nicModel.VIRTIO);
  }
 else {
    String vnetId=getVnetId(router.getVlanId());
    brName=setVnetBrName(vnetId);
    String vnetDev="vtap" + vnetId;
    createVnet(vnetId,_pifs.second());
    pubNic.defBridgeNet(brName,null,pubMac,InterfaceDef.nicModel.VIRTIO);
  }
  nics.add(pubNic);
  return nics;
}
