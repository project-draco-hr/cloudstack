{
  try {
    Connect conn=LibvirtConnection.getConnection();
    _storageResource.getStoragePoolbyURI(conn,new URI(cmd.getSecondaryStorageUrl()));
    String snapshotPath=cmd.getSnapshotUuid();
    String primaryUuid=cmd.getPrimaryStoragePoolNameLabel();
    StoragePool primaryPool=_storageResource.getStoragePool(conn,primaryUuid);
    LibvirtStoragePoolDef spd=_storageResource.getStoragePoolDef(conn,primaryPool);
    String primaryPath=spd.getTargetPath();
    String volUuid=UUID.randomUUID().toString();
    String volPath=primaryPath + File.separator + volUuid;
    String result=executeBashScript("cp " + snapshotPath + " "+ volPath);
    if (result != null) {
      return new CreateVolumeFromSnapshotAnswer(cmd,false,result,null);
    }
    return new CreateVolumeFromSnapshotAnswer(cmd,true,"",volPath);
  }
 catch (  LibvirtException e) {
    return new CreateVolumeFromSnapshotAnswer(cmd,false,e.toString(),null);
  }
catch (  URISyntaxException e) {
    return new CreateVolumeFromSnapshotAnswer(cmd,false,e.toString(),null);
  }
 finally {
  }
}
