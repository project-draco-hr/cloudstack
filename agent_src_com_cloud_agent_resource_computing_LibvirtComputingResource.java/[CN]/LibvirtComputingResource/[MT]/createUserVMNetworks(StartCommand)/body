{
  List<InterfaceDef> nics=new ArrayList<InterfaceDef>();
  InterfaceDef.nicModel nicModel=getGuestNicModel(cmd.getGuestOSDescription());
  String guestMac=cmd.getGuestMacAddress();
  String brName;
  InterfaceDef pubNic=new InterfaceDef();
  if (cmd.getGuestIpAddress() == null) {
    brName=_privBridgeName;
    pubNic.setHostNetType(hostNicType.DIRECT_ATTACHED_WITHOUT_DHCP);
  }
 else   if ("untagged".equalsIgnoreCase(cmd.getGuestNetworkId())) {
    brName=_privBridgeName;
    pubNic.setHostNetType(hostNicType.DIRECT_ATTACHED_WITH_DHCP);
  }
 else {
    String vnetId=getVnetId(cmd.getGuestNetworkId());
    brName=setVnetBrName(vnetId);
    createVnet(vnetId,_pifs.first());
    pubNic.setHostNetType(hostNicType.VLAN);
  }
  pubNic.defBridgeNet(brName,null,guestMac,nicModel);
  nics.add(pubNic);
  return nics;
}
