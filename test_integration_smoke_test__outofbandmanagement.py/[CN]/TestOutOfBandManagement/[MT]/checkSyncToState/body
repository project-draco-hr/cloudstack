def checkSyncToState(self, state, interval):

    def checkForStateSync(expectedState):
        response = self.getHost(hostId=self.getHost().id).outofbandmanagement
        return ((response.powerstate == expectedState), None)
    sync_interval = (1 + (int(interval) / 1000))
    (res, _) = wait_until(sync_interval, 10, checkForStateSync, state)
    if (not res):
        self.fail(('Failed to get host.powerstate synced to expected state:' + state))
    response = self.getHost(hostId=self.getHost().id).outofbandmanagement
    self.assertEqual(response.powerstate, state)
