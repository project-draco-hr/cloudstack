{
  _name=name;
  ComponentLocator locator=ComponentLocator.getCurrentLocator();
  ConfigurationDao configDao=locator.getDao(ConfigurationDao.class);
  Map<String,String> params=configDao.getConfiguration(xmlParams);
  _retry=NumbersUtil.parseInt(params.get(Config.StartRetry.key()),10);
  ReservationContextImpl.setComponents(_userDao,_domainDao,_accountDao);
  VirtualMachineProfileImpl.setComponents(_offeringDao,_templateDao,_accountDao);
  Adapters<HypervisorGuru> hvGurus=locator.getAdapters(HypervisorGuru.class);
  for (  HypervisorGuru guru : hvGurus) {
    _hvGurus.put(guru.getHypervisorType(),guru);
  }
  _nodeId=_clusterMgr.getId();
  _clusterMgr.registerListener(this);
  setStateMachine();
  return true;
}
