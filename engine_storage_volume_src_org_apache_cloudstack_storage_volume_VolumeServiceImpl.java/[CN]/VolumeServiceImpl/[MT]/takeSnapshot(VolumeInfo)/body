{
  VolumeObject vol=(VolumeObject)volume;
  vol.stateTransit(Volume.Event.SnapshotRequested);
  SnapshotInfo snapshot=null;
  try {
    snapshot=this.snapshotMgr.takeSnapshot(volume);
  }
 catch (  Exception e) {
    s_logger.debug("Take snapshot: " + volume.getId() + " failed: "+ e.toString());
  }
 finally {
    if (snapshot != null) {
      vol.stateTransit(Volume.Event.OperationSucceeded);
    }
 else {
      vol.stateTransit(Volume.Event.OperationFailed);
    }
  }
  return snapshot;
}
