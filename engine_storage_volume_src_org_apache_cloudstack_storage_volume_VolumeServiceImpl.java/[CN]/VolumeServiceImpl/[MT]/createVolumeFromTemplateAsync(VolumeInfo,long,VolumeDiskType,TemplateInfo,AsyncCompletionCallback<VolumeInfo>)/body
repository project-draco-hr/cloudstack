{
  PrimaryDataStore pd=dataStoreMgr.getPrimaryDataStore(dataStoreId);
  TemplateOnPrimaryDataStoreInfo templateOnPrimaryStore=pd.getTemplate(template);
  if (templateOnPrimaryStore == null) {
    AsyncCallbackDispatcher caller=new AsyncCallbackDispatcher(this).setParentCallback(callback).setOperationName("volumeservice.createbaseimage.callback").setContextParam("volume",volume).setContextParam("primary",pd);
    createBaseImageAsync(pd,template,caller);
    return;
  }
  AsyncCallbackDispatcher caller=new AsyncCallbackDispatcher(this).setParentCallback(callback).setOperationName("volumeservice.createvolumefrombaseimage.callback");
  createVolumeFromBaseImageAsync(volume,templateOnPrimaryStore,pd,caller);
}
