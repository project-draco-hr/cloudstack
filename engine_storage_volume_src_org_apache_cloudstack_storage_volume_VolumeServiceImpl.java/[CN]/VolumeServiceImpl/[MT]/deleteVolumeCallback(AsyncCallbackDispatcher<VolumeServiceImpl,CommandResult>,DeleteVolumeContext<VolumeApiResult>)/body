{
  CommandResult result=callback.getResult();
  VolumeObject vo=context.getVolume();
  VolumeApiResult apiResult=new VolumeApiResult(vo);
  if (result.isSuccess()) {
    vo.processEvent(Event.OperationSuccessed);
    if (canVolumeBeRemoved(vo.getId())) {
      s_logger.info("Volume " + vo.getId() + " is not referred anywhere, remove it from volumes table");
      volDao.remove(vo.getId());
    }
  }
 else {
    vo.processEvent(Event.OperationFailed);
    apiResult.setResult(result.getResult());
  }
  context.getFuture().complete(apiResult);
  return null;
}
