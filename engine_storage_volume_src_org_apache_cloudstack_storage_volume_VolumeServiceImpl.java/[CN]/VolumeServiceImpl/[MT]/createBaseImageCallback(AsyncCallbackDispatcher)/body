{
  CommandResult result=callback.getResult();
  TemplateOnPrimaryDataStoreObject templateOnPrimaryStoreObj=callback.getContextParam("templateOnPrimary");
  if (result.isSuccess()) {
    templateOnPrimaryStoreObj.updateStatus(Status.DOWNLOADED);
    templateOnPrimaryStoreObj.stateTransit(TemplateOnPrimaryDataStoreStateMachine.Event.OperationSuccessed);
  }
 else {
    templateOnPrimaryStoreObj.updateStatus(Status.ABANDONED);
    templateOnPrimaryStoreObj.stateTransit(TemplateOnPrimaryDataStoreStateMachine.Event.OperationFailed);
  }
  AsyncCallbackDispatcher parentCaller=callback.getParentCallback();
  VolumeInfo volume=parentCaller.getContextParam("volume");
  PrimaryDataStore pd=parentCaller.getContextParam("primary");
  AsyncCallbackDispatcher caller=new AsyncCallbackDispatcher(this).setParentCallback(parentCaller).setOperationName("volumeservice.createvolumefrombaseimage.callback");
  createVolumeFromBaseImageAsync(volume,templateOnPrimaryStoreObj,pd,caller);
}
