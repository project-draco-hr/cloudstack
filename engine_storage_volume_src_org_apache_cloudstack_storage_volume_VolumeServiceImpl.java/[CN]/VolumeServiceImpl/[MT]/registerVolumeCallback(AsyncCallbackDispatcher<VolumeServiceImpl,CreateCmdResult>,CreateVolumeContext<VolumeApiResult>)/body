{
  CreateCmdResult result=callback.getResult();
  try {
    VolumeObject vo=(VolumeObject)context.volume;
    if (result.isFailed()) {
      vo.processEvent(Event.OperationFailed);
    }
 else {
      vo.processEvent(Event.OperationSuccessed,result.getAnswer());
    }
    _resourceLimitMgr.incrementResourceCount(vo.getAccountId(),ResourceType.secondary_storage,vo.getSize());
    VolumeApiResult res=new VolumeApiResult(vo);
    context.future.complete(res);
    return null;
  }
 catch (  Exception e) {
    s_logger.error("register volume failed: ",e);
    VolumeApiResult res=new VolumeApiResult(null);
    context.future.complete(res);
    return null;
  }
}
