{
  VolumeInfo srcVolume=context.srcVolume;
  VolumeInfo destVolume=context.destVolume;
  CopyCommandResult result=callback.getResult();
  AsyncCallFuture<VolumeApiResult> future=context.future;
  VolumeApiResult res=new VolumeApiResult(destVolume);
  try {
    if (res.isFailed()) {
      destVolume.processEvent(Event.OperationFailed);
      srcVolume.processEvent(Event.OperationFailed);
      res.setResult(result.getResult());
      future.complete(res);
      return null;
    }
    srcVolume.processEvent(Event.OperationSuccessed);
    destVolume.processEvent(Event.OperationSuccessed,result.getAnswer());
    srcVolume.getDataStore().delete(srcVolume);
    future.complete(res);
  }
 catch (  Exception e) {
    res.setResult(e.toString());
    future.complete(res);
  }
  return null;
}
