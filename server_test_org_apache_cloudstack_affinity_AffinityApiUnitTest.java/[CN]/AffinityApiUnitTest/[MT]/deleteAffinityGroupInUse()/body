{
  List<AffinityGroupVMMapVO> affinityGroupVmMap=new ArrayList<AffinityGroupVMMapVO>();
  AffinityGroupVMMapVO mapVO=new AffinityGroupVMMapVO(20L,10L);
  affinityGroupVmMap.add(mapVO);
  when(_affinityGroupVMMapDao.listByAffinityGroup(20L)).thenReturn(affinityGroupVmMap);
  AffinityGroupVO groupVO=new AffinityGroupVO();
  when(_groupDao.findById(20L)).thenReturn(groupVO);
  when(_groupDao.lockRow(20L,true)).thenReturn(groupVO);
  _affinityService.deleteAffinityGroup(20L,"user",domainId,null);
}
