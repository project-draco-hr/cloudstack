{
  PatternLayout layout=new PatternLayout("%m\n");
  RollingFileAppender rfa=new RollingFileAppender();
  rfa.setAppend(false);
  rfa.setLayout(layout);
  FixedWindowRollingPolicy fwrp=new FixedWindowRollingPolicy();
  SizeBasedTriggeringPolicy sbtp=new SizeBasedTriggeringPolicy();
  sbtp.setMaxFileSize(100);
  fwrp.setMinIndex(0);
  rfa.setFile("sbr-test3.log");
  fwrp.setFileNamePattern("sbr-test3.%i.gz");
  fwrp.activateOptions();
  rfa.setRollingPolicy(fwrp);
  rfa.setTriggeringPolicy(sbtp);
  rfa.activateOptions();
  root.addAppender(rfa);
  for (int i=0; i < 25; i++) {
    Thread.sleep(100);
    if (i < 10) {
      logger.debug("Hello---" + i);
    }
 else     if (i < 100) {
      logger.debug("Hello--" + i);
    }
  }
  assertTrue(new File("sbr-test3.log").exists());
  assertTrue(new File("sbr-test3.0.gz").exists());
  assertTrue(new File("sbr-test3.1.gz").exists());
  assertTrue(Compare.compare(SizeBasedRollingTest.class,"sbr-test3.log","witness/rolling/sbr-test3.log"));
  assertTrue(Compare.gzCompare(SizeBasedRollingTest.class,"sbr-test3.0.gz","witness/rolling/sbr-test3.0.gz"));
  assertTrue(Compare.gzCompare(SizeBasedRollingTest.class,"sbr-test3.1.gz","witness/rolling/sbr-test3.1.gz"));
}
