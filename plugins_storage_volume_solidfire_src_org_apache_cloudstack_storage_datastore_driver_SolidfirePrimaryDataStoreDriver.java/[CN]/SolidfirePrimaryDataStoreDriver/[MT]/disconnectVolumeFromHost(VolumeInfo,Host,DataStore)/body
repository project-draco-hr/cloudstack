{
  if (volumeInfo == null || host == null || dataStore == null) {
    return;
  }
  long sfVolumeId=Long.parseLong(volumeInfo.getFolder());
  long clusterId=host.getClusterId();
  long storagePoolId=dataStore.getId();
  ClusterDetailsVO clusterDetail=_clusterDetailsDao.findDetail(clusterId,getVagKey(storagePoolId));
  String vagId=clusterDetail != null ? clusterDetail.getValue() : null;
  if (vagId != null) {
    List<HostVO> hosts=_hostDao.findByClusterId(clusterId);
    SolidFireConnection sfConnection=getSolidFireConnection(storagePoolId);
    SolidFireUtil.SolidFireVag sfVag=SolidFireUtil.getSolidFireVag(sfConnection.getManagementVip(),sfConnection.getManagementPort(),sfConnection.getClusterAdminUsername(),sfConnection.getClusterAdminPassword(),Long.parseLong(vagId));
    long[] volumeIds=getNewVolumeIds(sfVag.getVolumeIds(),sfVolumeId,false);
    SolidFireUtil.modifySolidFireVag(sfConnection.getManagementVip(),sfConnection.getManagementPort(),sfConnection.getClusterAdminUsername(),sfConnection.getClusterAdminPassword(),sfVag.getId(),getIqnsFromHosts(hosts),volumeIds);
  }
}
