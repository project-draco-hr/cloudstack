{
  final String luName=appliance.getVolumeName("volume1");
  final String targetGroupName=NexentaStorAppliance.getTargetGroupName("volume1");
  final MappingEntry mappingEntry=new MappingEntry(targetGroupName,"0");
  appliance.addLuMappingEntry(luName,targetGroupName);
  verify(client).execute(AddMappingEntryNmsResponse.class,"scsidisk","add_lun_mapping_entry",luName,mappingEntry);
  String error=String.format(ADD_LUN_MAPPING_ENTRY_ERROR,luName);
  when(client.execute(AddMappingEntryNmsResponse.class,"scsidisk","add_lun_mapping_entry",luName,mappingEntry)).thenThrow(new CloudRuntimeException(error));
  appliance.addLuMappingEntry(luName,targetGroupName);
}
