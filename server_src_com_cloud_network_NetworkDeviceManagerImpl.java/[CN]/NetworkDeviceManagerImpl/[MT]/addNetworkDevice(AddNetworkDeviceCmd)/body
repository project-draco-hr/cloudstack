{
  Map paramList=cmd.getParamList();
  if (paramList == null) {
    throw new CloudRuntimeException("Parameter list is null");
  }
  Collection paramsCollection=paramList.values();
  HashMap params=(HashMap)(paramsCollection.toArray())[0];
  if (cmd.getType().equalsIgnoreCase(NetworkDeviceType.ExternalDhcp.getName())) {
    Long zoneId=Long.parseLong((String)params.get(ApiConstants.ZONE_ID));
    Long podId=Long.parseLong((String)params.get(ApiConstants.POD_ID));
    String type=(String)params.get(ApiConstants.DHCP_SERVER_TYPE);
    String url=(String)params.get(ApiConstants.URL);
    String username=(String)params.get(ApiConstants.USERNAME);
    String password=(String)params.get(ApiConstants.PASSWORD);
    return _dhcpMgr.addDhcpServer(zoneId,podId,type,url,username,password);
  }
 else   if (cmd.getType().equalsIgnoreCase(NetworkDeviceType.PxeServer.getName())) {
    Long zoneId=Long.parseLong((String)params.get(ApiConstants.ZONE_ID));
    Long podId=Long.parseLong((String)params.get(ApiConstants.POD_ID));
    String type=(String)params.get(ApiConstants.PXE_SERVER_TYPE);
    String url=(String)params.get(ApiConstants.URL);
    String username=(String)params.get(ApiConstants.USERNAME);
    String password=(String)params.get(ApiConstants.PASSWORD);
    String pingStorageServerIp=(String)params.get(ApiConstants.PING_STORAGE_SERVER_IP);
    String pingDir=(String)params.get(ApiConstants.PING_DIR);
    String tftpDir=(String)params.get(ApiConstants.TFTP_DIR);
    String pingCifsUsername=(String)params.get(ApiConstants.PING_CIFS_USERNAME);
    String pingCifsPassword=(String)params.get(ApiConstants.PING_CIFS_PASSWORD);
    PxeServerProfile profile=new PxeServerProfile(zoneId,podId,url,username,password,type,pingStorageServerIp,pingDir,tftpDir,pingCifsUsername,pingCifsPassword);
    return _pxeMgr.addPxeServer(profile);
  }
 else   if (cmd.getType().equalsIgnoreCase(NetworkDeviceType.JuniperSRXFirewall.getName())) {
    Long zoneId=Long.parseLong((String)params.get(ApiConstants.ZONE_ID));
    Long networkId=(params.get(ApiConstants.NETWORK_ID) == null) ? Long.parseLong((String)params.get(ApiConstants.NETWORK_ID)) : null;
    return _externalNetworkDeviceMgr.addExternalFirewall(zoneId,networkId,NetworkDeviceType.JuniperSRXFirewall.getName(),cmd.getParamList());
  }
 else   if (cmd.getType().equalsIgnoreCase(NetworkDeviceType.NetscalerLoadBalancer.getName())) {
    Long zoneId=Long.parseLong((String)params.get(ApiConstants.ZONE_ID));
    return _externalNetworkDeviceMgr.addExternalLoadBalancer(zoneId,null,NetworkDeviceType.NetscalerLoadBalancer.getName(),cmd.getParamList());
  }
 else   if (cmd.getType().equalsIgnoreCase(NetworkDeviceType.F5BigIpLoadBalancer.getName())) {
    Long zoneId=Long.parseLong((String)params.get(ApiConstants.ZONE_ID));
    return _externalNetworkDeviceMgr.addExternalLoadBalancer(zoneId,null,NetworkDeviceType.F5BigIpLoadBalancer.getName(),cmd.getParamList());
  }
 else {
    throw new CloudRuntimeException("Unsupported network device type:" + cmd.getType());
  }
}
