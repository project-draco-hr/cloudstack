{
  String errMsg=null;
  try {
    if (destData.getType() == DataObjectType.VOLUME && srcData.getType() == DataObjectType.VOLUME && srcData.getDataStore().getRole() == DataStoreRole.Image) {
      errMsg=copyVolumeFromImage(srcData,destData);
    }
 else     if (destData.getType() == DataObjectType.TEMPLATE && srcData.getType() == DataObjectType.TEMPLATE) {
      copyTemplate(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.SNAPSHOT && destData.getType() == DataObjectType.VOLUME) {
      errMsg=copyFromSnapshot(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.SNAPSHOT && destData.getType() == DataObjectType.TEMPLATE) {
      errMsg=createTemplateFromSnashot(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.VOLUME && destData.getType() == DataObjectType.TEMPLATE) {
      errMsg=createTemplateFromVolume(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.TEMPLATE && destData.getType() == DataObjectType.VOLUME) {
      errMsg=cloneVolume(srcData,destData);
    }
 else     if (destData.getType() == DataObjectType.VOLUME && srcData.getType() == DataObjectType.VOLUME && srcData.getDataStore().getRole() == DataStoreRole.Primary) {
      errMsg=copyVolumeBetweenPools(srcData,destData);
    }
  }
 catch (  Exception e) {
    s_logger.debug("copy failed",e);
    errMsg=e.toString();
  }
  CopyCommandResult result=new CopyCommandResult(null);
  result.setResult(errMsg);
  callback.complete(result);
  return null;
}
