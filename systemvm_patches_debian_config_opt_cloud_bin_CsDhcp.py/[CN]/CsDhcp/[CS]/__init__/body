def __init__(self, dbag, cl):
    dnsmasq = CsDnsMasq()
    for item in dbag:
        if (item == 'id'):
            continue
        dnsmasq.add(dbag[item])
    dnsmasqb4 = CsDnsMasq(NO_PRELOAD)
    dnsmasqb4.parse_hosts()
    dnsmasqb4.parse_dnsmasq()
    if (not dnsmasq.compare_hosts(dnsmasqb4)):
        dnsmasq.write_hosts()
    else:
        logging.debug('Hosts file is up to date')
    diff = dnsmasq.compare_dnsmasq(dnsmasqb4)
    if (len(diff) > 0):
        self.updated = True
        dnsmasq.delete_leases(diff)
        dnsmasq.write_dnsmasq()
    dnsmasq.configure_server()
