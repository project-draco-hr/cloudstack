def configure_server(self):
    self.updated = (self.updated or CsHelper.addifmissing(CLOUD_CONF, 'dhcp-hostsfile=/etc/dhcphosts.txt'))
    self.updated = (self.updated or CsHelper.addifmissing(DNSMASQ_CONF, ('dhcp-optsfile=%s:' % DHCP_OPTS)))
    for i in self.devinfo:
        if (not i['dnsmasq']):
            continue
        device = i['dev']
        ip = i['ip'].split('/')[0]
        line = ('dhcp-range=interface:%s,set:interface-%s,%s,static' % (device, device, ip))
        self.updated = (self.updated or CsHelper.addifmissing(CLOUD_CONF, line))
        gn = CsGuestNetwork(device)
        line = ('dhcp-option=tag:interface-%s,15,%s' % (device, gn.get_domain()))
        self.updated = (self.updated or CsHelper.addifmissing(CLOUD_CONF, line))
    if self.updated:
        CsHelper.hup_dnsmasq('dnsmasq', 'dnsmasq')
