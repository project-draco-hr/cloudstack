{
  File currentFile=new File(fnameField.getText());
  FileDialog fd=new FileDialog(this,"Save next session as...",FileDialog.SAVE);
  fd.setDirectory(currentFile.getParent());
  fd.setVisible(true);
  if (fd.getFile() != null) {
    String newDir=fd.getDirectory();
    String sep=System.getProperty("file.separator");
    if (newDir.length() > 0) {
      if (!sep.equals(newDir.substring(newDir.length() - sep.length())))       newDir+=sep;
    }
    String newFname=newDir + fd.getFile();
    if (newFname.equals(fnameField.getText())) {
      fnameField.setText(newFname);
      return true;
    }
  }
  return false;
}
