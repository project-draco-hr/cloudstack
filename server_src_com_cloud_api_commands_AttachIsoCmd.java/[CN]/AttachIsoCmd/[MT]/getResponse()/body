{
  Boolean responseObject=(Boolean)getResponseObject();
  if (responseObject != null && responseObject != false) {
    IsoVmResponse response=new IsoVmResponse();
    VMTemplateVO iso=ApiDBUtils.findTemplateById(id);
    VMInstanceVO vmInstance=ApiDBUtils.findVMInstanceById(virtualMachineId);
    response.setId(id);
    response.setName(iso.getName());
    response.setDisplayText(iso.getDisplayText());
    response.setOsTypeId(iso.getGuestOSId());
    response.setOsTypeName(ApiDBUtils.findGuestOSById(iso.getGuestOSId()).getName());
    response.setVirtualMachineId(virtualMachineId);
    response.setVirtualMachineName(vmInstance.getHostName());
    response.setVirtualMachineState(vmInstance.getState().toString());
    response.setResponseName("iso");
    return response;
  }
 else {
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"Failed to attach iso");
  }
}
