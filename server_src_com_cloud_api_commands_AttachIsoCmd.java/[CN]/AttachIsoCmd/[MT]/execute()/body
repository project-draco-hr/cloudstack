{
  boolean result=_templateMgr.attachIso(this);
  if (result) {
    IsoVmResponse response=new IsoVmResponse();
    VMTemplateVO iso=ApiDBUtils.findTemplateById(id);
    VMInstanceVO vmInstance=ApiDBUtils.findVMInstanceById(virtualMachineId);
    response.setId(id);
    response.setName(iso.getName());
    response.setDisplayText(iso.getDisplayText());
    response.setOsTypeId(iso.getGuestOSId());
    response.setOsTypeName(ApiDBUtils.findGuestOSById(iso.getGuestOSId()).getName());
    response.setVirtualMachineId(virtualMachineId);
    response.setVirtualMachineName(vmInstance.getHostName());
    response.setVirtualMachineState(vmInstance.getState().toString());
    response.setResponseName(getName());
    response.setObjectName("iso");
    this.setResponseObject(response);
  }
 else {
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"Failed to attach iso");
  }
}
