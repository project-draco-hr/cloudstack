def process(self):
    self.hosts = {}
    self.changed = []
    self.devinfo = CsHelper.get_device_info()
    self.preseed()
    self.cloud = CsFile(DHCP_HOSTS)
    self.conf = CsFile(CLOUD_CONF)
    length = len(self.conf)
    for item in self.dbag:
        if (item == 'id'):
            continue
        self.add(self.dbag[item])
    self.write_hosts()
    if self.cloud.is_changed():
        self.delete_leases()
    self.configure_server()
    self.conf.commit()
    self.cloud.commit()
    if self.conf.is_changed():
        CsHelper.service('dnsmasq', 'restart')
    elif self.cloud.is_changed():
        CsHelper.hup_dnsmasq('dnsmasq', 'dnsmasq')
