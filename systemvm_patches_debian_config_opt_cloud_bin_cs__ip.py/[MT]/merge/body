def merge(dbag, ip):
    added = False
    for mac in dbag:
        if (mac == 'id'):
            continue
        for address in dbag[mac]:
            if (address['publicIp'] == ip['publicIp']):
                dbag[mac].remove(address)
    if ip['add']:
        dbag.setdefault(('eth' + str(ip['nicDevId'])), []).append(ip)
    return dbag
