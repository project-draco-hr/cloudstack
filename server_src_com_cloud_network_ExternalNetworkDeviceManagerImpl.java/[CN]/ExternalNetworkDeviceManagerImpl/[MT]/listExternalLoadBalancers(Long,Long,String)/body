{
  List<Host> lbHosts=new ArrayList<Host>();
  List<Host> lbHostsInZone=new ArrayList<Host>();
  NetworkDevice lbNetworkDevice=NetworkDevice.getNetworkDevice(deviceName);
  PhysicalNetworkVO pNetwork=null;
  if (((zoneId == null) && (physicalNetworkId == null)) || (lbNetworkDevice == null)) {
    throw new InvalidParameterValueException("Atleast one of the required parameter zone Id, physical networkId, device name is missing or invalid.");
  }
  if (physicalNetworkId != null) {
    pNetwork=_physicalNetworkDao.findById(physicalNetworkId);
    if (pNetwork == null) {
      throw new InvalidParameterValueException("Could not find phyical network with ID: " + physicalNetworkId);
    }
  }
  if (zoneId != null) {
    if (_dcDao.findById(zoneId) == null) {
      throw new InvalidParameterValueException("Could not find zone with ID: " + zoneId);
    }
    lbHostsInZone.addAll(_resourceMgr.listAllHostsInOneZoneByType(Host.Type.ExternalLoadBalancer,zoneId));
  }
  if (physicalNetworkId == null) {
    return lbHostsInZone;
  }
  PhysicalNetworkServiceProviderVO ntwkSvcProvider=_physicalNetworkServiceProviderDao.findByServiceProvider(pNetwork.getId(),lbNetworkDevice.getNetworkServiceProvder());
  if (ntwkSvcProvider == null) {
    return null;
  }
  List<ExternalLoadBalancerDeviceVO> lbDevices=_externalLoadBalancerDeviceDao.listByPhysicalNetworkServiceProvider(physicalNetworkId,ntwkSvcProvider.getProviderName());
  for (  ExternalLoadBalancerDeviceVO provderInstance : lbDevices) {
    lbHosts.add(_hostDao.findById(provderInstance.getHostId()));
  }
  return lbHosts;
}
