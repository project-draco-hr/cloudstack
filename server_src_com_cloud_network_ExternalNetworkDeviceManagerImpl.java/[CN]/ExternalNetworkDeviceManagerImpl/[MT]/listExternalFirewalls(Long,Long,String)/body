{
  List<Host> firewallHosts=new ArrayList<Host>();
  List<Host> firewallhostsInZone=new ArrayList<Host>();
  NetworkDevice ntwkDevice=NetworkDevice.getNetworkDevice(deviceName);
  PhysicalNetworkVO pNetwork=null;
  if (((zoneId == null) && (physicalNetworkId == null)) || (ntwkDevice == null)) {
    throw new InvalidParameterValueException("Atleast one of ther required parameter zone Id, physical networkId, device name is missing or invalid.");
  }
  if (physicalNetworkId != null) {
    pNetwork=_physicalNetworkDao.findById(physicalNetworkId);
    if (pNetwork == null) {
      throw new InvalidParameterValueException("Could not find phyical network with ID: " + physicalNetworkId);
    }
  }
  if (zoneId != null) {
    if (_dcDao.findById(zoneId) == null) {
      throw new InvalidParameterValueException("Could not find zone with ID: " + zoneId);
    }
    firewallhostsInZone.addAll(_hostDao.listByTypeDataCenter(Host.Type.ExternalFirewall,zoneId));
  }
  if (physicalNetworkId == null) {
    return firewallhostsInZone;
  }
  PhysicalNetworkServiceProviderVO ntwkSvcProider=_physicalNetworkServiceProviderDao.findByServiceProvider(pNetwork.getId(),ntwkDevice.getNetworkServiceProvder());
  if (ntwkSvcProider == null) {
    return null;
  }
  List<PhysicalNetworkExternalDeviceVO> providerInstances=_physicalNetworkExternalDeviceDao.listByNetworkServiceProviderId(ntwkSvcProider.getId());
  for (  PhysicalNetworkExternalDeviceVO provderInstance : providerInstances) {
    firewallHosts.add(_hostDao.findById(provderInstance.getHostId()));
  }
  return firewallHosts;
}
