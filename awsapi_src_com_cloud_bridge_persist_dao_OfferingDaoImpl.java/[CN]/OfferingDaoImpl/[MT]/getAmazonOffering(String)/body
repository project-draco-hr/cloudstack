{
  SearchBuilder<OfferingBundleVO> searchByAmazon=createSearchBuilder();
  searchByAmazon.and("CloudStackOffering",searchByAmazon.entity().getAmazonOffering(),SearchCriteria.Op.EQ);
  searchByAmazon.done();
  TransactionLegacy txn=TransactionLegacy.open(TransactionLegacy.AWSAPI_DB);
  try {
    txn.start();
    SearchCriteria<OfferingBundleVO> sc=searchByAmazon.create();
    sc.setParameters("CloudStackOffering",cloudStackOffering);
    return findOneBy(sc).getAmazonOffering();
  }
  finally {
    txn.commit();
    txn.close();
  }
}
