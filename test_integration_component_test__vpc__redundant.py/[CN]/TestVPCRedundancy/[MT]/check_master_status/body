def check_master_status(self, count=2, showall=False):
    vals = ['MASTER', 'BACKUP', 'UNKNOWN']
    cnts = [0, 0, 0]
    self.query_routers(count, showall)
    for router in self.routers:
        cnts[vals.index(router.redundantstate)] += 1
    if (cnts[vals.index('MASTER')] != 1):
        self.fail(('No Master or too many master routers found %s' % cnts[vals.index('MASTER')]))
