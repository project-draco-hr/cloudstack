{
  ListVmIdByAffinityGroup=createSearchBuilder(Long.class);
  ListVmIdByAffinityGroup.and("affinityGroupId",ListVmIdByAffinityGroup.entity().getAffinityGroupId(),SearchCriteria.Op.EQ);
  ListVmIdByAffinityGroup.selectField(ListVmIdByAffinityGroup.entity().getInstanceId());
  ListVmIdByAffinityGroup.done();
  ListByAffinityGroup=createSearchBuilder();
  ListByAffinityGroup.and("affinityGroupId",ListByAffinityGroup.entity().getAffinityGroupId(),SearchCriteria.Op.EQ);
  ListByAffinityGroup.done();
  ListByVmId=createSearchBuilder();
  ListByVmId.and("instanceId",ListByVmId.entity().getInstanceId(),SearchCriteria.Op.EQ);
  ListByVmId.done();
  ListByVmIdGroupId=createSearchBuilder();
  ListByVmIdGroupId.and("instanceId",ListByVmIdGroupId.entity().getInstanceId(),SearchCriteria.Op.EQ);
  ListByVmIdGroupId.and("affinityGroupId",ListByVmIdGroupId.entity().getAffinityGroupId(),SearchCriteria.Op.EQ);
  ListByVmIdGroupId.done();
  CountSGForVm=createSearchBuilder(Long.class);
  CountSGForVm.select(null,Func.COUNT,null);
  CountSGForVm.and("vmId",CountSGForVm.entity().getInstanceId(),SearchCriteria.Op.EQ);
  CountSGForVm.done();
}
