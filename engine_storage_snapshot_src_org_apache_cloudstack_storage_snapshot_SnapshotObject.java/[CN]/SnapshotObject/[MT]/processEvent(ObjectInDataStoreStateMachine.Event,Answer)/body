{
  SnapshotDataStoreVO snapshotStore=this.snapshotStoreDao.findByStoreSnapshot(this.getDataStore().getRole(),this.getDataStore().getId(),this.getId());
  if (answer instanceof CreateObjectAnswer) {
    SnapshotObjectTO snapshotTO=(SnapshotObjectTO)((CreateObjectAnswer)answer).getData();
    snapshotStore.setInstallPath(snapshotTO.getPath());
    this.snapshotStoreDao.update(snapshotStore.getId(),snapshotStore);
  }
 else   if (answer instanceof CopyCmdAnswer) {
    SnapshotObjectTO snapshotTO=(SnapshotObjectTO)((CopyCmdAnswer)answer).getNewData();
    snapshotStore.setInstallPath(snapshotTO.getPath());
    if (snapshotTO.getParentSnapshotPath() == null) {
      snapshotStore.setParentSnapshotId(0L);
    }
    this.snapshotStoreDao.update(snapshotStore.getId(),snapshotStore);
  }
 else {
    throw new CloudRuntimeException("Unknown answer: " + answer.getClass());
  }
  this.processEvent(event);
}
