{
  SearchCriteria2<SnapshotDataStoreVO,SnapshotDataStoreVO> sc=SearchCriteria2.create(SnapshotDataStoreVO.class);
  sc.addAnd(sc.getEntity().getDataStoreId(),Op.EQ,this.store.getId());
  sc.addAnd(sc.getEntity().getRole(),Op.EQ,this.store.getRole());
  sc.addAnd(sc.getEntity().getState(),Op.NIN,State.Destroying,State.Destroyed,State.Error);
  sc.addAnd(sc.getEntity().getParentSnapshotId(),Op.EQ,this.getId());
  SnapshotDataStoreVO vo=sc.find();
  if (vo == null) {
    return null;
  }
  return this.snapshotFactory.getSnapshot(vo.getId(),store);
}
