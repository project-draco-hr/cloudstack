{
  Map<String,String> configMap=new HashMap<String,String>();
  Properties preProcessedCommands=new Properties();
  for (  String configFile : configFiles) {
    File commandsFile=findConfigFile(configFile);
    if (commandsFile != null) {
      try {
        loadFromFile(preProcessedCommands,commandsFile);
      }
 catch (      FileNotFoundException fnfex) {
        InputStream stream=PropertiesUtil.openStreamFromURL(configFile);
        if (stream != null) {
          try {
            preProcessedCommands.load(stream);
          }
 catch (          IOException e) {
            s_logger.error("IO Exception, unable to find properties file:",fnfex);
          }
        }
 else {
          s_logger.error("Unable to find properites file",fnfex);
        }
      }
catch (      IOException ioe) {
        s_logger.error("IO Exception loading properties file",ioe);
      }
    }
  }
  for (  Object key : preProcessedCommands.keySet()) {
    String preProcessedCommand=preProcessedCommands.getProperty((String)key);
    int splitIndex=preProcessedCommand.lastIndexOf(";");
    String value=preProcessedCommand.substring(splitIndex + 1);
    configMap.put((String)key,value);
  }
  return configMap;
}
