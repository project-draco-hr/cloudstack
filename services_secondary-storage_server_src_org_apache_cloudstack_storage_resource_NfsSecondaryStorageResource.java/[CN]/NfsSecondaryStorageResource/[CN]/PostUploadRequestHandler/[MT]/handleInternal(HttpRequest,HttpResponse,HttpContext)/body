{
  HttpEntity entity=null;
  if (httpRequest instanceof HttpEntityEnclosingRequest) {
    entity=((HttpEntityEnclosingRequest)httpRequest).getEntity();
  }
  byte[] data;
  if (entity == null) {
    data=new byte[0];
  }
 else {
    data=EntityUtils.toByteArray(entity);
  }
  InputStream is=new ByteArrayInputStream(data);
  BufferedReader reader=new BufferedReader(new InputStreamReader(is));
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  String currentLine=reader.readLine();
  String boundary=currentLine.replace("-","");
  while (reader.ready()) {
    currentLine=reader.readLine();
    if (currentLine.contains("Content-Type: ")) {
      reader.readLine();
      String prevLine=reader.readLine();
      currentLine=reader.readLine();
      while (true) {
        if (currentLine.contains(boundary)) {
          output.write(prevLine.getBytes());
          break;
        }
 else {
          output.write(currentLine.getBytes());
        }
        prevLine=currentLine;
        currentLine=reader.readLine();
      }
    }
  }
  handleuplod(1,null,"file",output.size(),output.toByteArray());
  s_logger.error(new String(data));
  httpResponse.setEntity(new StringEntity("upload successful"));
}
