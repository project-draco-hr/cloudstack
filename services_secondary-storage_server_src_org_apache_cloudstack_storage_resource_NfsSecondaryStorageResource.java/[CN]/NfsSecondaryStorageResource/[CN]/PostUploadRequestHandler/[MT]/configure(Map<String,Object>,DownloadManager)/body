{
  _downloadMgr=dlmgr;
  String scriptsDir=(String)params.get("template.scripts.dir");
  if (scriptsDir == null) {
    scriptsDir="scripts/storage/secondary";
  }
  try {
    createTmpltScr=Script.findScript(scriptsDir,"createtmplt.sh");
    if (createTmpltScr == null) {
      throw new ConfigurationException("Unable to find createtmplt.sh");
    }
    s_logger.info("createtmplt.sh found in " + createTmpltScr);
    createVolScr=Script.findScript(scriptsDir,"createvolume.sh");
    if (createVolScr == null) {
      throw new ConfigurationException("Unable to find createvolume.sh");
    }
    s_logger.info("createvolume.sh found in " + createVolScr);
  }
 catch (  Exception e) {
    s_logger.debug("failed to configure the postupload handler " + e);
  }
  formatMap.put("qcow2",ImageFormat.QCOW2);
  formatMap.put("vhd",ImageFormat.VHD);
  formatMap.put("iso",ImageFormat.ISO);
  formatMap.put("vmdk",ImageFormat.VMDK);
  formatMap.put("tar",ImageFormat.TAR);
  formatMap.put("ova",ImageFormat.OVA);
}
