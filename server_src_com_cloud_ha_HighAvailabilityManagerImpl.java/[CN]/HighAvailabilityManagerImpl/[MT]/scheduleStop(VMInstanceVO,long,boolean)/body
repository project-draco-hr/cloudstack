{
  if (_haDao.hasBeenScheduled(vm.getId(),verifyHost ? WorkType.CheckStop : WorkType.Stop)) {
    s_logger.info("There's already a job scheduled to stop " + vm.toString());
    return;
  }
  final WorkVO work=new WorkVO(vm.getId(),vm.getType(),verifyHost ? WorkType.CheckStop : WorkType.Stop,Step.Scheduled,hostId,vm.getState(),0,vm.getUpdated());
  _haDao.persist(work);
  if (s_logger.isDebugEnabled()) {
    s_logger.debug("Scheduled " + work.toString() + " verifyHost = "+ verifyHost);
  }
  wakeupWorkers();
}
