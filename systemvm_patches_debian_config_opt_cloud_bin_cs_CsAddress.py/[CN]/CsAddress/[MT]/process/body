def process(self):
    route = CsRoute()
    found_defaultroute = False
    for dev in self.dbag:
        if (dev == 'id'):
            continue
        ip = CsIP(dev, self.config)
        for address in self.dbag[dev]:
            gateway = str(address['gateway'])
            network = str(address['network'])
            ip.setAddress(address)
            if ip.configured():
                logging.info('Address %s on device %s already configured', ip.ip(), dev)
                ip.post_configure()
            else:
                logging.info('Address %s on device %s not configured', ip.ip(), dev)
                if CsDevice(dev, self.config).waitfordevice():
                    ip.configure()
            if (address['nw_type'] != 'control'):
                route.add_route(dev, network)
            if ((address['nw_type'] == 'public') and (not found_defaultroute)):
                if (not route.defaultroute_exists()):
                    if route.add_defaultroute(gateway):
                        found_defaultroute = True
