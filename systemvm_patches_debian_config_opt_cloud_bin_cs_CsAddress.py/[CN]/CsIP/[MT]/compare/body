def compare(self, bag):
    if ((len(self.iplist) > 0) and ((not (self.dev in bag.keys())) or (len(bag[self.dev]) == 0))):
        logging.info('Will remove all configured addresses on device %s', self.dev)
        self.delete('all')
        app = CsApache(self)
        app.remove()
    if ((len(self.iplist) == 0) and ((not (self.dev in bag.keys())) or (len(bag[self.dev]) == 0))):
        app = CsApache(self)
        app.remove()
    for ip in self.iplist:
        found = False
        if (self.dev in bag.keys()):
            for address in bag[self.dev]:
                self.setAddress(address)
                if self.hasIP(ip):
                    found = True
        if (not found):
            self.delete(ip)
