{
  s_logger.debug("Checking if host_details index exists, if not we will add it");
  PreparedStatement pstmt=null;
  ResultSet rs=null;
  try {
    pstmt=conn.prepareStatement("SHOW INDEX FROM `cloud`.`host_details` where KEY_NAME = 'fk_host_details__host_id'");
    rs=pstmt.executeQuery();
    if (rs.next()) {
      s_logger.debug("Index already exists on host_details - not adding new one");
    }
 else {
      PreparedStatement pstmtUpdate=conn.prepareStatement("ALTER IGNORE TABLE `cloud`.`host_details` ADD INDEX `fk_host_details__host_id` (`host_id`)");
      pstmtUpdate.executeUpdate();
      s_logger.debug("Index did not exist on host_details -  added new one");
      pstmtUpdate.close();
    }
  }
 catch (  SQLException e) {
    throw new CloudRuntimeException("Failed to check/update the host_details index ",e);
  }
 finally {
    try {
      if (rs != null) {
        rs.close();
      }
      if (pstmt != null) {
        pstmt.close();
      }
    }
 catch (    SQLException e) {
    }
  }
}
