{
  PreparedStatement sql=null;
  PreparedStatement sql2=null;
  try {
    sql=conn.prepareStatement("update storage_pool set storage_provider_name = ? , scope = ? where pool_type = 'Filesystem' or pool_type = 'LVM'");
    sql.setString(1,DataStoreProvider.DEFAULT_PRIMARY);
    sql.setString(2,"HOST");
    sql.executeUpdate();
    sql2=conn.prepareStatement("update storage_pool set storage_provider_name = ? , scope = ? where pool_type != 'Filesystem' and pool_type != 'LVM'");
    sql2.setString(1,DataStoreProvider.DEFAULT_PRIMARY);
    sql2.setString(2,"CLUSTER");
    sql2.executeUpdate();
  }
 catch (  SQLException e) {
    throw new CloudRuntimeException("Failed to upgrade vm template data store uuid: " + e.toString());
  }
 finally {
    if (sql != null) {
      try {
        sql.close();
      }
 catch (      SQLException e) {
      }
    }
    if (sql2 != null) {
      try {
        sql2.close();
      }
 catch (      SQLException e) {
      }
    }
  }
}
