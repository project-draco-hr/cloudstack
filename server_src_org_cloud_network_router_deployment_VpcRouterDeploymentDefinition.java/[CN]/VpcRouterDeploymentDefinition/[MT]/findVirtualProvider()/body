{
  List<? extends PhysicalNetwork> pNtwks=pNtwkDao.listByZone(vpc.getZoneId());
  this.vrProvider=null;
  for (  PhysicalNetwork pNtwk : pNtwks) {
    PhysicalNetworkServiceProvider provider=physicalProviderDao.findByServiceProvider(pNtwk.getId(),Type.VPCVirtualRouter.toString());
    if (provider == null) {
      throw new CloudRuntimeException("Cannot find service provider " + Type.VPCVirtualRouter.toString() + " in physical network "+ pNtwk.getId());
    }
    this.vrProvider=vrProviderDao.findByNspIdAndType(provider.getId(),Type.VPCVirtualRouter);
    if (this.vrProvider != null) {
      break;
    }
  }
}
