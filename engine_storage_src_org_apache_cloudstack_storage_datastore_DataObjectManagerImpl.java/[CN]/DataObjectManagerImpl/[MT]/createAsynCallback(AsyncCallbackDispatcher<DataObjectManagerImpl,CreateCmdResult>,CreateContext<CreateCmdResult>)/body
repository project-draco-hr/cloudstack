{
  CreateCmdResult result=callback.getResult();
  DataObject objInStrore=context.objInStrore;
  CreateCmdResult upResult=new CreateCmdResult(null,null);
  if (result.isFailed()) {
    upResult.setResult(result.getResult());
    context.getParentCallback().complete(upResult);
    return null;
  }
  ObjectInDataStoreVO obj=objectInDataStoreMgr.findObject(objInStrore.getId(),objInStrore.getType(),objInStrore.getDataStore().getId(),objInStrore.getDataStore().getRole());
  obj.setInstallPath(result.getPath());
  obj.setSize(result.getSize());
  try {
    objectInDataStoreMgr.update(obj,ObjectInDataStoreStateMachine.Event.OperationSuccessed);
  }
 catch (  NoTransitionException e) {
    try {
      objectInDataStoreMgr.update(obj,ObjectInDataStoreStateMachine.Event.OperationFailed);
    }
 catch (    NoTransitionException e1) {
      s_logger.debug("failed to change state",e1);
    }
    upResult.setResult(e.toString());
    context.getParentCallback().complete(upResult);
    return null;
  }
  context.getParentCallback().complete(result);
  return null;
}
