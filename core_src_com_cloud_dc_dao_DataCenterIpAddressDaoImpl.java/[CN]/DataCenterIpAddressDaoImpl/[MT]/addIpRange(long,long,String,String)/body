{
  Transaction txn=Transaction.currentTxn();
  String insertSql="INSERT INTO op_dc_ip_address_alloc (ip_address, data_center_id, pod_id) VALUES (?, ?, ?)";
  PreparedStatement stmt=null;
  long startIP=NetUtils.ip2Long(start);
  long endIP=NetUtils.ip2Long(end);
  try {
    txn.start();
    stmt=txn.prepareAutoCloseStatement(insertSql);
    while (startIP <= endIP) {
      stmt.setString(1,NetUtils.long2Ip(startIP++));
      stmt.setLong(2,dcId);
      stmt.setLong(3,podId);
      stmt.addBatch();
    }
    stmt.executeBatch();
    txn.commit();
  }
 catch (  SQLException ex) {
    throw new CloudRuntimeException("Unable to persist ip address range ",ex);
  }
}
