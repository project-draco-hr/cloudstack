{
  SearchCriteria<VMTemplateVO> sc=tmpltTypeHyperSearch.create();
  sc.setParameters("templateType",Storage.TemplateType.SYSTEM);
  sc.setParameters("hypervisor_type",_defaultHyperType.toString());
  VMTemplateVO tmplt=findOneBy(sc);
  if (tmplt == null) {
    if (_defaultHyperType != HypervisorType.XenServer) {
      sc=tmpltTypeHyperSearch.create();
      sc.setParameters("templateType",Storage.TemplateType.SYSTEM);
      sc.setParameters("hypervisor_type",HypervisorType.XenServer.toString());
      tmplt=findOneBy(sc);
      if (tmplt == null) {
        sc=tmpltTypeSearch.create();
        sc.setParameters("templateType",Storage.TemplateType.SYSTEM);
        tmplt=findOneBy(sc);
      }
    }
  }
  return tmplt;
}
