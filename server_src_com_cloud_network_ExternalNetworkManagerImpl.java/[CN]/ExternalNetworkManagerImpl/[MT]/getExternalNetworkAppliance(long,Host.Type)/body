{
  DataCenterVO zone=_dcDao.findById(zoneId);
  if (!_networkMgr.zoneIsConfiguredForExternalNetworking(zoneId)) {
    s_logger.debug("Zone " + zone.getName() + " is not configured for external networking.");
    return null;
  }
 else {
    List<HostVO> externalNetworkAppliancesInZone=_resourceMgr.listAllUpAndEnabledHostsInOneZoneByType(type,zoneId);
    if (externalNetworkAppliancesInZone.size() != 1) {
      return null;
    }
 else {
      return externalNetworkAppliancesInZone.get(0);
    }
  }
}
