{
  UserVO user=_userDao.findById(userId);
  long accountIdToUse=(accountId != null) ? accountId : user.getAccountId();
  String eventParams="";
  String logParams="";
  for (int i=0; i < paramsList.length; i++) {
    String param=paramsList[i];
    boolean lastParam=(i == (paramsList.length - 1));
    logParams+=param;
    if (!lastParam) {
      logParams+=", ";
    }
    String[] valList=param.split("\\=");
    String val=(valList.length < 2) ? "null" : valList[1];
    if (val.equals("null")) {
      continue;
    }
    eventParams+=param;
    if (!lastParam) {
      eventParams+="\n";
    }
  }
  EventVO event=new EventVO();
  event.setUserId(userId);
  event.setAccountId(accountIdToUse);
  event.setType(type);
  event.setDescription(description);
  event.setLevel(EventVO.LEVEL_INFO);
  event.setParameters(eventParams);
  event=_eventDao.persist(event);
  s_logger.debug("User " + user.getUsername() + " performed configuration action: "+ type+ ", "+ description+ " | params: "+ logParams);
  return event.getId();
}
