{
  VlanVO vlan=_vlanDao.findById(vlanDbId);
  if (vlan == null) {
    throw new InvalidParameterValueException("Please specify a valid IP range id.");
  }
  if (_publicIpAddressDao.countIPs(vlan.getDataCenterId(),vlanDbId,true) > 0) {
    throw new InvalidParameterValueException("The IP range can't be deleted because it has allocated public IP addresses.");
  }
  if (_domrDao.listByVlanDbId(vlanDbId).size() > 0) {
    throw new InvalidParameterValueException("The IP range can't be deleted because it is being used by a domain router.");
  }
  if (!deletePublicIPRange(vlanDbId)) {
    return false;
  }
  return _vlanDao.expunge(vlanDbId);
}
