{
  if (staticNatServiceCapabilityMap != null && !staticNatServiceCapabilityMap.isEmpty()) {
    boolean eipEnabled=false;
    boolean associatePublicIP=true;
    for (    Capability capability : staticNatServiceCapabilityMap.keySet()) {
      String value=staticNatServiceCapabilityMap.get(capability).toLowerCase();
      if (!(value.contains("true") ^ value.contains("false"))) {
        throw new InvalidParameterValueException("Unknown specified value (" + value + ") for "+ capability);
      }
      if (capability == Capability.ElasticIp) {
        eipEnabled=value.contains("true");
      }
 else       if (capability == Capability.AssociatePublicIP) {
        associatePublicIP=value.contains("true");
      }
 else {
        throw new InvalidParameterValueException("Only " + Capability.ElasticIp.getName() + " and "+ Capability.AssociatePublicIP.getName()+ " capabilitiy can be sepcified for static nat service");
      }
    }
    if ((!eipEnabled) && associatePublicIP) {
      throw new InvalidParameterValueException("Capability " + Capability.AssociatePublicIP.getName() + " can only be set when capability "+ Capability.ElasticIp.getName()+ " is true");
    }
  }
}
