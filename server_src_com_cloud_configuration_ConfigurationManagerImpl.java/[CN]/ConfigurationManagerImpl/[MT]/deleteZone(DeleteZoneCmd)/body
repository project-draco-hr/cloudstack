{
  Long userId=UserContext.current().getCallerUserId();
  Long zoneId=cmd.getId();
  if (userId == null) {
    userId=Long.valueOf(User.UID_SYSTEM);
  }
  if (!validZone(zoneId)) {
    throw new InvalidParameterValueException("A zone with ID: " + zoneId + " does not exist.");
  }
  checkIfZoneIsDeletable(zoneId);
  DataCenterVO zone=_zoneDao.findById(zoneId);
  boolean success=_zoneDao.expunge(zoneId);
  try {
    _zoneDao.deleteVnet(zoneId);
    List<NetworkVO> networks=_networkDao.listByZone(zoneId);
    if (networks != null && !networks.isEmpty()) {
      for (      NetworkVO network : networks) {
        _networkDao.remove(network.getId());
      }
    }
  }
 catch (  Exception ex) {
    s_logger.error("Failed to delete zone " + zoneId);
    throw new CloudRuntimeException("Failed to delete zone " + zoneId);
  }
  if (success) {
    saveConfigurationEvent(userId,null,EventTypes.EVENT_ZONE_DELETE,"Successfully deleted zone with name: " + zone.getName() + ".","dcId=" + zoneId);
    return true;
  }
 else {
    return false;
  }
}
