{
  if (checkOverlapPortableIpRange(_regionDao.getRegionId(),startIP,endIP)) {
    throw new InvalidParameterValueException("Ip range: " + startIP + "-"+ endIP+ " overlaps with a portable"+ " IP range already configured in the region "+ _regionDao.getRegionId());
  }
  final List<PortableIpRangeVO> existingPortableIPRanges=_portableIpRangeDao.listByRegionId(_regionDao.getRegionId());
  if (existingPortableIPRanges != null && !existingPortableIPRanges.isEmpty()) {
    for (    final PortableIpRangeVO portableIpRange : existingPortableIPRanges) {
      if (NetUtils.isSameIsolationId(portableIpRange.getVlanTag(),vlanId)) {
        throw new InvalidParameterValueException("The VLAN tag " + vlanId + " is already being used for portable ip range in this region");
      }
    }
  }
}
