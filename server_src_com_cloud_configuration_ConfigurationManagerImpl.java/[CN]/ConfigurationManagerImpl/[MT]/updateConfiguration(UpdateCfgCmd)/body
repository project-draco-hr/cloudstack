{
  Long userId=UserContext.current().getCallerUserId();
  String name=cmd.getCfgName();
  String value=cmd.getValue();
  UserContext.current().setEventDetails(" Name: " + name + " New Value: "+ ((value == null) ? "" : value));
  ConfigurationVO config=_configDao.findByName(name);
  if (config == null) {
    throw new InvalidParameterValueException("Config parameter with name " + name + " doesn't exist");
  }
  if (value == null) {
    return _configDao.findByName(name);
  }
  updateConfiguration(userId,name,config.getCategory(),value);
  if (_configDao.getValue(name).equalsIgnoreCase(value)) {
    return _configDao.findByName(name);
  }
 else {
    throw new CloudRuntimeException("Unable to update configuration parameter " + name);
  }
}
