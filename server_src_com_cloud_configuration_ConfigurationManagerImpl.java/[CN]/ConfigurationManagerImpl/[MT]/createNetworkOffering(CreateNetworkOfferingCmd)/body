{
  Long userId=UserContext.current().getCallerUserId();
  String name=cmd.getNetworkOfferingName();
  String displayText=cmd.getDisplayText();
  String tags=cmd.getTags();
  String typeString=cmd.getType();
  String trafficTypeString=cmd.getTraffictype();
  Boolean specifyVlan=cmd.getSpecifyVlan();
  String availabilityStr=cmd.getAvailability();
  TrafficType trafficType=null;
  GuestIpType type=null;
  Availability availability=null;
  for (  TrafficType tType : TrafficType.values()) {
    if (tType.name().equalsIgnoreCase(trafficTypeString)) {
      trafficType=tType;
    }
  }
  if (trafficType == null) {
    throw new InvalidParameterValueException("Invalid value for traffictype. Supported traffic types: Public, Management, Control, Guest, Vlan or Storage");
  }
  for (  GuestIpType gType : GuestIpType.values()) {
    if (gType.name().equalsIgnoreCase(typeString)) {
      type=gType;
    }
  }
  if (type == null || type == GuestIpType.DirectPodBased) {
    throw new InvalidParameterValueException("Invalid value for type. Supported types: Virtual, Direct");
  }
  for (  Availability avlb : Availability.values()) {
    if (avlb.name().equalsIgnoreCase(availabilityStr)) {
      availability=avlb;
    }
  }
  if (availability == null) {
    throw new InvalidParameterValueException("Invalid value for Availability. Supported types: " + Availability.Required + ", "+ Availability.Optional+ ", "+ Availability.Unavailable);
  }
  Integer maxConnections=cmd.getMaxconnections();
  return createNetworkOffering(userId,name,displayText,type,trafficType,tags,maxConnections,specifyVlan,availability);
}
