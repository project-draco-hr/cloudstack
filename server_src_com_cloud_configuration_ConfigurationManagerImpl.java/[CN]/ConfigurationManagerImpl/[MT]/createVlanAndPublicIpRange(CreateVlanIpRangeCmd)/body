{
  Long zoneId=cmd.getZoneId();
  Long podId=cmd.getPodId();
  String startIP=cmd.getStartIp();
  String endIP=cmd.getEndIp();
  String vlanGateway=cmd.getGateway();
  String vlanNetmask=cmd.getNetmask();
  Long userId=UserContext.current().getUserId();
  String vlanId=cmd.getVlan();
  Boolean forVirtualNetwork=cmd.isForVirtualNetwork();
  String accountName=cmd.getAccountName();
  Long domainId=cmd.getDomainId();
  Account account=null;
  if ((accountName != null) && (domainId != null)) {
    account=_accountDao.findActiveAccount(accountName,domainId);
    if (account == null) {
      throw new ServerApiException(BaseCmd.PARAM_ERROR,"Please specify a valid account.");
    }
  }
  return createVlanAndPublicIpRange(userId,zoneId,podId,startIP,endIP,vlanGateway,vlanNetmask,forVirtualNetwork,vlanId,account,null);
}
