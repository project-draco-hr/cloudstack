{
  String multicastRateStr=_configDao.getValue("multicast.throttling.rate");
  int multicastRate=((multicastRateStr == null) ? 10 : Integer.parseInt(multicastRateStr));
  tags=cleanupTags(tags);
  boolean firewallService=false;
  boolean lbService=false;
  boolean vpnService=false;
  boolean gatewayService=false;
  if (trafficType == TrafficType.Guest) {
    firewallService=true;
    lbService=true;
    vpnService=true;
    gatewayService=true;
  }
  NetworkOfferingVO offering=new NetworkOfferingVO(name,displayText,trafficType,false,specifyVlan,networkRate,multicastRate,maxConnections,false,availability,true,true,true,gatewayService,firewallService,lbService,vpnService,guestIpType);
  if ((offering=_networkOfferingDao.persist(offering)) != null) {
    UserContext.current().setEventDetails(" Id: " + offering.getId() + " Name: "+ name);
    return offering;
  }
 else {
    return null;
  }
}
