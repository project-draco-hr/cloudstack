{
  if (event == null)   return;
  if (address == null) {
    errorHandler.error("No remote host is set for SocketAppender named \"" + this.name + "\".");
    return;
  }
  if (oos != null) {
    try {
      if (locationInfo) {
        event.getLocationInformation();
      }
      if (application != null) {
        event.setProperty("application",application);
      }
      event.getNDC();
      event.getThreadName();
      event.getMDCCopy();
      event.getRenderedMessage();
      event.getThrowableStrRep();
      oos.writeObject(event);
      oos.flush();
      if (++counter >= RESET_FREQUENCY) {
        counter=0;
        oos.reset();
      }
    }
 catch (    IOException e) {
      if (e instanceof InterruptedIOException) {
        Thread.currentThread().interrupt();
      }
      oos=null;
      LogLog.warn("Detected problem with connection: " + e);
      if (reconnectionDelay > 0) {
        fireConnector();
      }
 else {
        errorHandler.error("Detected problem with connection, not reconnecting.",e,ErrorCode.GENERIC_FAILURE);
      }
    }
  }
}
