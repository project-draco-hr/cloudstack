{
  StoragePoolVO storagePool=_storagePoolDao.findById(storagePoolId);
  VolumeVO volume=_volumeDao.findById(volumeId);
  long currentMinIops=volume.getMinIops();
  long diffInMinIops=newMinIops - currentMinIops;
  if (diffInMinIops > 0) {
    long usedIops=getUsedIops(storagePool);
    long capacityIops=storagePool.getCapacityIops();
    if (usedIops + diffInMinIops > capacityIops) {
      throw new CloudRuntimeException("Insufficient number of IOPS available in this storage pool");
    }
  }
}
