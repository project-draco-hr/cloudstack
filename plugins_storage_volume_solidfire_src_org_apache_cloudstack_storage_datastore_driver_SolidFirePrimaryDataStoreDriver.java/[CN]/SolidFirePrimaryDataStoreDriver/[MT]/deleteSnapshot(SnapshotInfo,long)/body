{
  String errMsg=null;
  try {
    SolidFireUtil.SolidFireConnection sfConnection=SolidFireUtil.getSolidFireConnection(storagePoolId,_storagePoolDetailsDao);
    SolidFireUtil.deleteSolidFireSnapshot(sfConnection,getSolidFireSnapshotId(snapshotInfo.getId()));
    _snapshotDetailsDao.removeDetails(snapshotInfo.getId());
    StoragePoolVO storagePool=_storagePoolDao.findById(storagePoolId);
    long usedBytes=getUsedBytes(storagePool);
    storagePool.setUsedBytes(usedBytes < 0 ? 0 : usedBytes);
    _storagePoolDao.update(storagePoolId,storagePool);
  }
 catch (  Exception ex) {
    s_logger.debug(SolidFireUtil.LOG_PREFIX + "Failed to delete SolidFire snapshot: " + snapshotInfo.getId(),ex);
    errMsg=ex.getMessage();
  }
  return errMsg;
}
