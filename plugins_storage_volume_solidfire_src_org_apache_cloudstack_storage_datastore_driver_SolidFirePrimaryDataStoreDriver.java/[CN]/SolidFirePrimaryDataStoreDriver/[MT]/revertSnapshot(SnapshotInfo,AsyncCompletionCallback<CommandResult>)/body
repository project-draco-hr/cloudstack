{
  String errMsg=null;
  try {
    VolumeInfo volumeInfo=snapshotInfo.getBaseVolume();
    long storagePoolId=volumeInfo.getPoolId();
    long sfVolumeId=Long.parseLong(volumeInfo.getFolder());
    long sfSnapshotId=getSolidFireSnapshotId(snapshotInfo.getId());
    SolidFireUtil.SolidFireConnection sfConnection=SolidFireUtil.getSolidFireConnection(storagePoolId,_storagePoolDetailsDao);
    SolidFireUtil.rollBackVolumeToSnapshot(sfConnection,sfVolumeId,sfSnapshotId);
  }
 catch (  Exception ex) {
    s_logger.debug(SolidFireUtil.LOG_PREFIX + "Failed to take CloudStack snapshot: " + snapshotInfo.getId(),ex);
    errMsg=ex.getMessage();
  }
  CommandResult result=new CommandResult();
  result.setResult(errMsg);
  callback.complete(result);
}
