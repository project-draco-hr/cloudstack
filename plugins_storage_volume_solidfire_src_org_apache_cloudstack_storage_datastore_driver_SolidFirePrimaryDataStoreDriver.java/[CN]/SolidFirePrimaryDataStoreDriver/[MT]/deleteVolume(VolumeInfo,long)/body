{
  try {
    long volumeId=volumeInfo.getId();
    SolidFireUtil.SolidFireConnection sfConnection=SolidFireUtil.getSolidFireConnection(storagePoolId,storagePoolDetailsDao);
    if (isBasicDelete(volumeId)) {
      performBasicDelete(sfConnection,volumeId);
    }
 else     if (isBasicDeleteFailure(volumeId)) {
      performBasicDeleteFailure(sfConnection,volumeId);
    }
 else {
      deleteSolidFireVolume(sfConnection,volumeInfo);
      volumeDetailsDao.removeDetails(volumeId);
      StoragePoolVO storagePool=storagePoolDao.findById(storagePoolId);
      long usedBytes=getUsedBytes(storagePool,volumeId);
      storagePool.setUsedBytes(usedBytes < 0 ? 0 : usedBytes);
      storagePoolDao.update(storagePoolId,storagePool);
    }
  }
 catch (  Exception ex) {
    LOGGER.debug(SolidFireUtil.LOG_PREFIX + "Failed to delete SolidFire volume. CloudStack volume ID: " + volumeInfo.getId(),ex);
    throw ex;
  }
}
