{
  try {
    SAXParserFactory spfactory=SAXParserFactory.newInstance();
    SAXParser saxParser=spfactory.newSAXParser();
    File file=PropertiesUtil.findConfigFile(filename);
    if (file == null) {
      s_logger.warn("Unable to find the config file automatically.  Now checking properties files.");
      _parentLocator=null;
      _managerMap=new HashMap<String,Info<Manager>>();
      _adapterMap=new HashMap<String,Adapters<? extends Adapter>>();
      _daoMap=new LinkedHashMap<String,Info<GenericDao<?,?>>>();
      _parentLocator=null;
      return;
    }
    s_logger.info("Config file found at " + file.getAbsolutePath() + ".  Configuring "+ _serverName);
    XmlHandler handler=new XmlHandler(_serverName);
    saxParser.parse(file,handler);
    if (handler.parent != null) {
      _parentLocator=getLocatorInternal(handler.parent,false,filename,log4jFile);
    }
    _managerMap=handler.managers;
    _daoMap=handler.daos;
    startDaos();
    createAdaptersMap(handler.adapters);
    instantiateManagers();
    instantiateAdapters(handler.adapters);
    configureManagers();
    startManagers();
    startAdapters();
  }
 catch (  ParserConfigurationException e) {
    s_logger.error("Unable to load " + _serverName + " due to errors while parsing "+ filename,e);
    System.exit(1);
  }
catch (  SAXException e) {
    s_logger.error("Unable to load " + _serverName + " due to errors while parsing "+ filename,e);
    System.exit(1);
  }
catch (  IOException e) {
    s_logger.error("Unable to load " + _serverName + " due to errors while reading from "+ filename,e);
    System.exit(1);
  }
catch (  CloudRuntimeException e) {
    s_logger.error("Unable to load configuration for " + _serverName + " from "+ filename,e);
    System.exit(1);
  }
catch (  Exception e) {
    s_logger.error("Unable to load configuration for " + _serverName + " from "+ filename,e);
    System.exit(1);
  }
}
