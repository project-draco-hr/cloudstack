{
  if (s_doOnce == false) {
    File file=PropertiesUtil.findConfigFile(log4jFile + ".xml");
    if (file != null) {
      DOMConfigurator.configureAndWatch(file.getAbsolutePath());
    }
 else {
      file=PropertiesUtil.findConfigFile(log4jFile + ".properties");
      if (file != null) {
        PropertyConfigurator.configureAndWatch(file.getAbsolutePath());
      }
    }
    s_doOnce=true;
  }
  ComponentLocator locator;
synchronized (s_locators) {
    locator=s_locators.get(server);
    if (locator == null) {
      locator=new ComponentLocator(server);
      s_locators.put(server,locator);
      if (setInThreadLocal) {
        s_tl.set(locator);
      }
      locator.parse(configFileName,log4jFile);
    }
 else {
      if (setInThreadLocal) {
        s_tl.set(locator);
      }
    }
  }
  return locator;
}
