{
  Pair<XmlHandler,HashMap<String,List<ComponentInfo<Adapter>>>> result=parse2(filename);
  if (result == null) {
    s_logger.info("Skipping configuration using " + filename);
    return;
  }
synchronized (s_interceptors) {
    s_callbacks=new Callback[s_interceptors.size() + 2];
    int i=0;
    s_callbacks[i++]=NoOp.INSTANCE;
    s_callbacks[i++]=new InterceptorDispatcher();
    for (    AnnotationInterceptor<?> interceptor : s_interceptors) {
      s_callbacks[i++]=interceptor.getCallback();
    }
    s_callbackFilter=new InterceptorFilter();
  }
  XmlHandler handler=result.first();
  HashMap<String,List<ComponentInfo<Adapter>>> adapters=result.second();
  try {
    startDaos();
    instantiateAdapters(adapters);
    instantiateManagers();
    if (handler.componentClass != null) {
      _component=createInstance(handler.componentClass,true,true);
    }
    configureManagers();
    configureAdapters();
    startManagers();
    startAdapters();
  }
 catch (  CloudRuntimeException e) {
    s_logger.error("Unable to load configuration for " + _serverName + " from "+ filename,e);
    System.exit(1);
  }
catch (  Exception e) {
    s_logger.error("Unable to load configuration for " + _serverName + " from "+ filename,e);
    System.exit(1);
  }
}
