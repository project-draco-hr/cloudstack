def end(self):
    width = 0
    lastwidth = 0
    lastbreak = None
    for x in self.content:
        if isinstance(x, PrettyBreak):
            if lastbreak:
                lastbreak.space = (width - lastwidth)
            lastbreak = x
            lastwidth = width
        width += x.get_width()
    if lastbreak:
        lastbreak.space = (width - lastwidth)
    self.width = width
