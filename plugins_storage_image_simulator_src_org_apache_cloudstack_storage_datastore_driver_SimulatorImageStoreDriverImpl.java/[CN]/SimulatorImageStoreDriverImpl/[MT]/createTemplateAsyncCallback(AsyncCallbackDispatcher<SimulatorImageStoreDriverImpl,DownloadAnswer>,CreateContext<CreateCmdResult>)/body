{
  DataObject obj=context.data;
  DataStore store=obj.getDataStore();
  TemplateObjectTO templateTO=(TemplateObjectTO)context.data.getTO();
  TemplateDataStoreVO tmpltStoreVO=_templateStoreDao.findByStoreTemplate(store.getId(),obj.getId());
  if (tmpltStoreVO != null) {
    TemplateDataStoreVO updateBuilder=_templateStoreDao.createForUpdate();
    updateBuilder.setDownloadPercent(100);
    updateBuilder.setDownloadState(VMTemplateStorageResourceAssoc.Status.DOWNLOADED);
    updateBuilder.setLastUpdated(new Date());
    updateBuilder.setSize(new Long(5 * 1024L * 1024L));
    updateBuilder.setPhysicalSize(new Long(5 * 1024L * 1024L));
    updateBuilder.setDownloadUrl(templateTO.getOrigUrl());
    updateBuilder.setInstallPath(templateTO.getPath());
    updateBuilder.setTemplateId(templateTO.getId());
    updateBuilder.setState(ObjectInDataStoreStateMachine.State.Ready);
    _templateStoreDao.update(tmpltStoreVO.getId(),updateBuilder);
    VMTemplateVO tmlptUpdater=_templateDao.createForUpdate();
    tmlptUpdater.setSize(new Long(5 * 1024l * 1024l));
    _templateDao.update(obj.getId(),tmlptUpdater);
  }
  return null;
}
