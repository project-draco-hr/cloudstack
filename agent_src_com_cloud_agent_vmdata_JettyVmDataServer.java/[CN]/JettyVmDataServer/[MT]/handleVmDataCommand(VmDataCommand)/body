{
  String vmDataDir=_vmDataDir + File.separator + cmd.getVmName();
  try {
    _fs.cleanup(vmDataDir,_vmDataDir);
    _fs.mkdirs(vmDataDir);
  }
 catch (  IOException e1) {
    s_logger.warn("Failed to cleanup vm data dir " + vmDataDir,e1);
    return new Answer(cmd,false,"Failed to cleanup or create directory " + vmDataDir);
  }
  for (  String[] item : cmd.getVmData()) {
    try {
      _fs.create(vmDataDir,item[1]);
      String vmDataFile=vmDataDir + File.separator + item[1];
      if (item[2] != null) {
        BufferedWriter writer=new BufferedWriter(new FileWriter(vmDataFile));
        writer.write(item[2]);
        writer.close();
      }
    }
 catch (    IOException e) {
      s_logger.warn("Failed to write vm data item " + item[1],e);
      return new Answer(cmd,false,"Failed to write vm data item " + item[1]);
    }
  }
  return new Answer(cmd);
}
