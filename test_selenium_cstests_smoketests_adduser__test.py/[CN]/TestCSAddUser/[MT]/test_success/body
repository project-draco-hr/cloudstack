def test_success(self):
    self.browser.set_url(smokecfg['cssite'])
    self.loginpage = loginpage.LoginPage(self.browser.get_browser())
    shared.Shared.wait_for_element(self.browser.get_browser(), 'class_name', 'select-language', waittime=300)
    self.loginpage.set_language(smokecfg['language'])
    shared.Shared.wait_for_element(self.browser.get_browser(), 'class_name', 'fields', waittime=300)
    self.loginpage.set_username(smokecfg['username'])
    self.loginpage.set_password(smokecfg['password'])
    self.loginpage.login()
    shared.Shared.wait_for_element(self.browser.browser, 'id', 'navigation')
    time.sleep(3)
    self.dashboardpage = dashboardpage.DashboardPage(self.browser.get_browser())
    self.dashboardpage.navigate_to('accounts')
    activeitem = self.dashboardpage.get_active_item()
    if (activeitem.find('accounts') < 0):
        self.assertRaises(ValueError, self.dashboardpage.get_active_item(), activeitem)
    self.accountspage = accountspage.AccountsPage(self.browser.get_browser())
    self.accountspage.select_account(username=smokecfg['account']['username'], domain=smokecfg['account']['domain'], type=smokecfg['account']['type'])
    self.userspage = userspage.UsersPage(self.browser.get_browser())
    self.userspage.add_user(username=smokecfg['new user']['username'], password=smokecfg['new user']['password'], email=smokecfg['new user']['email'], firstname=smokecfg['new user']['firstname'], lastname=smokecfg['new user']['lastname'], timezone=smokecfg['new user']['timezone'])
    self.loginpage.logout()
    shared.Shared.wait_for_element(self.browser.browser, 'class_name', 'login')
