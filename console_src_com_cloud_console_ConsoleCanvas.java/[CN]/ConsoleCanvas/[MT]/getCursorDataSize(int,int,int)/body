{
  if (width * height == 0)   return 0;
  int bytesPerRow=(width + 7) / 8;
  int bytesMaskData=bytesPerRow * height;
  if (encodingType == RfbProto.EncodingXCursor) {
    return 6 + bytesMaskData * 2;
  }
 else {
    return width * height + bytesMaskData;
  }
}
