{
  IAMPolicy policy=_aclPolicyDao.findById(policyId);
  if (policy == null) {
    throw new InvalidParameterValueException("Unable to find acl policy: " + policyId + "; failed to add policy to account.");
  }
  Transaction.execute(new TransactionCallbackNoReturn(){
    @Override public void doInTransactionWithoutResult(    TransactionStatus status){
      for (      Long acctId : acctIds) {
        IAMAccountPolicyMapVO acctMap=_aclAccountPolicyMapDao.findByAccountAndPolicy(acctId,policyId);
        if (acctMap == null) {
          acctMap=new IAMAccountPolicyMapVO(acctId,policyId);
          _aclAccountPolicyMapDao.persist(acctMap);
        }
      }
    }
  }
);
  invalidateIAMCache();
}
