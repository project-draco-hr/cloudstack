def _abort(srUuid):
    'If successful, we return holding lockRunning; otherwise exception\n    raised.'
    Util.log(('=== SR %s: abort ===' % srUuid))
    init(srUuid)
    if (not lockRunning.acquireNoblock()):
        gotLock = False
        Util.log(('Aborting currently-running instance (SR %s)' % srUuid))
        abortFlag = IPCFlag(srUuid)
        abortFlag.set(FLAG_TYPE_ABORT)
        for i in range(SR.LOCK_RETRY_ATTEMPTS):
            gotLock = lockRunning.acquireNoblock()
            if gotLock:
                break
            time.sleep(SR.LOCK_RETRY_INTERVAL)
        abortFlag.clear(FLAG_TYPE_ABORT)
        if (not gotLock):
            raise util.SMException(('SR %s: error aborting existing process' % srUuid))
