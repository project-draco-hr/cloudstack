def _setParent(self, parent):
    self._activate()
    if self.lvReadonly:
        self.sr.lvmCache.setReadonly(self.lvName, False)
    try:
        vhdutil.setParent(self.path, parent.path, parent.raw)
    finally:
        if self.lvReadonly:
            self.sr.lvmCache.setReadonly(self.lvName, True)
    self._deactivate()
    self.parent = parent
    self.parentUuid = parent.uuid
    parent.children.append(self)
    try:
        self.setConfigUpdate(self.DB_VHD_PARENT, self.parentUuid)
        Util.log(('Updated the vhd-parent field for child %s with %s' % (self.uuid, self.parentUuid)))
    except:
        Util.log(('Failed to update the vhd-parent with %s for child %s' % (self.parentUuid, self.uuid)))
