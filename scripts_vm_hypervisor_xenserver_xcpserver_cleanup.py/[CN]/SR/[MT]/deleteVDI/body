def deleteVDI(self, vdi):
    assert (len(vdi.children) == 0)
    del self.vdis[vdi.uuid]
    if vdi.parent:
        vdi.parent.children.remove(vdi)
    if (vdi in self.vdiTrees):
        self.vdiTrees.remove(vdi)
    vdi.delete()
