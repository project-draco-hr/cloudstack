def __init__(self, uuid, xapi):
    self.uuid = uuid
    self.path = ''
    self.name = ''
    self.vdis = {}
    self.vdiTrees = []
    self.journaler = None
    self.xapi = xapi
    self._locked = 0
    self._srLock = lock.Lock(vhdutil.LOCK_TYPE_SR, self.uuid)
    self.name = unicode(self.xapi.srRecord['name_label']).encode('utf-8', 'replace')
    self._failedCoalesceTargets = []
    if (not self.xapi.isPluggedHere()):
        raise util.SMException(('SR %s not attached on this host' % uuid))
    if (not self.xapi.isMaster()):
        raise util.SMException('This host is NOT master, will not run')
