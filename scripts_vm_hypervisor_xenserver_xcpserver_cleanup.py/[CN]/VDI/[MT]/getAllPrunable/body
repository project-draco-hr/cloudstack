def getAllPrunable(self):
    if (len(self.children) == 0):
        if self.sr.journaler.get(self.JRN_RELINK, self.uuid):
            return []
        if ((not self.scanError) and self.hidden):
            return [self]
        return []
    thisPrunable = True
    vdiList = []
    for child in self.children:
        childList = child.getAllPrunable()
        vdiList.extend(childList)
        if (child not in childList):
            thisPrunable = False
    if ((not self.scanError) and thisPrunable):
        vdiList.append(self)
    return vdiList
