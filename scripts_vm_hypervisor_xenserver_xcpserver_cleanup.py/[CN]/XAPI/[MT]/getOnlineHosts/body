def getOnlineHosts(self):
    onlineHosts = []
    hosts = self.session.xenapi.host.get_all_records()
    for (hostRef, hostRecord) in hosts.iteritems():
        metricsRef = hostRecord['metrics']
        metrics = self.session.xenapi.host_metrics.get_record(metricsRef)
        if metrics['live']:
            onlineHosts.append(hostRef)
    return onlineHosts
