{
  if (profile.getDeviceId() != null) {
    vo.setDeviceId(profile.getDeviceId());
  }
 else   if (deviceId != null) {
    vo.setDeviceId(deviceId++);
  }
  if (profile.getReservationStrategy() != null) {
    vo.setReservationStrategy(profile.getReservationStrategy());
  }
  vo.setDefaultNic(profile.isDefaultNic());
  vo.setIPv4Address(profile.getIPv4Address());
  vo.setAddressFormat(profile.getFormat());
  if (profile.getMacAddress() != null) {
    vo.setMacAddress(profile.getMacAddress());
  }
  vo.setMode(profile.getMode());
  vo.setIPv4Netmask(profile.getIPv4Netmask());
  vo.setIPv4Gateway(profile.getIPv4Gateway());
  if (profile.getBroadCastUri() != null) {
    vo.setBroadcastUri(profile.getBroadCastUri());
  }
  if (profile.getIsolationUri() != null) {
    vo.setIsolationUri(profile.getIsolationUri());
  }
  vo.setState(Nic.State.Allocated);
  vo.setIPv6Address(profile.getIPv6Address());
  vo.setIPv6Gateway(profile.getIPv6Gateway());
  vo.setIPv6Cidr(profile.getIPv6Cidr());
  return deviceId;
}
