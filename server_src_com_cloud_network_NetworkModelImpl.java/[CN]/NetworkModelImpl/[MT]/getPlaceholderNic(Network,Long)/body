{
  List<NicVO> nics=_nicDao.listPlaceholderNicsByNetworkId(network.getId());
  for (  NicVO nic : nics) {
    if (nic.getVmType() == null && nic.getReserver() == null && nic.getIp4Address() != null && !nic.getIp4Address().equals(network.getGateway())) {
      if (podId == null) {
        return nic;
      }
 else {
        List<? extends Vlan> vlans=_vlanDao.listVlansForPod(podId);
        for (        Vlan vlan : vlans) {
          IpAddress ip=_ipAddressDao.findByIpAndNetworkId(network.getId(),nic.getIp4Address());
          if (ip != null && ip.getVlanId() == vlan.getId()) {
            return nic;
          }
        }
      }
    }
  }
  return null;
}
