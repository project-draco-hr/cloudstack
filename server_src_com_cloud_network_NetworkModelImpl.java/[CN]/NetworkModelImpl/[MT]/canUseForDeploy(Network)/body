{
  if (network.getTrafficType() != TrafficType.Guest) {
    return false;
  }
  boolean hasFreeIps=true;
  if (network.getGuestType() == GuestType.Shared) {
    hasFreeIps=_ipAddressDao.countFreeIPsInNetwork(network.getId()) > 0;
  }
 else {
    hasFreeIps=(getAvailableIps(network,null)).size() > 0;
  }
  return hasFreeIps;
}
