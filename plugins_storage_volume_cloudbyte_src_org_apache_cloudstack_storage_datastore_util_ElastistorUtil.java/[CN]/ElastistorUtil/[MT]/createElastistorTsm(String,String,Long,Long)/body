{
  String totalthroughput=String.valueOf(capacityIops * 4);
  String totaliops=String.valueOf(capacityIops);
  String quotasize=convertCapacityBytes(capacityBytes);
  CreateTsmCmd createTsmCmd=new CreateTsmCmd();
  if (null != ElastistorUtil.s_esACCOUNTIDVAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_ACCOUNTID,ElastistorUtil.s_esACCOUNTIDVAL);
  if (null != totalthroughput)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_TSM_THROUGHPUT,totalthroughput);
  if (null != ElastistorUtil.s_esPOOLIDVAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_POOLID,ElastistorUtil.s_esPOOLIDVAL);
  if (null != storagePoolName)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_NAME,"TSM" + storagePoolName);
  if (null != quotasize)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_QUOTA_SIZE,quotasize);
  if (null != storageIp)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_IPADDRESS,storageIp);
  if (null != ElastistorUtil.s_esSUBNETVAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_SUBNET,ElastistorUtil.s_esSUBNETVAL);
  if (null != ElastistorUtil.s_esGATEWAYVAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_GATEWAY,ElastistorUtil.s_esGATEWAYVAL);
  if (null != ElastistorUtil.s_esINTERFACEVAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_INTERFACE,ElastistorUtil.s_esINTERFACEVAL);
  if (null != ElastistorUtil.ES_NOOFCOPIES_VAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_NOOFCOPIES,ElastistorUtil.ES_NOOFCOPIES_VAL);
  if (null != ElastistorUtil.ES_BLOCKSIZE_VAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_RECORDSIZE,ElastistorUtil.ES_BLOCKSIZE_VAL);
  if (null != totaliops)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_TOTALIOPS,totaliops);
  if (null != ElastistorUtil.ES_LATENCY_VAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_LATENCY,ElastistorUtil.ES_LATENCY_VAL);
  if (null != ElastistorUtil.ES_BLOCKSIZE_VAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_BLOCKSIZE,ElastistorUtil.ES_BLOCKSIZE_VAL);
  if (null != ElastistorUtil.ES_GRACEALLOWED_VAL)   createTsmCmd.putCommandParameter(ElastistorUtil.REST_PARAM_GRACEALLOWED,ElastistorUtil.ES_GRACEALLOWED_VAL);
  CreateTsmCmdResponse cmdResponse;
  try {
    cmdResponse=(CreateTsmCmdResponse)getElastistorRestClient(s_esIPVAL,s_esAPIKEYVAL).executeCommand(createTsmCmd);
    if (cmdResponse.getTsm().getUuid() == null) {
      throw new CloudRuntimeException("tsm creation failed , contact elatistor admin");
    }
    return cmdResponse;
  }
 catch (  Exception e) {
    throw new CloudRuntimeException("tsm creation failed , contact elatistor admin" + e.toString());
  }
}
