{
  if (verbose)   System.out.println("[" + this + "] INFO: Data received: "+ buf+ ".");
  BitmapOrder order=new BitmapOrder();
  int updateType=buf.readSignedShortLE();
  if (updateType != UPDATETYPE_BITMAP)   throw new RuntimeException("Unknown update type. Expected update type: UPDATETYPE_BITMAP (0x1). Actual update type: " + updateType + ", buf: "+ buf+ ".");
  int numberRectangles=buf.readSignedShortLE();
  BitmapRectangle[] rectangles=new BitmapRectangle[numberRectangles];
  for (int i=0; i < numberRectangles; i++) {
    rectangles[i]=readRectangle(buf);
  }
  order.rectangles=rectangles;
  buf.assertThatBufferIsFullyRead();
  ByteBuffer data=new ByteBuffer(order);
  pushDataToAllOuts(data);
  buf.unref();
}
