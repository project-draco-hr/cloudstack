{
  if (publicIpId != null)   return _networkService.getIp(getSourceIpAddressId()).getAccountId();
  Account account=UserContext.current().getCaller();
  if ((account == null)) {
    if ((domainId != null) && (accountName != null)) {
      Account userAccount=_responseGenerator.findAccountByNameDomain(accountName,domainId);
      if (userAccount != null) {
        return userAccount.getId();
      }
    }
  }
  if (account != null) {
    return account.getId();
  }
  return Account.ACCOUNT_ID_SYSTEM;
}
