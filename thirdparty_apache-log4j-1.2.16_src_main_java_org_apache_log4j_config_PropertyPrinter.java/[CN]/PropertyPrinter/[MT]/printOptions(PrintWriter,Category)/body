{
  Enumeration appenders=cat.getAllAppenders();
  Level prio=cat.getLevel();
  String appenderString=(prio == null ? "" : prio.toString());
  while (appenders.hasMoreElements()) {
    Appender app=(Appender)appenders.nextElement();
    String name;
    if ((name=(String)appenderNames.get(app)) == null) {
      if ((name=app.getName()) == null || isGenAppName(name)) {
        name=genAppName();
      }
      appenderNames.put(app,name);
      printOptions(out,app,"log4j.appender." + name);
      if (app.getLayout() != null) {
        printOptions(out,app.getLayout(),"log4j.appender." + name + ".layout");
      }
    }
    appenderString+=", " + name;
  }
  String catKey=(cat == Logger.getRootLogger()) ? "log4j.rootLogger" : "log4j.logger." + cat.getName();
  if (appenderString != "") {
    out.println(catKey + "=" + appenderString);
  }
  if (!cat.getAdditivity() && cat != Logger.getRootLogger()) {
    out.println("log4j.additivity." + cat.getName() + "=false");
  }
}
