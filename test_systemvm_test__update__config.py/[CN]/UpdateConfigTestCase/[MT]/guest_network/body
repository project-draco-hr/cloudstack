def guest_network(self, config):
    self.update_config(config)
    assert ip.has_ip(('%s/%s' % (config['router_guest_ip'], config['cidr'])), config['device'])
    assert process.is_up('apache2'), 'Apache2 should be running after adding a guest network'
    assert process.is_up('dnsmasq'), 'Dnsmasq should be running after adding a guest network'
    assert port.is_listening(80)
    assert port.is_listening(53)
    assert port.is_listening(53)
    assert port.is_listening(67)
    config['add'] = False
    self.update_config(config)
    assert (not ip.has_ip(('%s/%s' % (config['router_guest_ip'], config['cidr'])), config['device']))
