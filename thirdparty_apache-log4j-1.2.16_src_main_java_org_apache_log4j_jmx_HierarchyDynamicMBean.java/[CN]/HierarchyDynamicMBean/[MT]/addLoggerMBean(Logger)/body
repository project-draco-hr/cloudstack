{
  String name=logger.getName();
  ObjectName objectName=null;
  try {
    LoggerDynamicMBean loggerMBean=new LoggerDynamicMBean(logger);
    objectName=new ObjectName("log4j","logger",name);
    if (!server.isRegistered(objectName)) {
      registerMBean(loggerMBean,objectName);
      NotificationFilterSupport nfs=new NotificationFilterSupport();
      nfs.enableType(ADD_APPENDER + logger.getName());
      log.debug("---Adding logger [" + name + "] as listener.");
      nbs.addNotificationListener(loggerMBean,nfs,null);
      vAttributes.add(new MBeanAttributeInfo("logger=" + name,"javax.management.ObjectName","The " + name + " logger.",true,true,false));
    }
  }
 catch (  JMException e) {
    log.error("Could not add loggerMBean for [" + name + "].",e);
  }
catch (  RuntimeException e) {
    log.error("Could not add loggerMBean for [" + name + "].",e);
  }
  return objectName;
}
