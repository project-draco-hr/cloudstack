{
  viewer=v;
  host=h;
  port=p;
  if (!viewer.inProxyMode) {
    SocketFactory socketFactory=SSLSocketFactory.getDefault();
    sock=socketFactory.createSocket(host,port);
  }
 else {
    sock=new Socket();
    sock.setSoTimeout(0);
    sock.setKeepAlive(true);
    sock.connect(new InetSocketAddress(host,port),30000);
  }
  sis=new SplitInputStream(new BufferedInputStream(sock.getInputStream(),16384));
  is=new DataInputStream(sis);
  os=sock.getOutputStream();
  timing=false;
  timeWaitedIn100us=5;
  timedKbits=0;
}
