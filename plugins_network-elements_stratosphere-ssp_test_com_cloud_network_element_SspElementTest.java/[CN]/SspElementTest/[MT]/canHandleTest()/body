{
  fullyConfigured();
  assertTrue(_element.canHandle(psvo));
  when(nspvo.getState()).thenReturn(PhysicalNetworkServiceProvider.State.Disabled);
  assertFalse(_element.canHandle(psvo));
  when(_element._physicalNetworkServiceProviderDao.findByServiceProvider(physicalNetworkId,"StratosphereSsp")).thenReturn(null);
  assertFalse(_element.canHandle(psvo));
  when(nspvo.getState()).thenReturn(PhysicalNetworkServiceProvider.State.Enabled);
  when(_element._physicalNetworkServiceProviderDao.findByServiceProvider(physicalNetworkId,"StratosphereSsp")).thenReturn(nspvo);
  when(_element._sspCredentialDao.findByZone(dataCenterId.longValue())).thenReturn(null);
  when(_element._resourceMgr.listAllHostsInOneZoneByType(Host.Type.L2Networking,dataCenterId)).thenReturn(Arrays.<HostVO>asList());
  assertFalse(_element.canHandle(psvo));
}
