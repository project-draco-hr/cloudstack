{
  Account caller=UserContext.current().getCaller();
  Account owner=_accountMgr.getAccount(cmd.getEntityOwnerId());
  _accountMgr.checkAccess(caller,null,true,owner);
  HypervisorType hyperType=HypervisorType.None;
  if (cmd.getOsTypeId() != null) {
    hyperType=_osHyperDao.findHypervisorTypeByGuestOsId(cmd.getOsTypeId());
  }
  return prepare(true,UserContext.current().getCallerUserId(),cmd.getIsoName(),cmd.getDisplayText(),64,false,true,cmd.getUrl(),cmd.isPublic(),cmd.isFeatured(),cmd.isExtractable(),ImageFormat.ISO.toString(),cmd.getOsTypeId(),cmd.getZoneId(),hyperType,cmd.getChecksum(),cmd.isBootable(),null,owner,null,false);
}
