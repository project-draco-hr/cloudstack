{
  try {
    final Mac mac=Mac.getInstance("HmacSHA1");
    final SecretKeySpec keySpec=new SecretKeySpec(key.getBytes("UTF-8"),"HmacSHA1");
    mac.init(keySpec);
    mac.update(data.getBytes());
    final byte[] encryptedBytes=mac.doFinal();
    return Base64.encodeBase64String(encryptedBytes);
  }
 catch (  NoSuchAlgorithmException|InvalidKeyException|UnsupportedEncodingException e) {
    s_logger.error("exception occurred which encoding the data." + e.getMessage());
    throw new CloudRuntimeException("unable to generate signature",e);
  }
}
