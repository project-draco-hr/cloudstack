{
  ProjectInvitationVO invite=_projectInvitationDao.findPendingByAccountIdProjectId(accountId,project.getId());
  if (invite != null) {
    if (_projectInvitationDao.isActive(invite.getId(),_invitationTimeOut)) {
      throw new InvalidParameterValueException("There is already a pending invitation for account id=" + accountId + " to the project id="+ project);
    }
 else {
      if (invite.getState() == ProjectInvitation.State.Pending) {
        expireInvitation(invite);
      }
    }
  }
  return _projectInvitationDao.persist(new ProjectInvitationVO(project.getId(),accountId,project.getDomainId(),null,null));
}
