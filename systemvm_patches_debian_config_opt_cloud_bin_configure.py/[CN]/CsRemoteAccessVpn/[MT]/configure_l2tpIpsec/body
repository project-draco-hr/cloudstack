def configure_l2tpIpsec(self, left, obj):
    vpnconffile = ('%s/l2tp.conf' % self.VPNCONFDIR)
    vpnsecretfilte = ('%s/ipsec.any.secrets' % self.VPNCONFDIR)
    xl2tpdconffile = '/etc/xl2tpd/xl2tpd.conf'
    xl2tpoptionsfile = '/etc/ppp/options.xl2tpd'
    file = CsFile(vpnconffile)
    localip = obj['local_ip']
    localcidr = obj['local_cidr']
    publicIface = obj['public_interface']
    iprange = obj['ip_range']
    psk = obj['preshared_key']
    file.addeq((' left=%s' % left))
    file.commit()
    secret = CsFile(vpnsecretfilte)
    secret.addeq((': PSK "%s"' % psk))
    secret.commit()
    xl2tpdconf = CsFile(xl2tpdconffile)
    xl2tpdconf.addeq(('ip range = %s' % iprange))
    xl2tpdconf.addeq(('local ip = %s' % localip))
    xl2tpdconf.commit()
    xl2tpoptions = CsFile(xl2tpoptionsfile)
    xl2tpoptions.search('ms-dns ', ('ms-dns %s' % localip))
    xl2tpoptions.commit()
