{
  HostFirewallSystemMO firewallMo=hostMo.getHostFirewallSystemMO();
  if (firewallMo != null) {
    if (hostMo.getHostType() == VmwareHostType.ESX) {
      firewallMo.enableRuleset("vncServer");
      firewallMo.refreshFirewall();
    }
  }
  String vSwitchName=privateTrafficLabel;
  String vlanId=null;
  String vlanToken;
  String[] tokens=privateTrafficLabel.split(",");
  if (tokens.length >= 2) {
    vSwitchName=tokens[0].trim();
    vlanToken=tokens[1].trim();
    if (!vlanToken.isEmpty()) {
      vlanId=vlanToken;
    }
  }
  s_logger.info("Preparing network on host " + hostMo.getContext().toString() + " for "+ privateTrafficLabel);
  HypervisorHostHelper.prepareNetwork(vSwitchName,"cloud.private",hostMo,vlanId,null,null,180000,false,BroadcastDomainType.Vlan);
}
