{
  DataCenterVO zone=_dcDao.findById(zoneId);
  if (zone == null) {
    InvalidParameterValueException ex=new InvalidParameterValueException("Can't find zone by the id specified.");
    throw ex;
  }
  List<ClusterVO> clusters=_clusterDao.listByZoneId(zoneId);
  if (clusters != null && clusters.size() > 0) {
    for (    ClusterVO cluster : clusters) {
      if (cluster.getHypervisorType().equals(HypervisorType.VMware)) {
        throw new ResourceInUseException("Zone has one or more clusters." + " Can't " + errStr + " which already has clusters.");
      }
    }
  }
}
