{
  String filterName=filter.getName();
  String[] valueSet=filter.getValueSet();
  if (filterName.equalsIgnoreCase("availability-zone")) {
    return containsString(vm.getZoneName(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("hypervisor")) {
    return containsString(vm.getHypervisor(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("image-id")) {
    return containsString(vm.getTemplateId(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("instance-id")) {
    return containsString(vm.getId(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("instance-type")) {
    return containsString(vm.getServiceOffering(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("instance-state-code")) {
    return containsInteger(EC2SoapServiceImpl.toAmazonCode(vm.getState()),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("instance-state-name")) {
    return containsString(EC2SoapServiceImpl.toAmazonStateName(vm.getState()),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("ip-address")) {
    return containsString(vm.getIpAddress(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("private-ip-address")) {
    return containsString(vm.getPrivateIpAddress(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("owner-id")) {
    String owner=new String(vm.getDomainId() + ":" + vm.getAccountName());
    return containsString(owner,valueSet);
  }
 else   if (filterName.equalsIgnoreCase("root-device-name")) {
    return containsDevice(vm.getRootDeviceId(),valueSet);
  }
 else   if (filterName.equalsIgnoreCase("group-id")) {
    EC2SecurityGroup[] groupSet=vm.getGroupSet();
    for (    EC2SecurityGroup group : groupSet) {
      if (containsString(group.getId(),valueSet))       return true;
    }
    return false;
  }
 else   if (filterName.equalsIgnoreCase("tag-key")) {
    EC2TagKeyValue[] tagSet=vm.getResourceTags();
    for (    EC2TagKeyValue tag : tagSet)     if (containsString(tag.getKey(),valueSet))     return true;
    return false;
  }
 else   if (filterName.equalsIgnoreCase("tag-value")) {
    EC2TagKeyValue[] tagSet=vm.getResourceTags();
    for (    EC2TagKeyValue tag : tagSet) {
      if (tag.getValue() == null) {
        if (containsEmptyValue(valueSet))         return true;
      }
 else {
        if (containsString(tag.getValue(),valueSet))         return true;
      }
    }
    return false;
  }
 else   return false;
}
