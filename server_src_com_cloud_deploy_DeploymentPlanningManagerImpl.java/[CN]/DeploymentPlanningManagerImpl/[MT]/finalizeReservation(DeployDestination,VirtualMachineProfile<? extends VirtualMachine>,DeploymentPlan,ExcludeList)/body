{
  VirtualMachine vm=vmProfile.getVirtualMachine();
  long vmGroupCount=_affinityGroupVMMapDao.countAffinityGroupsForVm(vm.getId());
  DataCenter dc=_dcDao.findById(vm.getDataCenterId());
  if (vmGroupCount > 0) {
    for (    AffinityGroupProcessor processor : _affinityProcessors) {
      if (!processor.check(vmProfile,plannedDestination)) {
        return false;
      }
    }
  }
  return true;
}
