{
  ExcludeList allocatorAvoidOutput=new ExcludeList(avoids.getDataCentersToAvoid(),avoids.getPodsToAvoid(),avoids.getClustersToAvoid(),avoids.getHostsToAvoid(),avoids.getPoolsToAvoid());
  if (allocatorAvoidOutput.getHostsToAvoid() != null && plannerAvoidOutput.getHostsToAvoid() != null) {
    allocatorAvoidOutput.getHostsToAvoid().removeAll(plannerAvoidOutput.getHostsToAvoid());
  }
  if (allocatorAvoidOutput.getPoolsToAvoid() != null && plannerAvoidOutput.getPoolsToAvoid() != null) {
    allocatorAvoidOutput.getPoolsToAvoid().removeAll(plannerAvoidOutput.getPoolsToAvoid());
  }
  boolean avoidAllHosts=true, avoidAllPools=true;
  List<HostVO> allhostsInCluster=_hostDao.listAllUpAndEnabledNonHAHosts(Host.Type.Routing,clusterVO.getId(),clusterVO.getPodId(),clusterVO.getDataCenterId(),null);
  for (  HostVO host : allhostsInCluster) {
    if (allocatorAvoidOutput.getHostsToAvoid() == null || !allocatorAvoidOutput.getHostsToAvoid().contains(host.getId())) {
      avoidAllHosts=false;
    }
  }
  List<StoragePoolVO> allPoolsInCluster=_storagePoolDao.findPoolsByTags(clusterVO.getDataCenterId(),clusterVO.getPodId(),clusterVO.getId(),null);
  for (  StoragePoolVO pool : allPoolsInCluster) {
    if (allocatorAvoidOutput.getPoolsToAvoid() == null || !allocatorAvoidOutput.getPoolsToAvoid().contains(pool.getId())) {
      avoidAllPools=false;
    }
  }
  if (avoidAllHosts || avoidAllPools) {
    return true;
  }
  return false;
}
