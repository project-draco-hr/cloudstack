{
  if (offering.isSystemOnly()) {
    return false;
  }
  Map<VirtualMachineProfile.Param,Object> params=new HashMap<VirtualMachineProfile.Param,Object>(1);
  params.put(VirtualMachineProfile.Param.ReProgramGuestNetworks,true);
  List<DomainRouterVO> routers=_routerMgr.deployVirtualRouterInGuestNetwork(network,dest,_accountMgr.getAccount(network.getAccountId()),params,offering.getRedundantRouter());
  if ((routers == null) || (routers.size() == 0)) {
    throw new ResourceUnavailableException("Can't find at least one running router!",DataCenter.class,network.getDataCenterId());
  }
  boolean success=true;
  for (  VirtualRouter router : routers) {
    success=success && _routerMgr.addRouterToGuestNetwork(router,network,false);
    if (!success) {
      s_logger.warn("Failed to plug nic in network " + network + " for virtual router router "+ router);
    }
 else {
      s_logger.debug("Successfully plugged nic in network " + network + " for virtual router "+ router);
    }
  }
  return success;
}
