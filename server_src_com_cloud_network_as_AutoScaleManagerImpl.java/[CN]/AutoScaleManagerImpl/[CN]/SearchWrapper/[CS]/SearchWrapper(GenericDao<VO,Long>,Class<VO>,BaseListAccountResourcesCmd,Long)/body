{
  this.dao=dao;
  this.searchBuilder=dao.createSearchBuilder();
  domainId=cmd.getDomainId();
  final String accountName=cmd.getAccountName();
  isRecursive=cmd.isRecursive();
  final boolean listAll=cmd.listAll();
  final long startIndex=cmd.getStartIndex();
  final long pageSizeVal=cmd.getPageSizeVal();
  final Account caller=CallContext.current().getCallingAccount();
  final Ternary<Long,Boolean,ListProjectResourcesCriteria> domainIdRecursiveListProject=new Ternary<Long,Boolean,ListProjectResourcesCriteria>(domainId,isRecursive,null);
  _accountMgr.buildACLSearchParameters(caller,id,accountName,null,permittedAccounts,domainIdRecursiveListProject,listAll,false);
  domainId=domainIdRecursiveListProject.first();
  isRecursive=domainIdRecursiveListProject.second();
  final ListProjectResourcesCriteria listProjectResourcesCriteria=domainIdRecursiveListProject.third();
  _accountMgr.buildACLSearchBuilder(searchBuilder,domainId,isRecursive,permittedAccounts,listProjectResourcesCriteria);
  searchFilter=new Filter(entityClass,"id",false,startIndex,pageSizeVal);
}
