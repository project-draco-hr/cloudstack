{
  final List<AutoScaleCounter> supportedCounters=getSupportedAutoScaleCounters(networkid);
  if (supportedCounters == null) {
    throw new InvalidParameterException("AutoScale is not supported in the network");
  }
  for (  final Counter counter : counters) {
    final String counterName=counter.getSource().name().toString();
    boolean isCounterSupported=false;
    for (    final AutoScaleCounter autoScaleCounter : supportedCounters) {
      if (autoScaleCounter.getName().equals(counterName)) {
        isCounterSupported=true;
        final List<AutoScaleCounterParam> counterParams=autoScaleCounter.getParamList();
        for (        final AutoScaleCounterParam autoScaleCounterParam : counterParams) {
          final boolean isRequiredParameter=autoScaleCounterParam.getRequired();
          if (isRequiredParameter) {
            boolean isRequiredParamPresent=false;
            for (            final Pair<String,String> pair : counterParamPassed) {
              if (pair.first().equals(autoScaleCounterParam.getParamName()))               isRequiredParamPresent=true;
            }
            if (!isRequiredParamPresent) {
              throw new InvalidParameterException("Parameter " + autoScaleCounterParam.getParamName() + " has to be set in AutoScaleVmProfile's "+ ApiConstants.COUNTERPARAM_LIST);
            }
          }
        }
        break;
      }
    }
    if (!isCounterSupported) {
      throw new InvalidParameterException("AutoScale counter with source='" + counter.getSource().name() + "' is not supported "+ "in the network");
    }
  }
}
