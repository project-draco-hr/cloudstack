{
  Long id=cmd.getId();
  Long policyId=cmd.getPolicyId();
  Long loadBalancerId=cmd.getLoadBalancerId();
  Long profileId=cmd.getProfileId();
  Long zoneId=cmd.getZoneId();
  Boolean forDisplay=cmd.getDisplay();
  SearchWrapper<AutoScaleVmGroupVO> searchWrapper=new SearchWrapper<AutoScaleVmGroupVO>(_autoScaleVmGroupDao,AutoScaleVmGroupVO.class,cmd,cmd.getId(),"listAutoScaleVmGroups");
  SearchBuilder<AutoScaleVmGroupVO> sb=searchWrapper.getSearchBuilder();
  sb.and("id",sb.entity().getId(),SearchCriteria.Op.EQ);
  sb.and("loadBalancerId",sb.entity().getLoadBalancerId(),SearchCriteria.Op.EQ);
  sb.and("profileId",sb.entity().getProfileId(),SearchCriteria.Op.EQ);
  sb.and("zoneId",sb.entity().getZoneId(),SearchCriteria.Op.EQ);
  sb.and("display",sb.entity().isDisplay(),SearchCriteria.Op.EQ);
  if (policyId != null) {
    SearchBuilder<AutoScaleVmGroupPolicyMapVO> asVmGroupPolicySearch=_autoScaleVmGroupPolicyMapDao.createSearchBuilder();
    asVmGroupPolicySearch.and("policyId",asVmGroupPolicySearch.entity().getPolicyId(),SearchCriteria.Op.EQ);
    sb.join("asVmGroupPolicySearch",asVmGroupPolicySearch,sb.entity().getId(),asVmGroupPolicySearch.entity().getVmGroupId(),JoinBuilder.JoinType.INNER);
  }
  SearchCriteria<AutoScaleVmGroupVO> sc=searchWrapper.buildSearchCriteria();
  if (id != null) {
    sc.setParameters("id",id);
  }
  if (loadBalancerId != null) {
    sc.setParameters("loadBalancerId",loadBalancerId);
  }
  if (profileId != null) {
    sc.setParameters("profileId",profileId);
  }
  if (zoneId != null) {
    sc.setParameters("zoneId",zoneId);
  }
  if (policyId != null) {
    sc.setJoinParameters("asVmGroupPolicySearch","policyId",policyId);
  }
  if (forDisplay != null) {
    sc.setParameters("display",forDisplay);
  }
  return searchWrapper.search();
}
