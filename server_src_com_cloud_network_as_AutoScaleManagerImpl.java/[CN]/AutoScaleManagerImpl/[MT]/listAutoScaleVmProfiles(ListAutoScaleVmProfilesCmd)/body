{
  final Long id=cmd.getId();
  final Long templateId=cmd.getTemplateId();
  final String otherDeployParams=cmd.getOtherDeployParams();
  final Long serviceOffId=cmd.getServiceOfferingId();
  final Long zoneId=cmd.getZoneId();
  final SearchWrapper<AutoScaleVmProfileVO> searchWrapper=new SearchWrapper<AutoScaleVmProfileVO>(_autoScaleVmProfileDao,AutoScaleVmProfileVO.class,cmd,cmd.getId());
  final SearchBuilder<AutoScaleVmProfileVO> sb=searchWrapper.getSearchBuilder();
  sb.and("id",sb.entity().getId(),SearchCriteria.Op.EQ);
  sb.and("templateId",sb.entity().getTemplateId(),SearchCriteria.Op.EQ);
  sb.and("serviceOfferingId",sb.entity().getServiceOfferingId(),SearchCriteria.Op.EQ);
  sb.and("otherDeployParams",sb.entity().getOtherDeployParams(),SearchCriteria.Op.LIKE);
  sb.and("zoneId",sb.entity().getZoneId(),SearchCriteria.Op.EQ);
  final SearchCriteria<AutoScaleVmProfileVO> sc=searchWrapper.buildSearchCriteria();
  if (id != null) {
    sc.setParameters("id",id);
  }
  if (templateId != null) {
    sc.setParameters("templateId",templateId);
  }
  if (otherDeployParams != null) {
    sc.addAnd("otherDeployParams",SearchCriteria.Op.LIKE,"%" + otherDeployParams + "%");
  }
  if (serviceOffId != null) {
    sc.setParameters("serviceOfferingId",serviceOffId);
  }
  if (zoneId != null) {
    sc.setParameters("zoneId",zoneId);
  }
  return searchWrapper.search();
}
