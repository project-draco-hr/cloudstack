{
  super("TightVNC Session Recording");
  viewer=v;
  String fname=nextNewFilename(System.getProperty("user.dir") + System.getProperty("file.separator") + "vncsession.fbs");
  Panel fnamePanel=new Panel();
  GridBagLayout fnameGridbag=new GridBagLayout();
  fnamePanel.setLayout(fnameGridbag);
  GridBagConstraints fnameConstraints=new GridBagConstraints();
  fnameConstraints.gridwidth=GridBagConstraints.RELATIVE;
  fnameConstraints.fill=GridBagConstraints.BOTH;
  fnameConstraints.weightx=4.0;
  fnameField=new TextField(fname,64);
  fnameGridbag.setConstraints(fnameField,fnameConstraints);
  fnamePanel.add(fnameField);
  fnameField.addActionListener(this);
  fnameConstraints.gridwidth=GridBagConstraints.REMAINDER;
  fnameConstraints.weightx=1.0;
  browseButton=new Button("Browse");
  fnameGridbag.setConstraints(browseButton,fnameConstraints);
  fnamePanel.add(browseButton);
  browseButton.addActionListener(this);
  GridBagLayout gridbag=new GridBagLayout();
  setLayout(gridbag);
  GridBagConstraints gbc=new GridBagConstraints();
  gbc.gridwidth=GridBagConstraints.REMAINDER;
  gbc.fill=GridBagConstraints.BOTH;
  gbc.weighty=1.0;
  gbc.insets=new Insets(10,0,0,0);
  Label helpLabel=new Label("File name to save next recorded session in:",Label.CENTER);
  gridbag.setConstraints(helpLabel,gbc);
  add(helpLabel);
  gbc.fill=GridBagConstraints.HORIZONTAL;
  gbc.weighty=0.0;
  gbc.insets=new Insets(0,0,0,0);
  gridbag.setConstraints(fnamePanel,gbc);
  add(fnamePanel);
  gbc.fill=GridBagConstraints.BOTH;
  gbc.weighty=1.0;
  gbc.insets=new Insets(10,0,10,0);
  statusLabel=new Label("",Label.CENTER);
  gridbag.setConstraints(statusLabel,gbc);
  add(statusLabel);
  gbc.fill=GridBagConstraints.HORIZONTAL;
  gbc.weightx=1.0;
  gbc.weighty=0.0;
  gbc.gridwidth=1;
  gbc.insets=new Insets(0,0,0,0);
  recordButton=new Button("Record");
  gridbag.setConstraints(recordButton,gbc);
  add(recordButton);
  recordButton.addActionListener(this);
  nextButton=new Button("Next file");
  gridbag.setConstraints(nextButton,gbc);
  add(nextButton);
  nextButton.addActionListener(this);
  closeButton=new Button("Close");
  gridbag.setConstraints(closeButton,gbc);
  add(closeButton);
  closeButton.addActionListener(this);
  stopRecording();
  pack();
  addWindowListener(this);
}
