{
  int authType=is.readInt();
switch (authType) {
case RfbConstants.CONNECTION_FAILED:
{
      int length=is.readInt();
      byte[] buf=new byte[length];
      is.readFully(buf);
      String reason=new String(buf,RfbConstants.CHARSET);
      throw new RuntimeException("Authentication to VNC server is failed. Reason: " + reason);
    }
case RfbConstants.NO_AUTH:
{
    break;
  }
case RfbConstants.VNC_AUTH:
{
  doVncAuth(password);
  break;
}
default :
throw new RuntimeException("Unsupported VNC protocol authorization scheme, scheme code: " + authType + ".");
}
}
