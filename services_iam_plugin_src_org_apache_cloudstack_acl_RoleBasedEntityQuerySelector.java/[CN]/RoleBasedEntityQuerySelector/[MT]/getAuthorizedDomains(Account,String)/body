{
  long accountId=caller.getAccountId();
  List<AclPolicy> policies=_iamService.listAclPolicies(accountId);
  List<Long> domainIds=new ArrayList<Long>();
  for (  AclPolicy policy : policies) {
    List<AclPolicyPermission> pp=_iamService.listPolicyPermissionsByScope(policy.getId(),action,PermissionScope.DOMAIN.toString());
    if (pp != null) {
      for (      AclPolicyPermission p : pp) {
        if (p.getScopeId() != null) {
          if (p.getScopeId().longValue() == -1) {
            domainIds.add(caller.getDomainId());
          }
 else {
            domainIds.add(p.getScopeId());
          }
        }
      }
    }
  }
  return domainIds;
}
