{
  List<AutoScaleVmGroupPolicyMapVO> listMap=_asGroupPolicyDao.listByVmGroupId(groupId);
  if ((listMap == null) || (listMap.size() == 0))   return null;
  for (  AutoScaleVmGroupPolicyMapVO asVmgPmap : listMap) {
    AutoScalePolicyVO policyVO=_asPolicyDao.findById(asVmgPmap.getPolicyId());
    if (policyVO != null) {
      Integer quitetime=policyVO.getQuietTime();
      long last_quitetime=policyVO.getLastQuiteTime().getTime();
      long current_time=(new Date()).getTime();
      if ((current_time - last_quitetime) >= (long)quitetime) {
        boolean bValid=true;
        List<ConditionVO> lstConditions=getConditionsbyPolicyId(policyVO.getId());
        if ((lstConditions != null) && (lstConditions.size() > 0)) {
          for (          ConditionVO conditionVO : lstConditions) {
            long threholdValue=conditionVO.getThreshold();
            Double sum=avgCounter.get(conditionVO.getCounterid());
            Double avg=sum / currentVM;
            Operator op=conditionVO.getRelationalOperator();
            boolean bConditionCheck=((op == com.cloud.network.as.Condition.Operator.EQ) && (threholdValue == avg)) || ((op == com.cloud.network.as.Condition.Operator.GE) && (avg >= threholdValue)) || ((op == com.cloud.network.as.Condition.Operator.GT) && (avg > threholdValue))|| ((op == com.cloud.network.as.Condition.Operator.LE) && (avg <= threholdValue))|| ((op == com.cloud.network.as.Condition.Operator.LT) && (avg < threholdValue));
            if (!bConditionCheck) {
              bValid=false;
              break;
            }
          }
          if (bValid) {
            return policyVO.getAction();
          }
        }
      }
    }
  }
  return null;
}
