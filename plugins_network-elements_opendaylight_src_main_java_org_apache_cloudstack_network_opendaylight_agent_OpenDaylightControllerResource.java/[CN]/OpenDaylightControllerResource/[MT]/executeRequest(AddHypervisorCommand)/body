{
  NeutronNodesNorthboundAction nodeActions=new NeutronNodesNorthboundAction(controllerUrl,controllerUsername,controllerPassword);
  try {
    NeutronNodesList<NeutronNodeWrapper> nodes=nodeActions.listAllNodes();
    if (nodes.getNodes() != null) {
      for (      NeutronNodeWrapper nodeWrapper : nodes.getNodes()) {
        NeutronNode node=nodeWrapper.getNode();
        if (node.getId().equals(cmd.getHostId())) {
          return new AddHypervisorAnswer(cmd,true,"Hypervisor already connected");
        }
      }
    }
    nodeActions.updateNeutronNodeV2("OVS",cmd.getHostId(),cmd.getIpAddress(),6640);
  }
 catch (  NeutronRestApiException e) {
    s_logger.error("Call to OpenDaylight failed",e);
    return new AddHypervisorAnswer(cmd,e);
  }
  return new AddHypervisorAnswer(cmd,true,"Hypervisor " + cmd.getHostId() + " added");
}
