{
  VirtualRouterProviderVO element=_vrProviderDao.findByNspIdAndType(ntwkSvcProviderId,VirtualRouterProviderType.InternalLbVm);
  if (element != null) {
    s_logger.debug("There is already an " + this.getName() + " with service provider id "+ ntwkSvcProviderId);
    return null;
  }
  PhysicalNetworkServiceProvider provider=_pNtwkSvcProviderDao.findById(ntwkSvcProviderId);
  if (provider == null || !provider.getProviderName().equalsIgnoreCase(this.getName())) {
    throw new InvalidParameterValueException("Invalid network service provider is specified");
  }
  element=new VirtualRouterProviderVO(ntwkSvcProviderId,VirtualRouterProviderType.InternalLbVm);
  element=_vrProviderDao.persist(element);
  return element;
}
