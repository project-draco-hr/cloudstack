{
  Date jul2=new Date(12602L * 86400000L);
  String badPattern="HH:mm:ss,SSS HH:mm:ss,SSS";
  SimpleDateFormat simpleFormat=new SimpleDateFormat(badPattern);
  simpleFormat.setTimeZone(GMT);
  DateFormat cachedFormat=new CachedDateFormat(simpleFormat,1000);
  String s=cachedFormat.format(jul2);
  assertEquals("00:00:00,000 00:00:00,000",s);
  jul2.setTime(jul2.getTime() + 120);
  assertEquals("00:00:00,120 00:00:00,120",simpleFormat.format(jul2));
  s=cachedFormat.format(jul2);
  int maxValid=CachedDateFormat.getMaximumCacheValidity(badPattern);
  assertEquals(1,maxValid);
}
