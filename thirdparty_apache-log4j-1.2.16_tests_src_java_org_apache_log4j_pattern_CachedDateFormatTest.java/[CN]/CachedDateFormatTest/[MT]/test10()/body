{
  DateFormat baseFormat=new SimpleDateFormat("MMMM SSS EEEEEE",Locale.US);
  DateFormat cachedFormat=new CachedDateFormat(baseFormat,1000);
  TimeZone cet=TimeZone.getTimeZone("GMT+1");
  cachedFormat.setTimeZone(cet);
  Calendar c=Calendar.getInstance();
  c.set(2004,Calendar.OCTOBER,5,20,0);
  c.set(Calendar.SECOND,37);
  c.set(Calendar.MILLISECOND,23);
  c.setTimeZone(cet);
  String expected=baseFormat.format(c.getTime());
  String s=cachedFormat.format(c.getTime());
  assertEquals(expected,s);
  c.set(2004,Calendar.NOVEMBER,1,0,0);
  c.set(Calendar.MILLISECOND,23);
  expected=baseFormat.format(c.getTime());
  s=cachedFormat.format(c.getTime());
  assertEquals(expected,s);
  c.set(Calendar.MILLISECOND,984);
  expected=baseFormat.format(c.getTime());
  s=cachedFormat.format(c.getTime());
  assertEquals(expected,s);
}
