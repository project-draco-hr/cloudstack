{
  PrimaryDataStoreVO dataStoreVO=dataStoreDao.findPoolByUUID(params.get("uuid"));
  if (dataStoreVO != null) {
    throw new CloudRuntimeException("duplicate uuid: " + params.get("uuid"));
  }
  dataStoreVO=new PrimaryDataStoreVO();
  dataStoreVO.setStorageProviderId(Long.parseLong(params.get("providerId")));
  dataStoreVO.setHostAddress(params.get("server"));
  dataStoreVO.setPath(params.get("path"));
  dataStoreVO.setPoolType(params.get("protocol"));
  dataStoreVO.setPort(Integer.parseInt(params.get("port")));
  dataStoreVO.setName(params.get("name"));
  dataStoreVO.setUuid(params.get("uuid"));
  dataStoreVO=dataStoreDao.persist(dataStoreVO);
  return dataStoreVO;
}
