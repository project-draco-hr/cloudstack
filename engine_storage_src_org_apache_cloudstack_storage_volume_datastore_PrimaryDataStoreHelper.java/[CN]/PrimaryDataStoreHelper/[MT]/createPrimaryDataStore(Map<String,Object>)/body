{
  StoragePoolVO dataStoreVO=dataStoreDao.findPoolByUUID((String)params.get("uuid"));
  if (dataStoreVO != null) {
    throw new CloudRuntimeException("duplicate uuid: " + params.get("uuid"));
  }
  dataStoreVO=new StoragePoolVO();
  dataStoreVO.setStorageProviderId(Long.parseLong((String)params.get("providerId")));
  dataStoreVO.setHostAddress((String)params.get("server"));
  dataStoreVO.setPath((String)params.get("path"));
  dataStoreVO.setPoolType((StoragePoolType)params.get("protocol"));
  dataStoreVO.setPort(Integer.parseInt((String)params.get("port")));
  dataStoreVO.setName((String)params.get("name"));
  dataStoreVO.setUuid((String)params.get("uuid"));
  dataStoreVO=dataStoreDao.persist(dataStoreVO);
  return dataStoreVO;
}
