{
  NetworkOffering guestNtwkOff=_configMgr.getNetworkOffering(network.getNetworkOfferingId());
  if (guestNtwkOff == null) {
    throw new InvalidParameterValueException("Can't find network offering associated with network: " + network.getUuid());
  }
  if (!_ntwkModel.areServicesSupportedByNetworkOffering(guestNtwkOff.getId(),Service.NetworkACL)) {
    throw new InvalidParameterValueException("Cannot apply NetworkACL. Network Offering does not support NetworkACL service");
  }
  network.setNetworkACLId(acl.getId());
  if (_networkDao.update(network.getId(),network)) {
    s_logger.debug("Updated network: " + network.getId() + " with Network ACL Id: "+ acl.getId()+ ", Applying ACL items");
    return applyACLToNetwork(network.getId());
  }
  return false;
}
