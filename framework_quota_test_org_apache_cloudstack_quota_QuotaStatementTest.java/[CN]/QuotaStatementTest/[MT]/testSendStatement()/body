{
  Calendar date=Calendar.getInstance();
  AccountVO accountVO=new AccountVO();
  accountVO.setId(2L);
  accountVO.setDomainId(1L);
  Mockito.when(accountDao.findById(Mockito.anyLong())).thenReturn(accountVO);
  QuotaAccountVO acc=new QuotaAccountVO(2L);
  acc.setQuotaBalance(new BigDecimal(404));
  acc.setLastStatementDate(null);
  List<QuotaAccountVO> accounts=new ArrayList<>();
  accounts.add(acc);
  Mockito.when(quotaAcc.listAllQuotaAccount()).thenReturn(accounts);
  Mockito.when(quotaUsage.findTotalQuotaUsage(Mockito.anyLong(),Mockito.anyLong(),Mockito.anyInt(),Mockito.any(Date.class),Mockito.any(Date.class))).thenReturn(new BigDecimal(100));
  QuotaAlertManagerImpl.DeferredQuotaEmail email=new QuotaAlertManagerImpl.DeferredQuotaEmail(accountVO,acc,new BigDecimal(100),QuotaConfig.QuotaEmailTemplateTypes.QUOTA_LOW);
  Mockito.doCallRealMethod().when(quotaStatement).sendStatement();
  Calendar period[]=quotaStatement.statementTime(date,STATEMENT_PERIODS.MONTHLY);
  if (period != null) {
    Mockito.verify(alertManager,Mockito.times(1)).sendQuotaAlert(email);
  }
}
