{
  if (network.getTrafficType() != TrafficType.Guest) {
    s_logger.warn("Network " + network + " is not of type "+ TrafficType.Guest);
    return false;
  }
  if (!_networkMgr.isVmPartOfNetwork(router.getId(),network.getId())) {
    s_logger.debug("Router " + router + " is not a part of the Guest network "+ network);
    return true;
  }
  boolean result=setupGuestNetwork(network,router,false,isRedundant,_networkMgr.getNicProfile(router,network.getId()),false);
  if (!result) {
    s_logger.warn("Failed to destroy guest network config " + network + " on router "+ router);
    return false;
  }
  result=result && _itMgr.removeVmFromNetwork(router,network);
  if (result) {
    if (result) {
      if (_routerDao.isRouterPartOfGuestNetwork(router.getId(),network.getId())) {
        s_logger.debug("Removing router " + router + " from network"+ network);
        _routerDao.removeRouterFromNetwork(router.getId(),network.getId());
      }
    }
  }
  return result;
}
