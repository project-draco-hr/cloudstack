{
  if (_useNewNetworking) {
    return stopDomainRouter(cmd.getId());
  }
  Long routerId=cmd.getId();
  Account account=UserContext.current().getCaller();
  DomainRouterVO router=_routerDao.findById(routerId);
  if (router == null) {
    throw new InvalidParameterValueException("Unable to find router with id " + routerId);
  }
  if ((account != null) && !_domainDao.isChildDomain(account.getDomainId(),router.getDomainId())) {
    throw new PermissionDeniedException("Unable to stop router with id " + routerId + ". Permission denied");
  }
  boolean success=stopRouter(routerId);
  if (success) {
    return _routerDao.findById(routerId);
  }
  return null;
}
