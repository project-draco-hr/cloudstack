{
  DomainRouterVO router=_routerDao.findById(profile.getId());
  DataCenterVO dcVo=_dcDao.findById(router.getDataCenterId());
  NicProfile controlNic=null;
  if (profile.getHypervisorType() == HypervisorType.VMware && dcVo.getNetworkType() == NetworkType.Basic) {
    for (    NicProfile nic : profile.getNics()) {
      if (nic.getTrafficType() == TrafficType.Guest && nic.getIp4Address() != null) {
        controlNic=nic;
      }
    }
  }
 else {
    for (    NicProfile nic : profile.getNics()) {
      if (nic.getTrafficType() == TrafficType.Control && nic.getIp4Address() != null) {
        controlNic=nic;
      }
    }
  }
  return controlNic;
}
