{
  String password=(String)profile.getParameter(VirtualMachineProfile.Param.VmPassword);
  DataCenterVO dcVo=_dcDao.findById(router.getDataCenterId());
  if (password != null && nic.isDefaultNic()) {
    String encodedPassword=PasswordGenerator.rot13(password);
    if (router.getIsRedundantRouter() && router.getRedundantState() != RedundantState.MASTER) {
      encodedPassword=PasswordGenerator.rot13("saved_password");
    }
    SavePasswordCommand cmd=new SavePasswordCommand(encodedPassword,nic.getIp4Address(),profile.getVirtualMachine().getHostName(),_networkModel.getExecuteInSeqNtwkElmtCmd());
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_IP,getRouterControlIp(router.getId()));
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_GUEST_IP,getRouterIpInNetwork(nic.getNetworkId(),router.getId()));
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_NAME,router.getInstanceName());
    cmd.setAccessDetail(NetworkElementCommand.ZONE_NETWORK_TYPE,dcVo.getNetworkType().toString());
    cmds.addCommand("password",cmd);
  }
}
