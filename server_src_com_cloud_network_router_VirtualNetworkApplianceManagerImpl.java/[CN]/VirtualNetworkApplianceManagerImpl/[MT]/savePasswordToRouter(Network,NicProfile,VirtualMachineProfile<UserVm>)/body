{
  List<DomainRouterVO> routers=_routerDao.findByNetwork(network.getId());
  if (routers.isEmpty()) {
    s_logger.warn("Unable save password, router doesn't exist in network " + network.getId());
    throw new CloudRuntimeException("Unable to save password to router");
  }
  UserVm userVm=profile.getVirtualMachine();
  String password=(String)profile.getParameter(Param.VmPassword);
  String encodedPassword=PasswordGenerator.rot13(password);
  boolean result=true;
  for (  DomainRouterVO router : routers) {
    Commands cmds=new Commands(OnError.Continue);
    SavePasswordCommand cmd=new SavePasswordCommand(encodedPassword,nic.getIp4Address(),userVm.getHostName());
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_IP,router.getPrivateIpAddress());
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_NAME,router.getInstanceName());
    cmds.addCommand("password",cmd);
    result=result && sendCommandsToRouter(router,cmds);
  }
  return result;
}
