{
  List<DomainRouterVO> runningRouters=null;
  if (routers != null) {
    runningRouters=new ArrayList<DomainRouterVO>();
  }
  for (  DomainRouterVO router : routers) {
    boolean skip=false;
    State state=router.getState();
    if (router.getHostId() != null && state != State.Running) {
      HostVO host=_hostDao.findById(router.getHostId());
      if (host == null || host.getState() != Status.Up) {
        skip=true;
      }
    }
    if (!skip) {
      if (state != State.Running) {
        router=startVirtualRouter(router,_accountMgr.getSystemUser(),_accountMgr.getSystemAccount(),params);
      }
      if (router != null) {
        runningRouters.add(router);
      }
    }
  }
  return runningRouters;
}
