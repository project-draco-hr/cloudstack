{
  DomainRouterVO router=profile.getVirtualMachine();
  CheckSshAnswer answer=(CheckSshAnswer)cmds.getAnswer("checkSsh");
  if (answer == null || !answer.getResult()) {
    s_logger.warn("Unable to ssh to the VM: " + answer.getDetails());
    return false;
  }
  GetDomRVersionAnswer versionAnswer=(GetDomRVersionAnswer)cmds.getAnswer("getDomRVersion");
  if (answer == null || !answer.getResult()) {
    s_logger.warn("Unable to get the template/scripts version of router " + router.getInstanceName() + " due to: "+ versionAnswer.getDetails()+ ", but we would continue");
    return true;
  }
  router.setTemplateVersion(versionAnswer.getTemplateVersion());
  router.setScriptsVersion(versionAnswer.getScriptsVersion());
  router=_routerDao.persist(router);
  return true;
}
