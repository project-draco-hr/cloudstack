{
  if (publicNetwork.getTrafficType() != TrafficType.Public) {
    s_logger.warn("Network " + publicNetwork + " is not of type "+ TrafficType.Public);
    return false;
  }
  if (_networkMgr.isVmPartOfNetwork(router.getId(),publicNetwork.getId())) {
    s_logger.debug("Router " + router + " is already part of the Public network "+ publicNetwork);
    return true;
  }
  boolean result=true;
  try {
    NicProfile publicNic=_itMgr.addVmToNetwork(router,publicNetwork);
    if (publicNic != null) {
      if (sourceNatIp != null) {
        IPAddressVO ipVO=_ipAddressDao.findById(sourceNatIp.getId());
        PublicIp publicIp=new PublicIp(ipVO,_vlanDao.findById(ipVO.getVlanId()),NetUtils.createSequenceBasedMacAddress(ipVO.getMacAddress()));
        result=setupPublicNetwork(publicNetwork,router,false,publicIp);
      }
    }
 else {
      result=false;
      s_logger.warn("Failed to add router " + router + " to the public network "+ publicNetwork);
    }
  }
 catch (  Exception ex) {
    s_logger.warn("Failed to add router " + router + " to the public network "+ publicNetwork);
  }
 finally {
    if (!result) {
      s_logger.debug("Removing the router " + router + " from public network "+ publicNetwork+ " as a part of cleanup");
      if (removeRouterFromPublicNetwork(router,publicNetwork)) {
        s_logger.debug("Removed the router " + router + " from public network "+ publicNetwork+ " as a part of cleanup");
      }
 else {
        s_logger.warn("Failed to remove the router " + router + " from public network "+ publicNetwork+ " as a part of cleanup");
      }
    }
  }
  return result;
}
