{
  DomainRouterVO router=_routerDao.findByNetworkConfiguration(network.getId());
  Commands cmds=new Commands(OnError.Continue);
  List<PortForwardingRule> pfs=new ArrayList<PortForwardingRule>();
  for (  FirewallRule fwRule : rules) {
    PortForwardingRule pf=(PortForwardingRule)fwRule;
    pfs.add(pf);
  }
  SetPortForwardingRulesCommand cmd=new SetPortForwardingRulesCommand(pfs);
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_IP,router.getPrivateIpAddress());
  cmd.setAccessDetail(NetworkElementCommand.ROUTER_NAME,router.getInstanceName());
  cmds.addCommand(cmd);
  return sendCommandsToRouter(router,cmds);
}
