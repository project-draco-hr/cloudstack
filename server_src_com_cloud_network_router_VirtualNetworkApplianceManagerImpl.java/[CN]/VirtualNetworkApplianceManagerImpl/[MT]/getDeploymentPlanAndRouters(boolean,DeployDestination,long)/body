{
  final long dcId=dest.getDataCenter().getId();
  List<DomainRouterVO> routers=null;
  DeploymentPlan plan=new DataCenterDeployment(dcId);
  if (isPodBased) {
    final Pod pod=dest.getPod();
    Long podId=null;
    if (pod != null) {
      podId=pod.getId();
    }
 else {
      throw new CloudRuntimeException("Pod id is expected in deployment destination");
    }
    routers=_routerDao.listByNetworkAndPodAndRole(guestNetworkId,podId,Role.VIRTUAL_ROUTER);
    plan=new DataCenterDeployment(dcId,podId,null,null,null,null);
  }
 else {
    routers=_routerDao.listByNetworkAndRole(guestNetworkId,Role.VIRTUAL_ROUTER);
  }
  return new Pair<DeploymentPlan,List<DomainRouterVO>>(plan,routers);
}
