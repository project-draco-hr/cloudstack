{
  DhcpEntryCommand dhcpCommand=new DhcpEntryCommand(nic.getMacAddress(),nic.getIp4Address(),vm.getHostName(),nic.getIp6Address(),_networkModel.getExecuteInSeqNtwkElmtCmd());
  DataCenterVO dcVo=_dcDao.findById(router.getDataCenterId());
  Nic defaultNic=findGatewayIp(vm.getId());
  String gatewayIp=defaultNic.getGateway();
  if (gatewayIp != null && !gatewayIp.equals(nic.getGateway())) {
    gatewayIp="0.0.0.0";
  }
  dhcpCommand.setDefaultRouter(gatewayIp);
  dhcpCommand.setIp6Gateway(nic.getIp6Gateway());
  String ipaddress=null;
  NicVO domrDefaultNic=findDefaultDnsIp(vm.getId());
  if (domrDefaultNic != null) {
    ipaddress=domrDefaultNic.getIp4Address();
  }
  dhcpCommand.setDefaultDns(ipaddress);
  dhcpCommand.setDuid(NetUtils.getDuidLL(nic.getMacAddress()));
  dhcpCommand.setDefault(nic.isDefaultNic());
  dhcpCommand.setAccessDetail(NetworkElementCommand.ROUTER_IP,getRouterControlIp(router.getId()));
  dhcpCommand.setAccessDetail(NetworkElementCommand.ROUTER_NAME,router.getInstanceName());
  dhcpCommand.setAccessDetail(NetworkElementCommand.ROUTER_GUEST_IP,getRouterIpInNetwork(nic.getNetworkId(),router.getId()));
  dhcpCommand.setAccessDetail(NetworkElementCommand.ZONE_NETWORK_TYPE,dcVo.getNetworkType().toString());
  cmds.addCommand("dhcp",dhcpCommand);
}
