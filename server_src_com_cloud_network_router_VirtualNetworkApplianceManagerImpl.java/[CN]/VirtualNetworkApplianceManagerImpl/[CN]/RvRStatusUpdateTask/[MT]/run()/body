{
  while (true) {
    try {
      Long networkId=_vrUpdateQueue.take();
      List<DomainRouterVO> routers=_routerDao.listByNetworkAndRole(networkId,Role.VIRTUAL_ROUTER);
      if (routers.size() != 2) {
        continue;
      }
      DomainRouterVO router=routers.get(0);
      if (routers.get(1).getId() < router.getId()) {
        router=routers.get(1);
      }
      HostVO host=_hostDao.findById(router.getHostId());
      if (host == null || host.getManagementServerId() == null || host.getManagementServerId() != ManagementServerNode.getManagementServerId()) {
        continue;
      }
      updateRoutersRedundantState(routers);
      checkDuplicateMaster(routers);
      checkSanity(routers);
    }
 catch (    Exception ex) {
      s_logger.error("Fail to complete the RvRStatusUpdateTask! ",ex);
    }
  }
}
