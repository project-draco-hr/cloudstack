{
  while (true) {
    try {
      Long networkId=_vrUpdateQueue.take();
      List<DomainRouterVO> routers=_routerDao.listByNetworkAndRole(networkId,Role.VIRTUAL_ROUTER);
      if (routers.size() != 2) {
        continue;
      }
      DomainRouterVO router0=routers.get(0);
      DomainRouterVO router1=routers.get(1);
      DomainRouterVO router=router0;
      if ((router0.getId() < router1.getId()) && router0.getHostId() != null) {
        router=router0;
      }
 else {
        router=router1;
      }
      if (router.getHostId() == null) {
        s_logger.debug("Skip router pair (" + router0.getInstanceName() + ","+ router1.getInstanceName()+ ") due to can't find host");
        continue;
      }
      HostVO host=_hostDao.findById(router.getHostId());
      if (host == null || host.getManagementServerId() == null || host.getManagementServerId() != ManagementServerNode.getManagementServerId()) {
        s_logger.debug("Skip router pair (" + router0.getInstanceName() + ","+ router1.getInstanceName()+ ") due to not belong to this mgmt server");
        continue;
      }
      updateRoutersRedundantState(routers);
      checkDuplicateMaster(routers);
      checkSanity(routers);
    }
 catch (    Exception ex) {
      s_logger.error("Fail to complete the RvRStatusUpdateTask! ",ex);
    }
  }
}
