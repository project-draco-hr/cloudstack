{
  CreateCmdResult result=new CreateCmdResult("",null);
  if (!data.getUri().startsWith("http")) {
    result.setResult("can't register an image which is not a http link");
    callback.complete(result);
    return;
  }
  if (data.getSize() == null && data.getType() == DataObjectType.TEMPLATE) {
    EndPoint ep=selector.select(data);
    if (ep == null) {
      result.setResult("can't find storage client for:" + data.getId() + ","+ data.getType());
      callback.complete(result);
      return;
    }
    CreateObjectCommand createCmd=new CreateObjectCommand(data.getUri());
    CreateObjectAnswer answer=(CreateObjectAnswer)ep.sendMessage(createCmd);
    if (answer.getResult()) {
      result=new CreateCmdResult(answer.getPath(),answer.getSize());
    }
 else {
      result.setResult(answer.getDetails());
    }
  }
  callback.complete(result);
}
