{
  String mountPoint=pool.getPath();
  if (!_storageLayer.exists(mountPoint)) {
    return null;
  }
  LibvirtStoragePoolDef spd=new LibvirtStoragePoolDef(poolType.DIR,pool.getUuid(),pool.getUuid(),pool.getHost(),pool.getPath(),pool.getPath());
  StoragePool sp=null;
  try {
    addStoragePool(pool.getUuid());
synchronized (getStoragePool(pool.getUuid())) {
      sp=conn.storagePoolDefineXML(spd.toString(),0);
      sp.create(0);
    }
    return sp;
  }
 catch (  LibvirtException e) {
    s_logger.debug(e.toString());
    if (sp != null) {
      try {
        sp.undefine();
        sp.free();
      }
 catch (      LibvirtException l) {
        s_logger.debug("Failed to define shared mount point storage pool with: " + l.toString());
      }
    }
    return null;
  }
}
