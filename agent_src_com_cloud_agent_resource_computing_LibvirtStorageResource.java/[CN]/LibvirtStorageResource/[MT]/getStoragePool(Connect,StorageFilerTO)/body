{
  StoragePool sp=null;
  try {
    sp=conn.storagePoolLookupByUUIDString(spt.getUuid());
  }
 catch (  LibvirtException e) {
  }
  if (sp == null) {
    if (spt.getType() == StoragePoolType.NetworkFilesystem) {
      sp=createNfsStoragePool(conn,spt);
    }
 else     if (spt.getType() == StoragePoolType.SharedMountPoint) {
      sp=CreateSharedStoragePool(conn,spt);
    }
    if (sp == null) {
      s_logger.debug("Failed to create storage Pool");
      return null;
    }
  }
  try {
    StoragePoolInfo spi=sp.getInfo();
    if (spi.state != StoragePoolState.VIR_STORAGE_POOL_RUNNING) {
      sp.create(0);
    }
  }
 catch (  LibvirtException e) {
  }
  if (spt.getType() == StoragePoolType.NetworkFilesystem) {
    KVMHABase.NfsStoragePool pool=new KVMHABase.NfsStoragePool(spt.getUuid(),spt.getHost(),spt.getPath(),_mountPoint + File.separator + spt.getUuid(),PoolType.PrimaryStorage);
    _monitor.addStoragePool(pool);
  }
  addStoragePool(spt.getUuid());
  return sp;
}
