{
  try {
    DownloadAnswer answer=(DownloadAnswer)sendMessage(cmd);
    Answer[] answers=new Answer[1];
    answers[0]=answer;
    listener.processAnswers(getId(),0,answers);
    if (listener instanceof DownloadListener) {
      DownloadListener dwldListener=(DownloadListener)listener;
      dwldListener.getCallback().complete(answer);
    }
  }
 catch (  Exception ex) {
    DownloadAnswer fail=new DownloadAnswer("Error in handling DownloadCommand : " + ex.getMessage(),VMTemplateStorageResourceAssoc.Status.DOWNLOAD_ERROR);
    Answer[] answers=new Answer[1];
    answers[0]=fail;
    listener.processAnswers(getId(),0,answers);
    if (listener instanceof DownloadListener) {
      DownloadListener dwldListener=(DownloadListener)listener;
      dwldListener.getCallback().complete(fail);
    }
  }
}
