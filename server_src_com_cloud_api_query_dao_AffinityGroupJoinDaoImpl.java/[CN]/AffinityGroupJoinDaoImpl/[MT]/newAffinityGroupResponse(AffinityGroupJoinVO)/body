{
  AffinityGroupResponse agResponse=new AffinityGroupResponse();
  agResponse.setId(vag.getUuid());
  agResponse.setName(vag.getName());
  agResponse.setDescription(vag.getDescription());
  ApiResponseHelper.populateOwner(agResponse,vag);
  long instanceId=vag.getVmId();
  if (instanceId > 0) {
    UserVmResponse resp=new UserVmResponse();
    resp.setObjectName("virtualmachine");
    resp.setId(vag.getVmUuid());
    resp.setName(vag.getVmName());
    resp.setDisplayName(vag.getVmDisplayName());
    resp.setState(vag.getVmState().toString());
    agResponse.addVM(resp);
  }
  agResponse.setObjectName("affinitygroup");
  return agResponse;
}
