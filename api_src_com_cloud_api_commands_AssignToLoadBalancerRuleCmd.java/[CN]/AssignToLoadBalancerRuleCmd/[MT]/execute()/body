{
  if (virtualMachineIds == null && virtualMachineId == null) {
    throw new InvalidParameterValueException("Must specify virtual machine id");
  }
  if (virtualMachineIds == null) {
    virtualMachineIds=new ArrayList<Long>();
  }
  if (virtualMachineId != null) {
    virtualMachineIds.add(virtualMachineId);
  }
  boolean result=_lbService.assignToLoadBalancer(getLoadBalancerId(),virtualMachineIds);
  if (result) {
    SuccessResponse response=new SuccessResponse(getName());
    this.setResponseObject(response);
  }
 else {
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"Failed to assign load balancer rule");
  }
}
