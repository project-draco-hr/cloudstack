{
  if (ocs != null && ocs.length > 0) {
    for (    ObjectContent oc : ocs) {
      String vmNameInvCenter=null;
      String vmInternalCSName=null;
      List<DynamicProperty> objProps=oc.getPropSet();
      if (objProps != null) {
        for (        DynamicProperty objProp : objProps) {
          if (objProp.getName().equals("name")) {
            vmNameInvCenter=(String)objProp.getVal();
          }
          VirtualMachineMO vmMo=new VirtualMachineMO(context,oc.getObj());
          try {
            vmInternalCSName=vmMo.getCustomFieldValue(CustomFieldConstants.CLOUD_VM_INTERNAL_NAME);
          }
 catch (          Exception e) {
            s_logger.error("Unable to retrieve custom field value for internal VM name");
          }
          if ((vmNameInvCenter != null && name.equalsIgnoreCase(vmNameInvCenter)) || (vmInternalCSName != null && name.equalsIgnoreCase(vmInternalCSName))) {
            return vmMo;
          }
        }
      }
    }
  }
  return null;
}
