{
  ClusterVO cluster=findById(clusterId);
  if (cluster == null || cluster.getAllocationState() != Grouping.AllocationState.Enabled) {
    return false;
  }
  List<HostVO> hosts=hostDao.findByClusterId(clusterId);
  if (hosts == null) {
    return false;
  }
  Map<Long,String> mapSupportsResign=hostDetailsDao.findDetails("supportsResign");
  for (  HostVO host : hosts) {
    if (host == null) {
      return false;
    }
    String value=mapSupportsResign.get(host.getId());
    if (Boolean.parseBoolean(value) == false) {
      return false;
    }
  }
  return true;
}
