{
  when(this.mockVpcDao.acquireInLockTable(VPC_ID)).thenReturn(null);
  try {
    this.deployment.lock();
  }
  finally {
    verify(this.mockVpcDao,times(1)).acquireInLockTable(VPC_ID);
    assertNull(this.deployment.tableLockId);
  }
}
