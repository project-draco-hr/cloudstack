{
  String responseName=null;
  Class<?> cmdClass=null;
  String responseText=null;
  try {
    if (apiCommandParams == null || apiCommandParams.isEmpty()) {
      responseName="errorresponse";
    }
 else {
      final Object cmdObj=apiCommandParams.get(ApiConstants.COMMAND);
      if (cmdObj != null) {
        final String cmdName=((String[])cmdObj)[0];
        cmdClass=getCmdClass(cmdName);
        if (cmdClass != null) {
          responseName=((BaseCmd)cmdClass.newInstance()).getCommandName();
        }
 else {
          responseName="errorresponse";
        }
      }
    }
    final ExceptionResponse apiResponse=new ExceptionResponse();
    apiResponse.setErrorCode(errorCode);
    apiResponse.setErrorText(errorText);
    apiResponse.setResponseName(responseName);
    SerializationContext.current().setUuidTranslation(true);
    responseText=ApiResponseSerializer.toSerializedString(apiResponse,responseType);
  }
 catch (  final Exception e) {
    logger.error("Exception responding to http request",e);
  }
  return responseText;
}
