{
  try {
    resp.setStatusCode(isError ? HttpStatus.SC_INTERNAL_SERVER_ERROR : HttpStatus.SC_OK);
    BasicHttpEntity body=new BasicHttpEntity();
    if (BaseCmd.RESPONSE_TYPE_JSON.equalsIgnoreCase(responseType)) {
      body.setContentType("text/javascript; charset=UTF-8");
      if (responseText == null) {
        body.setContent(new ByteArrayInputStream("{ \"error\" : { \"description\" : \"Internal Server Error\" } }".getBytes()));
      }
    }
 else {
      body.setContentType("text/xml; charset=UTF-8");
      if (responseText == null) {
        body.setContent(new ByteArrayInputStream("<error>Internal Server Error</error>".getBytes()));
      }
    }
    if (responseText != null) {
      body.setContent(new ByteArrayInputStream(responseText.getBytes()));
    }
    resp.setEntity(body);
  }
 catch (  Exception ex) {
    s_logger.error("error!",ex);
  }
}
