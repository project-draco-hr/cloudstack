{
  if (cmdObj instanceof BaseAsyncCmd) {
    BaseAsyncCmd asyncCmd=(BaseAsyncCmd)cmdObj;
    Gson gson=GsonHelper.getBuilder().create();
    AsyncJobVO job=new AsyncJobVO();
    job.setUserId(UserContext.current().getUserId());
    job.setCmd(cmdObj.getClass().getName());
    job.setCmdInfo(gson.toJson(params));
    long jobId=_asyncMgr.submitAsyncJob(job);
    return asyncCmd.getResponse(jobId);
  }
 else {
    _dispatcher.dispatch(cmdObj,params);
    return cmdObj.getResponse();
  }
}
