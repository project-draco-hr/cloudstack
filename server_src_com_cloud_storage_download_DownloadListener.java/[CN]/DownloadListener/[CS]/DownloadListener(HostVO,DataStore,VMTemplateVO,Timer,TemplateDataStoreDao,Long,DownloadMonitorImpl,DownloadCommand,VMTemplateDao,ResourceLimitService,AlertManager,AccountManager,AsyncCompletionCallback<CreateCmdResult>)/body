{
  this.ssAgent=ssAgent;
  this.sstore=store;
  this.template=template;
  this._vmTemplateStoreDao=dao;
  this.downloadMonitor=downloadMonitor;
  this.cmd=cmd;
  this.templateStoreId=templStoreId;
  initStateMachine();
  this.currState=getState(Status.NOT_DOWNLOADED.toString());
  this.timer=_timer;
  this.timeoutTask=new TimeoutTask(this);
  this.timer.schedule(timeoutTask,3 * STATUS_POLL_INTERVAL);
  this._vmTemplateDao=templateDao;
  this._resourceLimitMgr=_resourceLimitMgr;
  this._accountMgr=_accountMgr;
  this._alertMgr=_alertMgr;
  this.callback=callback;
  updateDatabase(Status.NOT_DOWNLOADED,"");
}
