{
  this._ssAgent=ssAgent;
  this._sstore=store;
  this._template=template;
  this._vmTemplateStoreDao=dao;
  this._downloadMonitor=downloadMonitor;
  this._cmd=cmd;
  this._templateStoreId=templStoreId;
  initStateMachine();
  this._currState=getState(Status.NOT_DOWNLOADED.toString());
  this._timer=_timer;
  this._timeoutTask=new TimeoutTask(this);
  this._timer.schedule(_timeoutTask,3 * STATUS_POLL_INTERVAL);
  this._vmTemplateDao=templateDao;
  this._resourceLimitMgr=_resourceLimitMgr;
  this._accountMgr=_accountMgr;
  this._alertMgr=_alertMgr;
  this._callback=callback;
  updateDatabase(Status.NOT_DOWNLOADED,"");
}
