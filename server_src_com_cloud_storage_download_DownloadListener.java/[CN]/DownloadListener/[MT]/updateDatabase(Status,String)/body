{
  if (_template != null) {
    VMTemplateHostVO vo=_vmTemplateHostDao.createForUpdate();
    vo.setDownloadState(state);
    vo.setLastUpdated(new Date());
    vo.setErrorString(errorString);
    _vmTemplateHostDao.update(getTemplateHostId(),vo);
  }
 else {
    VolumeHostVO vo=_volumeHostDao.createForUpdate();
    vo.setDownloadState(state);
    vo.setLastUpdated(new Date());
    vo.setErrorString(errorString);
    _volumeHostDao.update(getVolumeHostId(),vo);
  }
}
