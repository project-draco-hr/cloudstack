{
  List<EndPoint> endPoints=vol.getDataStore().getEndPoints();
  int retries=3;
  VolumeInfo volInfo=vol;
  CreateVolumeCommand createCmd=new CreateVolumeCommand(new VolumeTO(volInfo));
  Answer answer=null;
  int i=0;
  boolean result=false;
  for (  EndPoint ep : endPoints) {
    answer=ep.sendMessage(createCmd);
    if (answer == null) {
      if (i < retries) {
        s_logger.debug("create volume failed, retrying: " + i);
      }
      i++;
    }
 else {
      CreateVolumeAnswer volAnswer=(CreateVolumeAnswer)answer;
      vol.setPath(volAnswer.getVolumeUuid());
      result=true;
    }
  }
  return result;
}
