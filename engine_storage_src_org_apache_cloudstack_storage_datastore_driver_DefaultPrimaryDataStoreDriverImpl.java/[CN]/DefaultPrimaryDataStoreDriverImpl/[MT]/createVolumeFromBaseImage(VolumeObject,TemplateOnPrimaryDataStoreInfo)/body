{
  VolumeTO vol=new VolumeTO(volume);
  ImageOnPrimayDataStoreTO image=new ImageOnPrimayDataStoreTO(template);
  CreateVolumeFromBaseImageCommand cmd=new CreateVolumeFromBaseImageCommand(vol,image);
  List<EndPoint> endPoints=template.getPrimaryDataStore().getEndPoints();
  Answer answer=sendOutCommand(cmd,endPoints);
  if (answer == null || answer.getDetails() != null) {
    if (answer == null) {
      throw new CloudRuntimeException("Failed to created volume");
    }
 else {
      throw new CloudRuntimeException(answer.getDetails());
    }
  }
 else {
    CreateVolumeAnswer volAnswer=(CreateVolumeAnswer)answer;
    volume.setPath(volAnswer.getVolumeUuid());
    return true;
  }
}
