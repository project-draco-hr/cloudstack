{
  if (nic.getBroadcastType() != Networks.BroadcastDomainType.Vswitch) {
    return true;
  }
  if (nic.getTrafficType() != Networks.TrafficType.Guest) {
    return true;
  }
  _ovsVlanMgr.VmCheckAndCreateTunnel(vm,dest);
  String command=_ovsVlanMgr.applyDefaultFlow(vm.getVirtualMachine(),dest);
  if (command != null) {
    nic.setBroadcastUri(BroadcastDomainType.Vswitch.toUri(command));
  }
  _ovsTunnelMgr.VmCheckAndCreateTunnel(vm,network,dest);
  return true;
}
