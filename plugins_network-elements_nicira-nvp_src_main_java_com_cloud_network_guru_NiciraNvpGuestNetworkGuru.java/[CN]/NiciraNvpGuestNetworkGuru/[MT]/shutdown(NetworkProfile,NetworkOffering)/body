{
  final NetworkVO networkObject=networkDao.findById(profile.getId());
  if (networkObject.getBroadcastDomainType() != BroadcastDomainType.Lswitch || networkObject.getBroadcastUri() == null) {
    s_logger.warn("BroadcastUri is empty or incorrect for guestnetwork " + networkObject.getDisplayText());
    return;
  }
  final List<NiciraNvpDeviceVO> devices=niciraNvpDao.listByPhysicalNetwork(networkObject.getPhysicalNetworkId());
  if (devices.isEmpty()) {
    s_logger.error("No NiciraNvp Controller on physical network " + networkObject.getPhysicalNetworkId());
    return;
  }
  final NiciraNvpDeviceVO niciraNvpDevice=devices.get(0);
  final HostVO niciraNvpHost=hostDao.findById(niciraNvpDevice.getHostId());
  final DeleteLogicalSwitchCommand cmd=new DeleteLogicalSwitchCommand(BroadcastDomainType.getValue(networkObject.getBroadcastUri()));
  final DeleteLogicalSwitchAnswer answer=(DeleteLogicalSwitchAnswer)agentMgr.easySend(niciraNvpHost.getId(),cmd);
  if (answer == null || !answer.getResult()) {
    s_logger.error("DeleteLogicalSwitchCommand failed");
  }
  super.shutdown(profile,offering);
}
