{
  Account caller=UserContext.current().getCaller();
  PrivateGateway gateway=getVpcPrivateGateway(gatewayId);
  if (gateway == null) {
    throw new InvalidParameterValueException("Invalid gateway id is given");
  }
  Vpc vpc=getActiveVpc(gateway.getVpcId());
  if (vpc == null) {
    throw new InvalidParameterValueException("Can't add static route to VPC that is being deleted");
  }
  _accountMgr.checkAccess(caller,null,false,vpc);
  if (!NetUtils.isValidCIDR(cidr)) {
    throw new InvalidParameterValueException("Invalid format for cidr " + cidr);
  }
  Transaction txn=Transaction.currentTxn();
  txn.start();
  StaticRouteVO newRoute=new StaticRouteVO(gateway.getId(),cidr,vpc.getId(),vpc.getAccountId(),vpc.getDomainId());
  s_logger.debug("Adding static route " + newRoute);
  newRoute=_staticRouteDao.persist(newRoute);
  detectRoutesConflict(newRoute);
  if (!_staticRouteDao.setStateToAdd(newRoute)) {
    throw new CloudRuntimeException("Unable to update the state to add for " + newRoute);
  }
  UserContext.current().setEventDetails("Static route Id: " + newRoute.getId());
  txn.commit();
  return newRoute;
}
