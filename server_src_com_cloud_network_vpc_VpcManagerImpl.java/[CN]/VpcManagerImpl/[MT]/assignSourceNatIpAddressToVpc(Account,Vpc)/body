{
  long dcId=vpc.getZoneId();
  IPAddressVO sourceNatIp=getExistingSourceNatInVpc(owner.getId(),vpc.getId());
  PublicIp ipToReturn=null;
  if (sourceNatIp != null) {
    ipToReturn=new PublicIp(sourceNatIp,_vlanDao.findById(sourceNatIp.getVlanId()),NetUtils.createSequenceBasedMacAddress(sourceNatIp.getMacAddress()));
  }
 else {
    ipToReturn=_ntwkMgr.assignDedicateIpAddress(owner,null,vpc.getId(),dcId,true);
  }
  return ipToReturn;
}
