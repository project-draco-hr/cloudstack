{
  HashMap<String,List<VmDiskStatsEntry>> vmResponseMap=new HashMap<String,List<VmDiskStatsEntry>>();
  for (  String vmUUID : vmUUIDs) {
    vmResponseMap.put(vmUUID,new ArrayList<VmDiskStatsEntry>());
  }
  try {
    for (    String vmUUID : vmUUIDs) {
      VM vm=VM.getByUuid(conn,vmUUID);
      List<VmDiskStatsEntry> vmDiskStats=new ArrayList<VmDiskStatsEntry>();
      for (      VBD vbd : vm.getVBDs(conn)) {
        if (!vbd.getType(conn).equals(Types.VbdType.CD)) {
          VmDiskStatsEntry stats=new VmDiskStatsEntry();
          VBDMetrics record=vbd.getMetrics(conn);
          stats.setPath(vbd.getVDI(conn).getUuid(conn));
          stats.setBytesRead((long)(record.getIoReadKbs(conn) * 1024));
          stats.setBytesWrite((long)(record.getIoWriteKbs(conn) * 1024));
          vmDiskStats.add(stats);
        }
      }
      vmResponseMap.put(vmUUID,vmDiskStats);
    }
  }
 catch (  Exception e) {
    s_logger.warn("Error while collecting disk stats from : ",e);
    return null;
  }
  return vmResponseMap;
}
