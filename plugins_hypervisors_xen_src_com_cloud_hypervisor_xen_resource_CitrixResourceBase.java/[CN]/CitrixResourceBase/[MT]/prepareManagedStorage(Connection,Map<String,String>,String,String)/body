{
  String iScsiName=details.get(DiskTO.IQN);
  String storageHost=details.get(DiskTO.STORAGE_HOST);
  String chapInitiatorUsername=details.get(DiskTO.CHAP_INITIATOR_USERNAME);
  String chapInitiatorSecret=details.get(DiskTO.CHAP_INITIATOR_SECRET);
  Long volumeSize=Long.parseLong(details.get(DiskTO.VOLUME_SIZE));
  SR sr=getIscsiSR(conn,iScsiName,storageHost,iScsiName,chapInitiatorUsername,chapInitiatorSecret,true);
  VDI vdi=getVDIbyUuid(conn,path,false);
  if (vdi == null) {
    vdi=createVdi(sr,vdiNameLabel,volumeSize);
  }
  return vdi;
}
