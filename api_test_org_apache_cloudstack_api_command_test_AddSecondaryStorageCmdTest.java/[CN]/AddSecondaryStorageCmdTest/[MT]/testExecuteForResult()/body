{
  StorageService resourceService=Mockito.mock(StorageService.class);
  addImageStoreCmd._storageService=resourceService;
  ImageStore store=Mockito.mock(ImageStore.class);
  Mockito.when(resourceService.discoverImageStore(addImageStoreCmd)).thenReturn(store);
  ResponseGenerator responseGenerator=Mockito.mock(ResponseGenerator.class);
  addImageStoreCmd._responseGenerator=responseGenerator;
  ImageStoreResponse responseHost=new ImageStoreResponse();
  responseHost.setName("Test");
  Mockito.when(responseGenerator.createImageStoreResponse(store)).thenReturn(responseHost);
  addImageStoreCmd.execute();
  Mockito.verify(responseGenerator).createImageStoreResponse(store);
  ImageStoreResponse actualResponse=(ImageStoreResponse)addImageStoreCmd.getResponseObject();
  Assert.assertEquals(responseHost,actualResponse);
  Assert.assertEquals("addimagestoreresponse",actualResponse.getResponseName());
}
