{
  List<SecurityGroupResultObject> groupResultObjs=SecurityGroupResultObject.transposeNetworkGroups(networkGroups);
  ListResponse<SecurityGroupResponse> response=new ListResponse<SecurityGroupResponse>();
  List<SecurityGroupResponse> netGrpResponses=new ArrayList<SecurityGroupResponse>();
  for (  SecurityGroupResultObject networkGroup : groupResultObjs) {
    SecurityGroupResponse netGrpResponse=new SecurityGroupResponse();
    netGrpResponse.setId(networkGroup.getId());
    netGrpResponse.setName(networkGroup.getName());
    netGrpResponse.setDescription(networkGroup.getDescription());
    populateOwner(netGrpResponse,networkGroup);
    List<IngressRuleResultObject> ingressRules=networkGroup.getIngressRules();
    if ((ingressRules != null) && !ingressRules.isEmpty()) {
      List<IngressRuleResponse> ingressRulesResponse=new ArrayList<IngressRuleResponse>();
      for (      IngressRuleResultObject ingressRule : ingressRules) {
        IngressRuleResponse ingressData=new IngressRuleResponse();
        ingressData.setRuleId(ingressRule.getId());
        ingressData.setProtocol(ingressRule.getProtocol());
        if ("icmp".equalsIgnoreCase(ingressRule.getProtocol())) {
          ingressData.setIcmpType(ingressRule.getStartPort());
          ingressData.setIcmpCode(ingressRule.getEndPort());
        }
 else {
          ingressData.setStartPort(ingressRule.getStartPort());
          ingressData.setEndPort(ingressRule.getEndPort());
        }
        if (ingressRule.getAllowedSecurityGroup() != null) {
          ingressData.setSecurityGroupName(ingressRule.getAllowedSecurityGroup());
          ingressData.setAccountName(ingressRule.getAllowedSecGroupAcct());
        }
 else {
          ingressData.setCidr(ingressRule.getAllowedSourceIpCidr());
        }
        ingressData.setObjectName("ingressrule");
        ingressRulesResponse.add(ingressData);
      }
      netGrpResponse.setIngressRules(ingressRulesResponse);
    }
    netGrpResponse.setObjectName("securitygroup");
    netGrpResponses.add(netGrpResponse);
  }
  response.setResponses(netGrpResponses);
  return response;
}
