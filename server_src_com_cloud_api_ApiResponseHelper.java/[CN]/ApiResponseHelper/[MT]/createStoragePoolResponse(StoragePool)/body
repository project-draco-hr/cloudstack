{
  StoragePoolResponse poolResponse=new StoragePoolResponse();
  poolResponse.setId(pool.getUuid());
  poolResponse.setName(pool.getName());
  poolResponse.setState(pool.getStatus());
  poolResponse.setPath(pool.getPath());
  poolResponse.setIpAddress(pool.getHostAddress());
  DataCenter zone=ApiDBUtils.findZoneById(pool.getDataCenterId());
  if (zone != null) {
    poolResponse.setZoneId(zone.getUuid());
    poolResponse.setZoneName(zone.getName());
  }
  if (pool.getPoolType() != null) {
    poolResponse.setType(pool.getPoolType().toString());
  }
  if (pool.getPodId() != null) {
    HostPodVO pod=ApiDBUtils.findPodById(pool.getPodId());
    if (pod != null) {
      poolResponse.setPodId(pod.getUuid());
      poolResponse.setPodName(pod.getName());
    }
  }
  if (pool.getCreated() != null) {
    poolResponse.setCreated(pool.getCreated());
  }
  StorageStats stats=ApiDBUtils.getStoragePoolStatistics(pool.getId());
  long allocatedSize=ApiDBUtils.getStorageCapacitybyPool(pool.getId(),Capacity.CAPACITY_TYPE_STORAGE_ALLOCATED);
  poolResponse.setDiskSizeTotal(pool.getCapacityBytes());
  poolResponse.setDiskSizeAllocated(allocatedSize);
  if (stats != null) {
    Long used=stats.getByteUsed();
    poolResponse.setDiskSizeUsed(used);
  }
  if (pool.getClusterId() != null) {
    ClusterVO cluster=ApiDBUtils.findClusterById(pool.getClusterId());
    poolResponse.setClusterId(cluster.getUuid());
    poolResponse.setClusterName(cluster.getName());
  }
  poolResponse.setTags(ApiDBUtils.getStoragePoolTags(pool.getId()));
  poolResponse.setObjectName("storagepool");
  return poolResponse;
}
