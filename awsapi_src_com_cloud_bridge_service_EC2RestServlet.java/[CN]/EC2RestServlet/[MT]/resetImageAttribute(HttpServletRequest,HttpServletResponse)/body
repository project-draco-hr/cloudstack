{
  EC2ModifyImageAttribute ec2request=new EC2ModifyImageAttribute();
  String[] imageId=request.getParameterValues("ImageId");
  if (imageId != null && imageId.length > 0)   ec2request.setImageId(imageId[0]);
 else {
    response.sendError(530,"Missing ImageId parameter");
    return;
  }
  String[] attribute=request.getParameterValues("Attribute");
  if (attribute != null && attribute.length > 0) {
    if (attribute[0].equalsIgnoreCase("launchPermission"))     ec2request.setAttribute(ImageAttribute.launchPermission);
 else {
      response.sendError(501,"Unsupported Attribute - only launchPermission supported");
      return;
    }
  }
 else {
    response.sendError(530,"Missing Attribute parameter");
    return;
  }
  EC2ImageLaunchPermission launchPermission=new EC2ImageLaunchPermission();
  launchPermission.setLaunchPermOp(EC2ImageLaunchPermission.Operation.reset);
  ec2request.addLaunchPermission(launchPermission);
  ResetImageAttributeResponse EC2response=EC2SoapServiceImpl.toResetImageAttributeResponse(ServiceProvider.getInstance().getEC2Engine().modifyImageAttribute(ec2request));
  serializeResponse(response,EC2response);
}
