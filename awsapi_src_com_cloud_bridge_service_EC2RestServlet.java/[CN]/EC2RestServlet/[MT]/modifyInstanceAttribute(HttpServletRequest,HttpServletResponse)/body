{
  EC2ModifyInstanceAttribute ec2Request=new EC2ModifyInstanceAttribute();
  String[] instanceId=request.getParameterValues("InstanceId");
  if (instanceId != null && instanceId.length > 0)   ec2Request.setInstanceId(instanceId[0]);
 else {
    throw new EC2ServiceException(ClientError.MissingParamter,"Missing required parameter - InstanceId");
  }
  String[] instanceType=request.getParameterValues("InstanceType.Value");
  String[] userData=request.getParameterValues("UserData.Value");
  if (instanceType != null && userData != null) {
    throw new EC2ServiceException(ClientError.InvalidParameterCombination,"Only one attribute can be" + " specified at a time");
  }
  if (instanceType != null && instanceType.length > 0) {
    ec2Request.setInstanceType(instanceType[0]);
  }
 else   if (userData != null && userData.length > 0) {
    ec2Request.setUserData(userData[0]);
  }
 else {
    throw new EC2ServiceException(ClientError.MissingParamter,"Missing parameter - InstanceType/UserData should be provided");
  }
  ModifyInstanceAttributeResponse EC2response=EC2SoapServiceImpl.toModifyInstanceAttributeResponse(ServiceProvider.getInstance().getEC2Engine().modifyInstanceAttribute(ec2Request));
  serializeResponse(response,EC2response);
}
