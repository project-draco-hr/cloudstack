{
  VolumeObjectTO volume=(VolumeObjectTO)cmd.getData();
  PrimaryDataStoreTO primaryStore=(PrimaryDataStoreTO)volume.getDataStore();
  KVMStoragePool primaryPool=null;
  KVMPhysicalDisk vol=null;
  long disksize;
  try {
    primaryPool=storagePoolMgr.getStoragePool(primaryStore.getPoolType(),primaryStore.getUuid());
    disksize=volume.getSize();
    vol=primaryPool.createPhysicalDisk(volume.getUuid(),volume.getProvisioningType(),disksize);
    VolumeObjectTO newVol=new VolumeObjectTO();
    newVol.setPath(vol.getName());
    newVol.setSize(volume.getSize());
    if (primaryPool.getType() == StoragePoolType.RBD) {
      newVol.setFormat(ImageFormat.RAW);
    }
    return new CreateObjectAnswer(newVol);
  }
 catch (  Exception e) {
    s_logger.debug("Failed to create volume: " + e.toString());
    return new CreateObjectAnswer(e.toString());
  }
}
