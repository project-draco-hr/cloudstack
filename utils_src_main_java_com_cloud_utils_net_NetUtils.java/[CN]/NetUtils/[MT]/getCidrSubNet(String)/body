{
  if (cidr == null || cidr.isEmpty()) {
    return null;
  }
  final String[] cidrPair=cidr.split("\\/");
  if (cidrPair.length != 2) {
    return null;
  }
  final String cidrAddress=cidrPair[0];
  final String cidrSize=cidrPair[1];
  if (!isValidIp(cidrAddress)) {
    return null;
  }
  long cidrSizeNum=-1;
  try {
    cidrSizeNum=Integer.parseInt(cidrSize);
  }
 catch (  final NumberFormatException e) {
    throw new CloudRuntimeException("cidrsize is not valid",e);
  }
  final long numericNetmask=(long)0xffffffff >> MAX_CIDR - cidrSizeNum << MAX_CIDR - cidrSizeNum;
  final String netmask=NetUtils.long2Ip(numericNetmask);
  return getSubNet(cidrAddress,netmask);
}
