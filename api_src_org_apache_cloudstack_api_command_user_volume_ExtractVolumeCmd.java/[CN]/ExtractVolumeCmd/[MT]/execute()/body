{
  try {
    UserContext.current().setEventDetails("Volume Id: " + getId());
    Long uploadId=_mgr.extractVolume(this);
    if (uploadId != null) {
      Upload uploadInfo=_entityMgr.findById(Upload.class,uploadId);
      ExtractResponse response=new ExtractResponse();
      response.setResponseName(getCommandName());
      response.setObjectName("volume");
      Volume vol=_entityMgr.findById(Volume.class,id);
      response.setId(vol.getUuid());
      response.setName(vol.getName());
      DataCenter zone=_entityMgr.findById(DataCenter.class,zoneId);
      response.setZoneId(zone.getUuid());
      response.setZoneName(zone.getName());
      response.setMode(mode);
      response.setUploadId(uploadInfo.getUuid());
      response.setState(uploadInfo.getUploadState().toString());
      Account account=_entityMgr.findById(Account.class,getEntityOwnerId());
      response.setAccountId(account.getUuid());
      response.setUrl(uploadInfo.getUploadUrl());
      this.setResponseObject(response);
    }
 else {
      throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"Failed to extract volume");
    }
  }
 catch (  URISyntaxException ex) {
    s_logger.info(ex);
    throw new ServerApiException(BaseCmd.PARAM_ERROR,ex.getMessage());
  }
}
