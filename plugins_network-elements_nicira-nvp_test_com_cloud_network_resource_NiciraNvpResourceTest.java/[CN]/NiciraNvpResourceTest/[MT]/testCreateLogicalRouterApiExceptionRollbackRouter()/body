{
  resource.configure("NiciraNvpResource",parameters);
  LogicalRouterConfig lrc=mock(LogicalRouterConfig.class);
  when(lrc.getUuid()).thenReturn("ccccc");
  when(nvpApi.createLogicalRouter((LogicalRouterConfig)any())).thenReturn(lrc);
  when(nvpApi.createLogicalRouterPort(eq("ccccc"),(LogicalRouterPort)any())).thenThrow(new NiciraNvpApiException());
  CreateLogicalRouterCommand clrc=new CreateLogicalRouterCommand("aaaaa",50,"bbbbb","lrouter","publiccidr","nexthop","internalcidr","owner");
  CreateLogicalRouterAnswer clra=(CreateLogicalRouterAnswer)resource.executeRequest(clrc);
  assertFalse(clra.getResult());
  verify(nvpApi,atLeast(1)).deleteLogicalRouter(eq("ccccc"));
}
