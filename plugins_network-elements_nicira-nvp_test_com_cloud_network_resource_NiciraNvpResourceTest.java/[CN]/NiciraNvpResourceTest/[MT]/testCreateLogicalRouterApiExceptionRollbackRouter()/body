{
  _resource.configure("NiciraNvpResource",_parameters);
  LogicalRouterConfig lrc=mock(LogicalRouterConfig.class);
  when(lrc.getUuid()).thenReturn("ccccc");
  when(_nvpApi.createLogicalRouter((LogicalRouterConfig)any())).thenReturn(lrc);
  when(_nvpApi.createLogicalRouterPort(eq("ccccc"),(LogicalRouterPort)any())).thenThrow(new NiciraNvpApiException());
  CreateLogicalRouterCommand clrc=new CreateLogicalRouterCommand("aaaaa",50,"bbbbb","lrouter","publiccidr","nexthop","internalcidr","owner");
  CreateLogicalRouterAnswer clra=(CreateLogicalRouterAnswer)_resource.executeRequest(clrc);
  assertFalse(clra.getResult());
  verify(_nvpApi,atLeast(1)).deleteLogicalRouter(eq("ccccc"));
}
