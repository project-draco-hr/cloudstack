{
  DataStore imageStore=null;
  if (storeUuid != null) {
    imageStore=this.dataStoreMgr.getDataStore(storeUuid,DataStoreRole.Image);
  }
 else {
    List<DataStore> stores=this.dataStoreMgr.getImageStoresByScope(new ZoneScope(zoneId));
    if (stores.size() > 1) {
      throw new CloudRuntimeException("multiple image stores, don't know which one to use");
    }
    imageStore=stores.get(0);
  }
  return imageStore;
}
