{
  TemplateDataStoreVO templateStoreRef=_tmplStoreDao.findByTemplateZoneDownloadStatus(templateId,dataCenterId,VMTemplateStorageResourceAssoc.Status.DOWNLOADED);
  if (templateStoreRef == null) {
    throw new CloudRuntimeException("Template " + templateId + " has not been completely downloaded to zone "+ dataCenterId);
  }
  DataStore store=_dataStoreMgr.getDataStore(templateStoreRef.getDataStoreId(),DataStoreRole.Image);
  String isoPath=store.getUri() + "/" + templateStoreRef.getInstallPath();
  return new Pair<String,String>(isoPath,store.getUri());
}
