{
  SearchCriteria<VMTemplateVO> sc=tmpltTypeHyperSearch2.create();
  sc.setParameters("templateType",TemplateType.ROUTING);
  sc.setParameters("hypervisorType",hType);
  if (templateName != null) {
    sc.setParameters("templateName",templateName);
  }
  List<VMTemplateVO> tmplts=listBy(sc,new Filter(VMTemplateVO.class,"id",false,null,1l));
  if (tmplts.size() > 0) {
    return tmplts.get(0);
  }
 else {
    sc=tmpltTypeHyperSearch2.create();
    sc.setParameters("templateType",TemplateType.SYSTEM);
    sc.setParameters("hypervisorType",hType);
    if (templateName != null) {
      sc.setParameters("templateName",templateName);
    }
    tmplts=listBy(sc,new Filter(VMTemplateVO.class,"id",false,null,1l));
    if (tmplts.size() > 0) {
      return tmplts.get(0);
    }
 else {
      return null;
    }
  }
}
