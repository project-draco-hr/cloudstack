{
  if (!isS3Enabled()) {
    return;
  }
  final List<VMTemplateS3VO> s3VMTemplateRefs=this.vmTemplateS3Dao.listAll();
  if (LOGGER.isInfoEnabled()) {
    LOGGER.info(format("Propagating %1$s templates to zone %2$s.",s3VMTemplateRefs.size(),zone.getName()));
  }
  for (  final VMTemplateS3VO templateS3VO : s3VMTemplateRefs) {
    this.vmTemplateZoneDao.persist(new VMTemplateZoneVO(zone.getId(),templateS3VO.getTemplateId(),now()));
  }
}
