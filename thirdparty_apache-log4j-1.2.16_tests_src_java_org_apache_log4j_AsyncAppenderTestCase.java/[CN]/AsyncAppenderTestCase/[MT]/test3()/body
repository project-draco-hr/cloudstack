{
  int LEN=200;
  Logger root=Logger.getRootLogger();
  VectorAppender vectorAppender=new VectorAppender();
  AsyncAppender asyncAppender=new AsyncAppender();
  asyncAppender.setName("async-test3");
  asyncAppender.addAppender(vectorAppender);
  root.addAppender(asyncAppender);
  for (int i=0; i < LEN; i++) {
    root.debug("message" + i);
  }
  System.out.println("Done loop.");
  System.out.flush();
  asyncAppender.close();
  root.debug("m2");
  Vector v=vectorAppender.getVector();
  assertEquals(v.size(),LEN);
  assertTrue(vectorAppender.isClosed());
}
