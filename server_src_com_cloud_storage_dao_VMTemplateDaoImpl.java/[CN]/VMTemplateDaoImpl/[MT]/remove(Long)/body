{
  Transaction txn=Transaction.currentTxn();
  txn.start();
  VMTemplateVO template=createForUpdate();
  template.setRemoved(new Date());
  if (template != null) {
    if (template.getFormat() == ImageFormat.ISO) {
      _tagsDao.removeByIdAndType(id,TaggedResourceType.ISO);
    }
 else {
      _tagsDao.removeByIdAndType(id,TaggedResourceType.Template);
    }
  }
  boolean result=update(id,template);
  txn.commit();
  return result;
}
