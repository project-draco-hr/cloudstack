{
  long shareId=buf.readUnsignedIntLE();
  if (shareId != state.serverShareId)   throw new RuntimeException("Unexpected share ID: " + shareId + ".");
  buf.skipBytes(1);
  buf.skipBytes(1);
  int uncompressedLength=buf.readUnsignedShortLE();
  int type2=buf.readUnsignedByte();
  int compressedType=buf.readUnsignedByte();
  if (compressedType != 0)   throw new RuntimeException("Compression of protocol packets is not supported. Data: " + buf + ".");
  int compressedLength=buf.readUnsignedShortLE();
  if (compressedLength != 0)   throw new RuntimeException("Compression of protocol packets is not supported. Data: " + buf + ".");
  ByteBuffer data=buf.readBytes(uncompressedLength - 18);
  buf.unref();
switch (type2) {
case PDUTYPE2_UPDATE:
{
      int updateType=data.readUnsignedShortLE();
      ByteBuffer payload=data.readBytes(data.length - data.cursor);
      data.unref();
switch (updateType) {
case UPDATETYPE_ORDERS:
        pushDataToPad("orders",payload);
      break;
case UPDATETYPE_BITMAP:
    pushDataToPad("bitmap",payload);
  break;
case UPDATETYPE_PALETTE:
pushDataToPad("palette",payload);
break;
case UPDATETYPE_SYNCHRONIZE:
payload.unref();
break;
}
break;
}
case PDUTYPE2_CONTROL:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_CONTROL ignored.");
data.unref();
break;
case PDUTYPE2_POINTER:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_POINTER ignored.");
data.unref();
break;
case PDUTYPE2_INPUT:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_INPUT ignored.");
data.unref();
break;
case PDUTYPE2_SYNCHRONIZE:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SYNCHRONIZE ignored.");
data.unref();
break;
case PDUTYPE2_REFRESH_RECT:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_REFRESH_RECT ignored.");
data.unref();
break;
case PDUTYPE2_PLAY_SOUND:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_PLAY_SOUND ignored.");
data.unref();
break;
case PDUTYPE2_SUPPRESS_OUTPUT:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SUPPRESS_OUTPUT ignored.");
data.unref();
break;
case PDUTYPE2_SHUTDOWN_REQUEST:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SHUTDOWN_REQUEST ignored.");
data.unref();
break;
case PDUTYPE2_SHUTDOWN_DENIED:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SHUTDOWN_DENIED ignored.");
data.unref();
break;
case PDUTYPE2_SAVE_SESSION_INFO:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SAVE_SESSION_INFO ignored.");
data.unref();
break;
case PDUTYPE2_FONTLIST:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_FONTLIST ignored.");
data.unref();
break;
case PDUTYPE2_FONTMAP:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_FONTMAP ignored.");
data.unref();
break;
case PDUTYPE2_SET_KEYBOARD_INDICATORS:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SET_KEYBOARD_INDICATORS ignored.");
data.unref();
break;
case PDUTYPE2_BITMAPCACHE_PERSISTENT_LIST:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_BITMAPCACHE_PERSISTENT_LIST ignored.");
data.unref();
break;
case PDUTYPE2_BITMAPCACHE_ERROR_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_BITMAPCACHE_ERROR_PDU ignored.");
data.unref();
break;
case PDUTYPE2_SET_KEYBOARD_IME_STATUS:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SET_KEYBOARD_IME_STATUS ignored.");
data.unref();
break;
case PDUTYPE2_OFFSCRCACHE_ERROR_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_OFFSCRCACHE_ERROR_PDU ignored.");
data.unref();
break;
case PDUTYPE2_SET_ERROR_INFO_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_SET_ERROR_INFO_PDU ignored.");
data.unref();
break;
case PDUTYPE2_DRAWNINEGRID_ERROR_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_DRAWNINEGRID_ERROR_PDU ignored.");
data.unref();
break;
case PDUTYPE2_DRAWGDIPLUS_ERROR_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_DRAWGDIPLUS_ERROR_PDU ignored.");
data.unref();
break;
case PDUTYPE2_ARC_STATUS_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_ARC_STATUS_PDU ignored.");
data.unref();
break;
case PDUTYPE2_STATUS_INFO_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_STATUS_INFO_PDU ignored.");
data.unref();
break;
case PDUTYPE2_MONITOR_LAYOUT_PDU:
if (verbose) System.out.println("[" + this + "] INFO: Packet PDUTYPE2_MONITOR_LAYOUT_PDU ignored.");
data.unref();
break;
default :
throw new RuntimeException("Unknow data PDU type: " + type2 + ", data: "+ buf+ ".");
}
}
