{
  String[][] result=new String[3][];
  Set<String> toAdd=new HashSet<String>();
  Set<String> toRemove=new HashSet<String>();
  Set<String> toStats=new HashSet<String>();
  for (  LoadBalancerTO lbTO : lbCmd.getLoadBalancers()) {
    StringBuilder sb=new StringBuilder();
    sb.append(lbTO.getSrcIp()).append(":");
    sb.append(lbTO.getSrcPort()).append(":");
    if (lbTO.getSourceCidrs() != null && lbTO.getSourceCidrs().size() > 0) {
      sb.append(lbTO.getStringSourceCidrs()).append(":");
    }
 else {
      sb.append("0/0:");
    }
    String lbRuleEntry=sb.toString();
    if (!lbTO.isRevoked()) {
      toAdd.add(lbRuleEntry);
    }
 else {
      toRemove.add(lbRuleEntry);
    }
  }
  StringBuilder sb=new StringBuilder(lbCmd.lbStatsIp).append(":").append(lbCmd.lbStatsPort).append(":").append(lbCmd.lbStatsSrcCidrs).append(":,");
  toStats.add(sb.toString());
  toRemove.removeAll(toAdd);
  result[ADD]=toAdd.toArray(new String[toAdd.size()]);
  result[REMOVE]=toRemove.toArray(new String[toRemove.size()]);
  result[STATS]=toStats.toArray(new String[toStats.size()]);
  return result;
}
