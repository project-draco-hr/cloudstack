{
  List<String> result=new ArrayList<String>();
  result.addAll(Arrays.asList(globalSection));
  result.add(getBlankLine());
  if (lbCmd.lbStatsAccessbility.equals("accessible")) {
    result.addAll(Arrays.asList(defaultsSection));
    result.add(getBlankLine());
  }
 else {
    result.addAll(Arrays.asList(defaultsSectionWithoutStats));
    result.add(getBlankLine());
    if (lbCmd.lbStatsAccessbility.equals("only-to-guest")) {
      String rule="listen admin_page ";
      rule=rule.concat(lbCmd.lbStatsIp);
      rule=rule.concat(":");
      rule=rule.concat(lbCmd.lbStatsPort);
      result.add(rule);
      result.addAll(Arrays.asList(statsSubrule));
      result.add(getBlankLine());
    }
  }
  if (lbCmd.getLoadBalancers().length == 0) {
    result.addAll(Arrays.asList(defaultListen));
  }
  result.add(getBlankLine());
  for (  LoadBalancerTO lbTO : lbCmd.getLoadBalancers()) {
    List<String> poolRules=getRulesForPool(lbTO);
    result.addAll(poolRules);
  }
  return result.toArray(new String[result.size()]);
}
