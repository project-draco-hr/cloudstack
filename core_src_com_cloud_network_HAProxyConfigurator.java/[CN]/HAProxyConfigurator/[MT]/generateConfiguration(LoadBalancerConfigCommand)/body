{
  List<String> result=new ArrayList<String>();
  result.addAll(Arrays.asList(globalSection));
  result.add(getBlankLine());
  result.addAll(Arrays.asList(defaultsSection));
  if (!lbCmd.lbStatsVisibility.equals("disabled")) {
    if (lbCmd.lbStatsVisibility.equals("guest-network")) {
      result.add(getBlankLine());
      StringBuilder rule=new StringBuilder("listen admin_page ").append(lbCmd.lbStatsIp).append(":").append(lbCmd.lbStatsPort);
      result.add(rule.toString());
      result.addAll(Arrays.asList(statsSubrule));
    }
    StringBuilder subRule=new StringBuilder("\tstats enable\n\tstats uri     ").append(lbCmd.lbStatsUri).append("\n\tstats realm   Haproxy\\ Statistics\n\tstats auth    ").append(lbCmd.lbStatsAuth);
    result.add(subRule.toString());
  }
  result.add(getBlankLine());
  if (lbCmd.getLoadBalancers().length == 0) {
    result.addAll(Arrays.asList(defaultListen));
  }
  result.add(getBlankLine());
  for (  LoadBalancerTO lbTO : lbCmd.getLoadBalancers()) {
    List<String> poolRules=getRulesForPool(lbTO);
    result.addAll(poolRules);
  }
  return result.toArray(new String[result.size()]);
}
