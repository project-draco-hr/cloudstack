{
  FirewallRuleVO firstRule=fwRules.get(0);
  String publicIP=firstRule.getPublicIpAddress();
  String publicPort=firstRule.getPublicPort();
  String algorithm=firstRule.getAlgorithm();
  List<String> result=new ArrayList<String>();
  StringBuilder sb=new StringBuilder();
  sb.append("listen ").append(poolName).append(" ").append(publicIP).append(":").append(publicPort);
  result.add(sb.toString());
  sb=new StringBuilder();
  sb.append("\t").append("balance ").append(algorithm);
  result.add(sb.toString());
  if (publicPort.equals("80")) {
    sb=new StringBuilder();
    sb.append("\t").append("mode http");
    result.add(sb.toString());
    sb=new StringBuilder();
    sb.append("\t").append("option httpclose");
    result.add(sb.toString());
  }
  int i=0;
  for (  FirewallRuleVO rule : fwRules) {
    if (!rule.isEnabled())     continue;
    sb=new StringBuilder();
    sb.append("\t").append("server ").append(poolName).append("_").append(Integer.toString(i++)).append(" ").append(rule.getPrivateIpAddress()).append(":").append(rule.getPrivatePort()).append(" check");
    result.add(sb.toString());
  }
  result.add(getBlankLine());
  return result;
}
