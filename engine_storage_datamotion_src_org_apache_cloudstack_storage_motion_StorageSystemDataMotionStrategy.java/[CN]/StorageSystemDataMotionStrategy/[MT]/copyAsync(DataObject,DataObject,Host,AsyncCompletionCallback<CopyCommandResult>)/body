{
  if (srcData instanceof SnapshotInfo) {
    SnapshotInfo snapshotInfo=(SnapshotInfo)srcData;
    validate(snapshotInfo);
    boolean canHandleSrc=canHandle(srcData.getDataStore());
    if (canHandleSrc && destData instanceof TemplateInfo && (destData.getDataStore().getRole() == DataStoreRole.Image || destData.getDataStore().getRole() == DataStoreRole.ImageCache)) {
      return handleCreateTemplateFromSnapshot(snapshotInfo,(TemplateInfo)destData,callback);
    }
    if (destData instanceof VolumeInfo) {
      VolumeInfo volumeInfo=(VolumeInfo)destData;
      boolean canHandleDest=canHandle(destData.getDataStore());
      if (canHandleSrc && canHandleDest) {
        return handleCreateVolumeFromSnapshotBothOnStorageSystem(snapshotInfo,volumeInfo,callback);
      }
      if (canHandleSrc) {
        throw new UnsupportedOperationException("This operation is not supported (DataStoreCapabilities.STORAGE_SYSTEM_SNAPSHOT " + "not supported by destination storage plug-in).");
      }
      if (canHandleDest) {
        throw new UnsupportedOperationException("This operation is not supported (DataStoreCapabilities.STORAGE_SYSTEM_SNAPSHOT " + "not supported by source storage plug-in).");
      }
    }
  }
  throw new UnsupportedOperationException("This operation is not supported.");
}
