def get_process_status(hostip, port, username, password, linklocalip, process, hypervisor=None):
    'Double hop and returns a process status'
    ssh = SshClient(hostip, port, username, password)
    if ((str(hypervisor).lower() == 'vmware') or (str(hypervisor).lower() == 'hyperv')):
        ssh_command = 'ssh -i /var/cloudstack/management/.ssh/id_rsa -ostricthostkeychecking=no '
    else:
        ssh_command = 'ssh -i ~/.ssh/id_rsa.cloud -ostricthostkeychecking=no '
    ssh_command = (ssh_command + ('-oUserKnownHostsFile=/dev/null -p 3922 %s %s' % (linklocalip, process)))
    if (str(hypervisor).lower() == 'hyperv'):
        timeout = 12
    else:
        timeout = 5
    while True:
        res = ssh.execute(ssh_command)
        if ('Connection refused'.lower() in res[0].lower()):
            pass
        elif (res[0] != 'Host key verification failed.'):
            break
        elif (timeout == 0):
            break
        time.sleep(5)
        timeout = (timeout - 1)
    return res
