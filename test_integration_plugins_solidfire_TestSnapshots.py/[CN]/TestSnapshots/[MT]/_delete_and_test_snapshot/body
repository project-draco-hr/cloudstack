def _delete_and_test_snapshot(self, vol_snap):
    vol_snap_id = vol_snap.id
    vol_snap_db_id = self._get_cs_volume_snapshot_db_id(vol_snap)
    sf_snapshot_details_request = {'snapshotid': vol_snap_id, }
    sf_snapshot_details_response = self.cs_api.getVolumeSnapshotDetails(sf_snapshot_details_request)
    sf_snapshot_details = sf_snapshot_details_response['null']
    sf_volume_id = self._get_snapshot_detail(sf_snapshot_details, 'volumeId')
    sf_snapshot_id = self._get_snapshot_detail(sf_snapshot_details, 'snapshotId')
    vol_snap.delete(self.apiClient)
    sf_snapshots = self.sfe.list_snapshots(volume_id=sf_volume_id).snapshots
    self._check_sf_snapshot_does_not_exist(sf_snapshots, sf_snapshot_id)
    self._check_snapshot_details_do_not_exist(vol_snap_db_id)
