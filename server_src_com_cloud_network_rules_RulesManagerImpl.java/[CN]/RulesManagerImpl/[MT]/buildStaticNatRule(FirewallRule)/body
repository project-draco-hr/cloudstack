{
  IpAddress ip=_ipAddressDao.findById(rule.getSourceIpAddressId());
  FirewallRuleVO ruleVO=_firewallDao.findById(rule.getId());
  if (ip == null || !ip.isOneToOneNat()) {
    throw new InvalidParameterValueException("Source ip address of the rule id=" + rule.getId() + " is not static nat enabled");
  }
  UserVm vm=_vmDao.findById(ip.getAssociatedWithVmId());
  if (vm == null) {
    throw new InvalidParameterValueException("Static nat rule id=" + rule.getId() + " doesn't have vm assocaited with it");
  }
  Pair<Network,Ip> guestNic=getUserVmGuestIpAddress(vm,false);
  Ip dstIp=guestNic.second();
  return new StaticNatRuleImpl(ruleVO,dstIp.addr());
}
