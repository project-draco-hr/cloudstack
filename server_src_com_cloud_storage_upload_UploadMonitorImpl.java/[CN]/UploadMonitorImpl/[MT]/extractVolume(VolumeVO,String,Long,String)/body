{
  if (isTypeUploadInProgress(volume.getId(),Type.VOLUME)) {
    return;
  }
  List<HostVO> storageServers=_serverDao.listByTypeDataCenter(Host.Type.SecondaryStorage,dataCenterId);
  HostVO sserver=storageServers.get(0);
  UploadVO uploadVolumeObj=new UploadVO(sserver.getId(),volume.getId(),new Date(),Upload.Status.NOT_UPLOADED,0,Type.VOLUME,null,"jobid0000",url);
  _uploadDao.persist(uploadVolumeObj);
  start();
  UploadCommand ucmd=new UploadCommand(url,volume.getId(),volume.getSize(),installPath,Type.VOLUME);
  UploadListener ul=new UploadListener(sserver,_timer,_uploadDao,uploadVolumeObj.getId(),this,ucmd,volume.getAccountId(),volume.getName(),Type.VOLUME,dataCenterId,dataCenterId,null);
  _listenerMap.put(uploadVolumeObj,ul);
  long result=send(sserver.getId(),ucmd,ul);
  if (result == -1) {
    s_logger.warn("Unable to start upload of volume " + volume.getName() + " from "+ sserver.getName()+ " to "+ url);
    ul.setDisconnected();
    ul.scheduleStatusCheck(RequestType.GET_OR_RESTART);
  }
}
