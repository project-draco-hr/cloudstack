{
  final int EXTRACT_URL_TIME_LIMIT=40;
  List<UploadVO> extractURLs=_uploadDao.listByModeAndStatus(Mode.HTTP_DOWNLOAD,Status.DOWNLOAD_URL_CREATED);
  for (  UploadVO extractURL : extractURLs) {
    if (getTimeDiff(extractURL.getLastUpdated()) < EXTRACT_URL_TIME_LIMIT)     continue;
    String path=extractURL.getUploadUrl().substring((extractURL.getUploadUrl().lastIndexOf("/")) + 1);
    DeleteEntityDownloadURLCommand cmd=new DeleteEntityDownloadURLCommand(path);
    long result=send(extractURL.getHostId(),cmd,null);
    if (result == -1) {
      s_logger.warn("Unable to delete the link for " + extractURL.getType() + " id="+ extractURL.getTypeId()+ " url="+ extractURL.getUploadUrl());
    }
 else {
      _uploadDao.remove(extractURL.getId());
    }
  }
}
