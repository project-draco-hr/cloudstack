{
  final int EXTRACT_URL_LIFE_LIMIT_IN_SECONDS=_urlExpirationInterval;
  List<UploadVO> extractJobs=_uploadDao.listByModeAndStatus(Mode.HTTP_DOWNLOAD,Status.DOWNLOAD_URL_CREATED);
  for (  UploadVO extractJob : extractJobs) {
    if (getTimeDiff(extractJob.getLastUpdated()) > EXTRACT_URL_LIFE_LIMIT_IN_SECONDS) {
      String path=extractJob.getInstallPath();
      s_logger.debug("Sending deletion of extract URL " + extractJob.getUploadUrl());
      DeleteEntityDownloadURLCommand cmd=new DeleteEntityDownloadURLCommand(path,extractJob.getType(),extractJob.getUploadUrl());
      HostVO ssvm=_agentMgr.getSSAgent(ApiDBUtils.findHostById(extractJob.getHostId()));
      if (ssvm == null) {
        s_logger.warn("There is no secondary storage VM for secondary storage host " + extractJob.getHostId());
        continue;
      }
      long result=send(ssvm.getId(),cmd,null);
      if (result == -1) {
        s_logger.warn("Unable to delete the link for " + extractJob.getType() + " id="+ extractJob.getTypeId()+ " url="+ extractJob.getUploadUrl());
      }
 else {
        _uploadDao.remove(extractJob.getId());
      }
    }
  }
}
