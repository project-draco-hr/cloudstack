{
  if ((upldStatus == VMTemplateStorageResourceAssoc.Status.UPLOADED) || (upldStatus == Status.ABANDONED)) {
    VMTemplateHostVO vmTemplateHost=new VMTemplateHostVO(host.getId(),template.getId());
    UploadListener oldListener=_listenerMap.get(vmTemplateHost);
    if (oldListener != null) {
      _listenerMap.remove(vmTemplateHost);
    }
  }
  if (upldStatus == VMTemplateStorageResourceAssoc.Status.UPLOADED) {
    logEvent(template.getAccountId(),EventTypes.EVENT_TEMPLATE_UPLOAD_SUCCESS,template.getName() + " successfully uploaded from storage server " + host.getName(),EventVO.LEVEL_INFO);
  }
  if (upldStatus == Status.UPLOAD_ERROR) {
    logEvent(template.getAccountId(),EventTypes.EVENT_TEMPLATE_UPLOAD_FAILED,template.getName() + " failed to upload from storage server " + host.getName(),EventVO.LEVEL_ERROR);
  }
  if (upldStatus == Status.ABANDONED) {
    logEvent(template.getAccountId(),EventTypes.EVENT_TEMPLATE_UPLOAD_FAILED,template.getName() + " :aborted upload from storage server " + host.getName(),EventVO.LEVEL_WARN);
  }
}
