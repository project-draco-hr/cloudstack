{
  Iterator<Entry<String,HashMap<String,Long>>> it1=groupDetails.entrySet().iterator();
  while (it1.hasNext()) {
    Entry<String,HashMap<String,Long>> entry=it1.next();
    HostGpuGroupsVO gpuGroup=_hostGpuGroupsDao.findByHostIdGroupName(hostId,entry.getKey());
    HashMap<String,Long> values=entry.getValue();
    Iterator<Entry<String,Long>> it2=values.entrySet().iterator();
    while (it2.hasNext()) {
      Entry<String,Long> record=it2.next();
      VGPUTypesVO vgpuType=null;
      if ((vgpuType=findByGroupIdVGPUType(gpuGroup.getId(),record.getKey())) == null) {
        persist(new VGPUTypesVO(record.getKey(),gpuGroup.getId(),record.getValue()));
      }
 else {
        vgpuType.setRemainingCapacity(record.getValue());
        update(vgpuType.getId(),vgpuType);
      }
    }
  }
}
