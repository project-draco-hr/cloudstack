{
  RollingCalendar rc=new RollingCalendar();
  rc.setType(DailyRollingFileAppender.TOP_OF_DAY);
  Calendar c=Calendar.getInstance();
  int[] M31={0,2,4,6,7,9,11};
  for (int i=0; i < M31.length; i++) {
    for (int d=1; d <= 31; d++) {
      for (int h=0; h < 23; h++) {
        c.clear();
        c.set(Calendar.YEAR,20);
        c.set(Calendar.MONTH,Calendar.JANUARY + M31[i]);
        c.set(Calendar.DAY_OF_MONTH,d);
        c.set(Calendar.HOUR_OF_DAY,h);
        c.set(Calendar.MINUTE,10);
        c.set(Calendar.SECOND,10);
        c.set(Calendar.MILLISECOND,88);
        c.setTime(rc.getNextCheckDate(c.getTime()));
        if (d == 31) {
          assertEquals(c.get(Calendar.MONTH),(Calendar.JANUARY + M31[i] + 1) % 12);
          assertEquals(c.get(Calendar.DAY_OF_MONTH),1);
        }
 else {
          assertEquals(c.get(Calendar.MONTH),Calendar.JANUARY + M31[i]);
          assertEquals(c.get(Calendar.DAY_OF_MONTH),d + 1);
        }
        assertEquals(c.get(Calendar.HOUR_OF_DAY),0);
        assertEquals(c.get(Calendar.MINUTE),0);
        assertEquals(c.get(Calendar.SECOND),0);
        assertEquals(c.get(Calendar.MILLISECOND),0);
      }
    }
  }
}
