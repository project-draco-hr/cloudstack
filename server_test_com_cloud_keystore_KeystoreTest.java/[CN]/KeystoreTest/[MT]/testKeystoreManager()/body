{
  ComponentLocator locator=ComponentLocator.getCurrentLocator();
  KeystoreManagerImpl ksMgr=ComponentLocator.inject(KeystoreManagerImpl.class);
  assertTrue(ksMgr.configure("TaskManager",new HashMap<String,Object>()));
  assertTrue(ksMgr.start());
  ksMgr.saveCertificate("CPVMCertificate",certContent,keyContent,"realhostip.com");
  byte[] ksBits=ksMgr.getKeystoreBits("CPVMCertificate","realhostip","vmops.com");
  assertTrue(ksBits != null);
  try {
    KeyStore ks=CertificateHelper.loadKeystore(ksBits,"vmops.com");
    assertTrue(ks != null);
  }
 catch (  Exception e) {
    assertTrue(false);
  }
  KeystoreDao ksDao=locator.getDao(KeystoreDao.class);
  KeystoreVO ksVo=ksDao.findByName("CPVMCertificate");
  ksDao.expunge(ksVo.getId());
}
