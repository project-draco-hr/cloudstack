{
  if (repositorySelector == null) {
    repositorySelector=new DefaultRepositorySelector(new NOPLoggerRepository());
    guard=null;
    Exception ex=new IllegalStateException("Class invariant violation");
    String msg="log4j called after unloading, see http://logging.apache.org/log4j/1.2/faq.html#unload.";
    if (isLikelySafeScenario(ex)) {
      LogLog.debug(msg,ex);
    }
 else {
      LogLog.error(msg,ex);
    }
  }
  return repositorySelector.getLoggerRepository();
}
