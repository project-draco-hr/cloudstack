{
  final DataStoreTO store=Mockito.mock(DataStoreTO.class);
  final GetStorageStatsCommand command=new GetStorageStatsCommand(store);
  final KVMStoragePoolManager storagePoolMgr=Mockito.mock(KVMStoragePoolManager.class);
  final KVMStoragePool secondaryPool=Mockito.mock(KVMStoragePool.class);
  when(libvirtComputingResource.getStoragePoolMgr()).thenReturn(storagePoolMgr);
  when(storagePoolMgr.getStoragePool(command.getPooltype(),command.getStorageId(),true)).thenReturn(secondaryPool);
  final LibvirtRequestWrapper wrapper=LibvirtRequestWrapper.getInstance();
  assertNotNull(wrapper);
  final Answer answer=wrapper.execute(command,libvirtComputingResource);
  assertTrue(answer.getResult());
  verify(libvirtComputingResource,times(1)).getStoragePoolMgr();
  verify(storagePoolMgr,times(1)).getStoragePool(command.getPooltype(),command.getStorageId(),true);
}
