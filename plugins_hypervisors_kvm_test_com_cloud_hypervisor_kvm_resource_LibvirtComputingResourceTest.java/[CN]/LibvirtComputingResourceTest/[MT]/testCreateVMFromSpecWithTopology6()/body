{
  int id=_random.nextInt(65534);
  String name="test-instance-1";
  int cpus=12;
  int minSpeed=1024;
  int maxSpeed=2048;
  int minRam=256 * 1024;
  int maxRam=512 * 1024;
  String os="Ubuntu";
  boolean haEnabled=false;
  boolean limitCpuUse=false;
  String vncAddr="";
  String vncPassword="mySuperSecretPassword";
  LibvirtComputingResource lcr=new LibvirtComputingResource();
  VirtualMachineTO to=new VirtualMachineTO(id,name,VirtualMachine.Type.User,cpus,minSpeed,maxSpeed,minRam,maxRam,BootloaderType.HVM,os,false,false,vncPassword);
  to.setVncAddr(vncAddr);
  to.setUuid("b0f0a72d-7efb-3cad-a8ff-70ebf30b3af9");
  LibvirtVMDef vm=lcr.createVMFromSpec(to);
  vm.setHvsType(_hyperVisorType);
  String vmStr="<domain type='" + _hyperVisorType + "'>\n";
  vmStr+="<name>" + name + "</name>\n";
  vmStr+="<uuid>b0f0a72d-7efb-3cad-a8ff-70ebf30b3af9</uuid>\n";
  vmStr+="<description>" + os + "</description>\n";
  vmStr+="<clock offset='utc'>\n";
  vmStr+="</clock>\n";
  vmStr+="<features>\n";
  vmStr+="<pae/>\n";
  vmStr+="<apic/>\n";
  vmStr+="<acpi/>\n";
  vmStr+="</features>\n";
  vmStr+="<devices>\n";
  vmStr+="<serial type='pty'>\n";
  vmStr+="<target port='0'/>\n";
  vmStr+="</serial>\n";
  vmStr+="<graphics type='vnc' autoport='yes' listen='" + vncAddr + "' passwd='"+ vncPassword+ "'/>\n";
  vmStr+="<console type='pty'>\n";
  vmStr+="<target port='0'/>\n";
  vmStr+="</console>\n";
  vmStr+="<input type='tablet' bus='usb'/>\n";
  vmStr+="</devices>\n";
  vmStr+="<memory>" + maxRam / 1024 + "</memory>\n";
  vmStr+="<currentMemory>" + minRam / 1024 + "</currentMemory>\n";
  vmStr+="<devices>\n";
  vmStr+="<memballoon model='virtio'/>\n";
  vmStr+="</devices>\n";
  vmStr+="<vcpu>" + cpus + "</vcpu>\n";
  vmStr+="<os>\n";
  vmStr+="<type  machine='pc'>hvm</type>\n";
  vmStr+="<boot dev='cdrom'/>\n";
  vmStr+="<boot dev='hd'/>\n";
  vmStr+="</os>\n";
  vmStr+="<cpu><topology sockets='2' cores='6' threads='1' /></cpu>";
  vmStr+="<on_reboot>restart</on_reboot>\n";
  vmStr+="<on_poweroff>destroy</on_poweroff>\n";
  vmStr+="<on_crash>destroy</on_crash>\n";
  vmStr+="</domain>\n";
  assertEquals(vmStr,vm.toString());
}
