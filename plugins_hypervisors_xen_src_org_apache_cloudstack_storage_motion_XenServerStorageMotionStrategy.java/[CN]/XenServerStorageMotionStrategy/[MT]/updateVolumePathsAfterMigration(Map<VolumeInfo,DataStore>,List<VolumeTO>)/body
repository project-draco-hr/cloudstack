{
  for (  Map.Entry<VolumeInfo,DataStore> entry : volumeToPool.entrySet()) {
    boolean updated=false;
    VolumeInfo volume=entry.getKey();
    StoragePool pool=(StoragePool)entry.getValue();
    for (    VolumeTO volumeTo : volumeTos) {
      if (volume.getId() == volumeTo.getId()) {
        VolumeVO volumeVO=volDao.findById(volume.getId());
        Long oldPoolId=volumeVO.getPoolId();
        volumeVO.setPath(volumeTo.getPath());
        volumeVO.setFolder(pool.getPath());
        volumeVO.setPodId(pool.getPodId());
        volumeVO.setPoolId(pool.getId());
        volumeVO.setLastPoolId(oldPoolId);
        volDao.update(volume.getId(),volumeVO);
        updated=true;
        break;
      }
    }
    if (!updated) {
      s_logger.error("Volume path wasn't updated for volume " + volume + " after it was migrated.");
    }
  }
}
