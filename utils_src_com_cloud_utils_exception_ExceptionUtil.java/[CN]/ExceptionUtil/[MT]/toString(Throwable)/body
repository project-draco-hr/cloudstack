{
  final StringWriter writer=new StringWriter();
  writer.append("Exception: " + th.getClass().getName() + "\n");
  writer.append("Message: ");
  writer.append(th.getMessage());
  writer.append("\n  Stack: ");
  th.printStackTrace(new PrintWriter(writer));
  return writer.toString();
}
