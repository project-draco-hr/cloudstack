{
  String url;
  try {
    url=new URL(protocol,validation.getHost(),uri).toString();
  }
 catch (  final MalformedURLException e) {
    s_logger.error("Unable to build REST Service URL",e);
    throw new CloudstackRESTException("Unable to build Nicira API URL",e);
  }
  if (POST_METHOD_TYPE.equalsIgnoreCase(type)) {
    return new PostMethod(url);
  }
 else   if (GET_METHOD_TYPE.equalsIgnoreCase(type)) {
    return new GetMethod(url);
  }
 else   if (DELETE_METHOD_TYPE.equalsIgnoreCase(type)) {
    return new DeleteMethod(url);
  }
 else   if (PUT_METHOD_TYPE.equalsIgnoreCase(type)) {
    return new PutMethod(url);
  }
 else {
    throw new CloudstackRESTException("Requesting unknown method type");
  }
}
