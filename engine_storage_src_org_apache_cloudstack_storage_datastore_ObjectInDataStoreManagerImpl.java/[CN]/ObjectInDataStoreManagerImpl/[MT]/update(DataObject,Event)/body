{
  DataObjectInStore obj=this.findObject(data,data.getDataStore());
  if (obj == null) {
    throw new CloudRuntimeException("can't find mapping in ObjectInDataStore table for: " + data);
  }
  if (data.getType() == DataObjectType.TEMPLATE && data.getDataStore().getRole() == DataStoreRole.Primary) {
    try {
      this.stateMachines.transitTo(obj,event,null,templatePoolDao);
    }
 catch (    NoTransitionException e) {
      if (event == Event.CreateOnlyRequested || event == Event.OperationSuccessed) {
        s_logger.debug("allow muliple create requests");
      }
 else {
        throw e;
      }
    }
  }
 else {
    this.stateMachines.transitTo(obj,event,null,objectDataStoreDao);
  }
  return true;
}
