@attr(configuration='expunge.interval')
@attr(configuration='expunge.delay')
@attr(tags=['devcloud', 'advanced', 'advancedns', 'smoke', 'basic', 'sg'])
def test_09_expunge_vm(self):
    'Test destroy(expunge) Virtual Machine\n        '
    self.debug(('Expunge VM-ID: %s' % self.small_virtual_machine.id))
    cmd = destroyVirtualMachine.destroyVirtualMachineCmd()
    cmd.id = self.small_virtual_machine.id
    self.apiclient.destroyVirtualMachine(cmd)
    config = list_configurations(self.apiclient, name='expunge.delay')
    response = config[0]
    time.sleep((int(response.value) * 2))
    config = list_configurations(self.apiclient, name='expunge.interval')
    expunge_cycle = (int(config[0].value) * 2)
    while (expunge_cycle > 0):
        list_vm_response = list_virtual_machines(self.apiclient, id=self.small_virtual_machine.id)
        if list_vm_response:
            time.sleep(expunge_cycle)
            expunge_cycle = 0
            continue
        else:
            break
    self.assertEqual(list_vm_response, None, 'Check Expunged virtual machine is listVirtualMachines')
    return
