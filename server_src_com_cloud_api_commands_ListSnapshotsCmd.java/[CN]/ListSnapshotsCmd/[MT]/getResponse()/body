{
  List<SnapshotVO> snapshots=(List<SnapshotVO>)getResponseObject();
  ListResponse<SnapshotResponse> response=new ListResponse<SnapshotResponse>();
  List<SnapshotResponse> snapshotResponses=new ArrayList<SnapshotResponse>();
  for (  Snapshot snapshot : snapshots) {
    SnapshotResponse snapshotResponse=new SnapshotResponse();
    snapshotResponse.setId(snapshot.getId());
    Account acct=ApiDBUtils.findAccountById(Long.valueOf(snapshot.getAccountId()));
    if (acct != null) {
      snapshotResponse.setAccountName(acct.getAccountName());
      snapshotResponse.setDomainId(acct.getDomainId());
      snapshotResponse.setDomainName(ApiDBUtils.findDomainById(acct.getDomainId()).getName());
    }
    VolumeVO volume=ApiDBUtils.findVolumeById(snapshot.getVolumeId());
    String snapshotTypeStr=SnapshotType.values()[snapshot.getSnapshotType()].name();
    snapshotResponse.setSnapshotType(snapshotTypeStr);
    snapshotResponse.setVolumeId(snapshot.getVolumeId());
    snapshotResponse.setVolumeName(volume.getName());
    snapshotResponse.setVolumeType(volume.getVolumeType().name());
    snapshotResponse.setCreated(snapshot.getCreated());
    snapshotResponse.setName(snapshot.getName());
    AsyncJobVO asyncJob=ApiDBUtils.findInstancePendingAsyncJob("snapshot",snapshot.getId());
    if (asyncJob != null) {
      snapshotResponse.setJobId(asyncJob.getId());
      snapshotResponse.setJobStatus(asyncJob.getStatus());
    }
    snapshotResponse.setIntervalType(ApiDBUtils.getSnapshotIntervalTypes(snapshot.getId()));
    snapshotResponse.setResponseName("snapshot");
    snapshotResponses.add(snapshotResponse);
  }
  response.setResponses(snapshotResponses);
  response.setResponseName(getName());
  return response;
}
