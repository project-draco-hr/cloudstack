{
  String templatePath="/tmp";
  String templateName="template";
  long virtualSize=2000;
  long actualSize=1000;
  Mockito.when(mockStorageLayer.exists(Mockito.anyString())).thenReturn(true);
  Mockito.when(mockStorageLayer.getSize(Mockito.anyString())).thenReturn(actualSize);
  Mockito.doReturn(virtualSize).when(processor).getTemplateVirtualSize(Mockito.anyString(),Mockito.anyString());
  Script mockScript=Mockito.mock(Script.class);
  PowerMockito.whenNew(Script.class).withAnyArguments().thenReturn(mockScript);
  PowerMockito.when(mockScript.execute()).thenReturn(null);
  Processor.FormatInfo info=processor.process(templatePath,null,templateName);
  Assert.assertEquals(Storage.ImageFormat.OVA,info.format);
  Assert.assertEquals("actual size:",actualSize,info.size);
  Assert.assertEquals("virtual size:",virtualSize,info.virtualSize);
  Assert.assertEquals("template name:",templateName + ".ova",info.filename);
}
