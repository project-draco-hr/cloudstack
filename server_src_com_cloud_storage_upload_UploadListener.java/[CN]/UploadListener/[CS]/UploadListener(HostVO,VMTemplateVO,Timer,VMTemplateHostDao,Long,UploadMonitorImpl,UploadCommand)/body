{
  this.sserver=host;
  this.template=template;
  this.vmTemplateHostDao=dao;
  this.uploadMonitor=uploadMonitor;
  this.cmd=cmd;
  this.templateHostId=templHostId;
  initStateMachine();
  this.currState=getState(Status.NOT_UPLOADED.toString());
  this.timer=_timer;
  this.timeoutTask=new TimeoutTask(this);
  this.timer.schedule(timeoutTask,3 * STATUS_POLL_INTERVAL);
  updateDatabase(Status.NOT_UPLOADED,cmd.getUrl(),"");
}
