def setUp(self):
    self.apiclient = self.testClient.getApiClient()
    self.dbclient = self.testClient.getDbConnection()
    self.account = Account.create(self.apiclient, self.services['account'], admin=True)
    self.cleanup = [self.account]
    self.debug('Setting up account and domain hierarchy')
    self.setupProjectAccounts()
    api_client = self.testClient.createUserApiClient(UserName=self.admin.name, DomainName=self.admin.domain)
    self.debug(('Creating an instance with service offering: %s' % self.service_offering.name))
    self.vm = self.createInstance(project=self.project, service_off=self.service_offering, api_client=api_client)
    return
