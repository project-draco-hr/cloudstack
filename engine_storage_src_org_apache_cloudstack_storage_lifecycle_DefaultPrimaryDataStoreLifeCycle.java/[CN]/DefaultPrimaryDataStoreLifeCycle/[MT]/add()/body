{
  DataStoreEndPointSelector dseps=_ds.getEndPointSelector();
  List<DataStoreEndPoint> dsep=dseps.getEndPoints(null);
  boolean success=false;
  StoragePoolVO spool=_storagePoolDao.findById(_ds.getId());
  for (  DataStoreEndPoint ep : dsep) {
    success=createStoragePool(ep,spool);
    if (success) {
      break;
    }
  }
  List<DataStoreEndPoint> poolHosts=new ArrayList<DataStoreEndPoint>();
  for (  DataStoreEndPoint ep : dsep) {
    try {
      connectHostToSharedPool(ep,spool);
      poolHosts.add(ep);
    }
 catch (    Exception e) {
      s_logger.debug("Failed to add storage on this ep: " + ep.getHostId());
    }
  }
}
