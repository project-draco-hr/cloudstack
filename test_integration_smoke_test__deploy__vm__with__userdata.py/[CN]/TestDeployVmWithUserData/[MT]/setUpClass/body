@classmethod
def setUpClass(cls):
    cls.apiClient = super(TestDeployVmWithUserData, cls).getClsTestClient().getApiClient()
    cls.services = Services().services
    cls.zone = get_zone(cls.apiClient, cls.services)
    if cls.zone.localstorageenabled:
        cls.services['service_offering']['storagetype'] = 'local'
    cls.service_offering = ServiceOffering.create(cls.apiClient, cls.services['service_offering'])
    cls.account = Account.create(cls.apiClient, services=cls.services['account'])
    cls.cleanup = [cls.account]
    cls.template = get_template(cls.apiClient, cls.zone.id, cls.services['ostype'])
    cls.debug(('Successfully created account: %s, id:                    %s' % (cls.account.name, cls.account.id)))
    user_data = ''.join((random.choice((string.ascii_uppercase + string.digits)) for x in range(2500)))
    cls.services['virtual_machine']['userdata'] = user_data
