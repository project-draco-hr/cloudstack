{
  if (layout == null)   return;
  String name=getAppenderName(appender) + ",layout=" + layout.getClass().getName();
  cat.debug("Adding LayoutMBean:" + name);
  ObjectName objectName=null;
  try {
    LayoutDynamicMBean appenderMBean=new LayoutDynamicMBean(layout);
    objectName=new ObjectName("log4j:appender=" + name);
    if (!server.isRegistered(objectName)) {
      registerMBean(appenderMBean,objectName);
      dAttributes.add(new MBeanAttributeInfo("appender=" + name,"javax.management.ObjectName","The " + name + " layout.",true,true,false));
    }
  }
 catch (  JMException e) {
    cat.error("Could not add DynamicLayoutMBean for [" + name + "].",e);
  }
catch (  java.beans.IntrospectionException e) {
    cat.error("Could not add DynamicLayoutMBean for [" + name + "].",e);
  }
catch (  RuntimeException e) {
    cat.error("Could not add DynamicLayoutMBean for [" + name + "].",e);
  }
}
