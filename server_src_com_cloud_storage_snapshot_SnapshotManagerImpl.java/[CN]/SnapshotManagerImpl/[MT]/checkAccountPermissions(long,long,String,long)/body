{
  Long accountId=null;
  Account account=UserContext.current().getCaller();
  if (account != null) {
    if (!isAdmin(account.getType())) {
      if (account.getId() != targetAccountId) {
        throw new InvalidParameterValueException("Unable to find a " + targetDesc + " with id "+ targetId+ " for this account");
      }
    }
 else     if (!_domainDao.isChildDomain(account.getDomainId(),targetDomainId)) {
      throw new PermissionDeniedException("Unable to perform operation for " + targetDesc + " with id "+ targetId+ ", permission denied.");
    }
    accountId=account.getId();
  }
  return accountId;
}
