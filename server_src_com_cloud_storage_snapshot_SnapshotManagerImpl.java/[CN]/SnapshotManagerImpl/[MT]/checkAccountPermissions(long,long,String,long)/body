{
  Long accountId=null;
  Account account=(Account)UserContext.current().getAccountObject();
  if (account != null) {
    if (!isAdmin(account.getType())) {
      if (account.getId().longValue() != targetAccountId) {
        throw new ServerApiException(BaseCmd.PARAM_ERROR,"Unable to find a " + targetDesc + " with id "+ targetId+ " for this account");
      }
    }
 else     if (!_domainDao.isChildDomain(account.getDomainId(),targetDomainId)) {
      throw new ServerApiException(BaseCmd.PARAM_ERROR,"Unable to perform operation for " + targetDesc + " with id "+ targetId+ ", permission denied.");
    }
    accountId=account.getId();
  }
  return accountId;
}
