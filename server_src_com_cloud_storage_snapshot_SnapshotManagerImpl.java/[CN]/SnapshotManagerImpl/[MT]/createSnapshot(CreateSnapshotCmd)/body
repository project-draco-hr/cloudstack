{
  SnapshotVO snapshot=_snapshotDao.findById(cmd.getId());
  Long snapshotId=null;
  boolean backedUp=false;
  if (snapshot != null && snapshot.getStatus() == Snapshot.Status.CreatedOnPrimary) {
    snapshotId=snapshot.getId();
    backedUp=backupSnapshotToSecondaryStorage(snapshot);
    if (!backedUp) {
      throw new InternalErrorException("Created snapshot: " + snapshotId + " on primary but failed to backup on secondary");
    }
  }
  List<Long> policyIds=new ArrayList<Long>();
  policyIds.add(Snapshot.MANUAL_POLICY_ID);
  postCreateSnapshot(cmd.getVolumeId(),snapshotId,policyIds,backedUp);
  return snapshot;
}
