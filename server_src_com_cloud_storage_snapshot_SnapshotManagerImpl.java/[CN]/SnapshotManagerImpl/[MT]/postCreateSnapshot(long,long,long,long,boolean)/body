{
  Transaction txn=Transaction.currentTxn();
  txn.start();
  if (backedUp) {
    if (policyId == Snapshot.MANUAL_POLICY_ID) {
      Snapshot snapshot=_snapshotDao.findById(snapshotId);
      _accountMgr.incrementResourceCount(snapshot.getAccountId(),ResourceType.snapshot);
    }
  }
  if (policyId != Snapshot.MANUAL_POLICY_ID) {
    postCreateRecurringSnapshotForPolicy(userId,volumeId,snapshotId,policyId);
  }
  txn.commit();
}
