{
  SnapshotPolicyVO snapshotPolicy=_snapshotPolicyDao.findById(policyId);
  VolumeVO volume=_volsDao.findById(snapshotPolicy.getVolumeId());
  snapshotPolicy.setActive(false);
  _snapSchedMgr.removeSchedule(snapshotPolicy.getVolumeId(),snapshotPolicy.getId());
  EventVO event=new EventVO();
  event.setAccountId(volume.getAccountId());
  event.setUserId(userId);
  event.setType(EventTypes.EVENT_SNAPSHOT_POLICY_DELETE);
  boolean success=_snapshotPolicyDao.update(policyId,snapshotPolicy);
  if (success) {
    event.setLevel(EventVO.LEVEL_INFO);
    event.setDescription("Successfully deleted snapshot policy with Id: " + policyId);
  }
 else {
    event.setLevel(EventVO.LEVEL_ERROR);
    event.setDescription("Failed to  delete snapshot policy with Id: " + policyId);
  }
  _eventDao.persist(event);
  return success;
}
