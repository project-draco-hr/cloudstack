{
  VolumeVO volume=_volsDao.findById(volumeId);
  EventVO event=new EventVO();
  event.setUserId(userId);
  event.setAccountId(volume.getAccountId());
  event.setType(EventTypes.EVENT_SNAPSHOT_CREATE);
  event.setState(EventState.Scheduled);
  event.setDescription("Scheduled async job of snapshot creation for volume:" + volumeId);
  event=_eventDao.persist(event);
  SnapshotOperationParam param=new SnapshotOperationParam(userId,volume.getAccountId(),volumeId,policyId);
  param.setEventId(event.getId());
  Gson gson=GsonHelper.getBuilder().create();
  AsyncJobVO job=new AsyncJobVO();
  job.setUserId(userId);
  job.setAccountId(volume.getAccountId());
  job.setCmd("CreateSnapshot");
  job.setCmdInfo(gson.toJson(param));
  job.setCmdOriginator(CreateSnapshotCmd.getResultObjectName());
  return _asyncMgr.submitAsyncJob(job,true);
}
