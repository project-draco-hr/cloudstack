{
  String url;
  if (host == null || host.isEmpty() || adminuser == null || adminuser.isEmpty() || adminpass == null || adminpass.isEmpty()) {
    throw new NiciraNvpApiException("Hostname/credentials are null or empty");
  }
  try {
    url=new URL(protocol,host,"/ws.v1/login").toString();
  }
 catch (  final MalformedURLException e) {
    s_logger.error("Unable to build Nicira API URL",e);
    throw new NiciraNvpApiException("Unable to build Nicira API URL",e);
  }
  final PostMethod pm=new PostMethod(url);
  pm.addParameter("username",adminuser);
  pm.addParameter("password",adminpass);
  try {
    client.executeMethod(pm);
  }
 catch (  final HttpException e) {
    throw new NiciraNvpApiException("Nicira NVP API login failed ",e);
  }
catch (  final IOException e) {
    throw new NiciraNvpApiException("Nicira NVP API login failed ",e);
  }
 finally {
    pm.releaseConnection();
  }
  if (pm.getStatusCode() != HttpStatus.SC_OK) {
    s_logger.error("Nicira NVP API login failed : " + pm.getStatusText());
    throw new NiciraNvpApiException("Nicira NVP API login failed " + pm.getStatusText());
  }
  if (pm.getResponseHeader("Server") != null) {
    nvpVersion=pm.getResponseHeader("Server").getValue();
    s_logger.debug("NVP Controller reports version " + nvpVersion);
  }
}
