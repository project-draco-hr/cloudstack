{
  String url;
  if (_host == null || _host.isEmpty() || _adminuser == null || _adminuser.isEmpty() || _adminpass == null || _adminpass.isEmpty()) {
    throw new NiciraNvpApiException("Hostname/credentials are null or empty");
  }
  try {
    url=new URL(_protocol,_host,"/ws.v1/login").toString();
  }
 catch (  MalformedURLException e) {
    s_logger.error("Unable to build Nicira API URL",e);
    throw new NiciraNvpApiException("Unable to build Nicira API URL",e);
  }
  PostMethod pm=new PostMethod(url);
  pm.addParameter("username",_adminuser);
  pm.addParameter("password",_adminpass);
  try {
    _client.executeMethod(pm);
  }
 catch (  HttpException e) {
    throw new NiciraNvpApiException("Nicira NVP API login failed ",e);
  }
catch (  IOException e) {
    throw new NiciraNvpApiException("Nicira NVP API login failed ",e);
  }
 finally {
    pm.releaseConnection();
  }
  if (pm.getStatusCode() != HttpStatus.SC_OK) {
    s_logger.error("Nicira NVP API login failed : " + pm.getStatusText());
    throw new NiciraNvpApiException("Nicira NVP API login failed " + pm.getStatusText());
  }
  if (pm.getResponseHeader("Server") != null) {
    _nvpversion=pm.getResponseHeader("Server").getValue();
    s_logger.debug("NVP Controller reports version " + _nvpversion);
  }
}
