{
  Transaction txn=Transaction.currentTxn();
  txn.start();
  SecondaryStorageVmVO proxy=createForUpdate();
  proxy.setPublicIpAddress(null);
  proxy.setPrivateIpAddress(null);
  UpdateBuilder ub=getUpdateBuilder(proxy);
  ub.set(proxy,"state",State.Destroyed);
  ub.set(proxy,"privateIpAddress",null);
  update(id,ub);
  boolean result=super.remove(id);
  txn.commit();
  return result;
}
