def create_vpc(self, name, cidr):
    print name, cidr
    try:
        vpcOffering = VpcOffering.list(self.apiclient, isdefault=True)
        self.assert_(((vpcOffering is not None) and (len(vpcOffering) > 0)), 'No VPC offerings found')
        self.services['vpc'] = {}
        self.services['vpc']['name'] = name
        self.services['vpc']['displaytext'] = name
        self.services['vpc']['cidr'] = cidr
        vpc = VPC.create(apiclient=self.apiclient, services=self.services['vpc'], networkDomain='vpc.internallb', vpcofferingid=vpcOffering[0].id, zoneid=self.zone.id, account=self.account.name, domainid=self.domain.id)
        self.assertIsNotNone(vpc, 'VPC creation failed')
        self.logger.debug(('Created VPC %s' % vpc.id))
        return vpc
    except Exception as e:
        self.fail(('Failed to create VPC: %s due to %s' % (name, e)))
