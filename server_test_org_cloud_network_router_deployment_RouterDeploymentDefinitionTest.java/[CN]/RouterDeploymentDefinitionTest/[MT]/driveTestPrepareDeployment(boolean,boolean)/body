{
  this.deployment.isRedundant=isRedundant;
  when(this.mockNetworkModel.isProviderSupportServiceInNetwork(NW_ID_1,Service.SourceNat,Provider.VirtualRouter)).thenReturn(isPublicNw);
  final boolean canProceedDeployment=this.deployment.prepareDeployment();
  boolean shouldProceedDeployment=true;
  if (isRedundant && !isPublicNw) {
    shouldProceedDeployment=false;
  }
  assertEquals(shouldProceedDeployment,canProceedDeployment);
  if (!shouldProceedDeployment) {
    assertEquals("Since deployment cannot proceed we should empty the list of routers",0,this.deployment.routers.size());
  }
}
