{
  this.deployment.isRedundant=false;
  RouterDeploymentDefinition deploymentUT=Mockito.spy(this.deployment);
  doNothing().when(deploymentUT).setupPriorityOfRedundantRouter();
  doReturn(2).when(deploymentUT).getNumberOfRoutersToDeploy();
  doNothing().when(deploymentUT).findVirtualProvider();
  doNothing().when(deploymentUT).findOfferingId();
  doNothing().when(deploymentUT).findSourceNatIP();
  doNothing().when(deploymentUT).deployAllVirtualRouters();
  when(this.mockNetworkModel.isNetworkSystem(this.mockNw)).thenReturn(true);
  Account newAccountOwner=mock(Account.class);
  when(this.mockAccountMgr.getAccount(Account.ACCOUNT_ID_SYSTEM)).thenReturn(newAccountOwner);
  when(this.mockNetworkModel.isProviderSupportServiceInNetwork(NW_ID,Service.SourceNat,Provider.VirtualRouter)).thenReturn(true);
  deploymentUT.executeDeployment();
  assertEquals("New account owner not properly set",newAccountOwner,deploymentUT.owner);
  verify(deploymentUT,times(1)).findVirtualProvider();
  verify(deploymentUT,times(1)).findOfferingId();
  verify(deploymentUT,times(1)).findSourceNatIP();
  verify(deploymentUT,times(1)).deployAllVirtualRouters();
}
