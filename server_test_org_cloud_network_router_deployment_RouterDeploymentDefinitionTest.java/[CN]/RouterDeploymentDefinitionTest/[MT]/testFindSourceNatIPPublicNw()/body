{
  PublicIp sourceNatIp=mock(PublicIp.class);
  when(this.mockIpAddrMgr.assignSourceNatIpAddressToGuestNetwork(this.mockOwner,this.mockNw)).thenReturn(sourceNatIp);
  this.deployment.isPublicNetwork=true;
  assertNull(this.deployment.sourceNatIp);
  this.deployment.findSourceNatIP();
  assertEquals("SourceNatIP was not correctly found and set",sourceNatIp,this.deployment.sourceNatIp);
}
