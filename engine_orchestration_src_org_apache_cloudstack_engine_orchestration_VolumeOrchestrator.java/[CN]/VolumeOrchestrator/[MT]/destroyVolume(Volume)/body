{
  try {
    if (volume.getState() == Volume.State.Allocated) {
      _volsDao.remove(volume.getId());
      stateTransitTo(volume,Volume.Event.DestroyRequested);
    }
 else {
      volService.destroyVolume(volume.getId());
    }
  }
 catch (  Exception e) {
    s_logger.debug("Failed to destroy volume" + volume.getId(),e);
    throw new CloudRuntimeException("Failed to destroy volume" + volume.getId(),e);
  }
}
