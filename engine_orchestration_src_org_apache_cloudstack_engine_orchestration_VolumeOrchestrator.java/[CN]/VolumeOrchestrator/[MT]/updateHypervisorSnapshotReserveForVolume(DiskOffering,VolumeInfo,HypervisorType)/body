{
  Integer hypervisorSnapshotReserve=diskOffering.getHypervisorSnapshotReserve();
  if (hyperType == HypervisorType.KVM) {
    hypervisorSnapshotReserve=null;
  }
 else   if (hypervisorSnapshotReserve == null || hypervisorSnapshotReserve < 0) {
    hypervisorSnapshotReserve=0;
  }
  VolumeVO volume=_volsDao.findById(volumeInfo.getId());
  volume.setHypervisorSnapshotReserve(hypervisorSnapshotReserve);
  _volsDao.update(volume.getId(),volume);
  return volFactory.getVolume(volume.getId());
}
