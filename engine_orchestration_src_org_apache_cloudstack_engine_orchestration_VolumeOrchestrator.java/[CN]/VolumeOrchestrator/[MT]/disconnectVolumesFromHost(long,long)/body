{
  HostVO host=_hostDao.findById(hostId);
  List<VolumeVO> volumesForVm=_volsDao.findByInstance(vmId);
  if (volumesForVm != null) {
    for (    VolumeVO volumeForVm : volumesForVm) {
      VolumeInfo volumeInfo=volFactory.getVolume(volumeForVm.getId());
      DataStore dataStore=dataStoreMgr.getDataStore(volumeForVm.getPoolId(),DataStoreRole.Primary);
      volService.disconnectVolumeFromHost(volumeInfo,host,dataStore);
    }
  }
}
