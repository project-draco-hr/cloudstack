{
  DiskOffering diskOffering=_entityMgr.findById(DiskOffering.class,volume.getDiskOfferingId());
  ;
  DiskProfile dskCh=new DiskProfile(volume.getId(),volume.getVolumeType(),volume.getName(),diskOffering.getId(),diskOffering.getDiskSize(),diskOffering.getTagsArray(),diskOffering.getUseLocalStorage(),diskOffering.isRecreatable(),null);
  dskCh.setHyperType(dataDiskHyperType);
  DataCenter destPoolDataCenter=_entityMgr.findById(DataCenter.class,destPoolDcId);
  Pod destPoolPod=_entityMgr.findById(Pod.class,destPoolPodId);
  StoragePool destPool=findStoragePool(dskCh,destPoolDataCenter,destPoolPod,destPoolClusterId,null,null,new HashSet<StoragePool>());
  if (destPool == null) {
    throw new CloudRuntimeException("Failed to find a storage pool with enough capacity to move the volume to.");
  }
  Volume newVol=migrateVolume(volume,destPool);
  return volFactory.getVolume(newVol.getId());
}
