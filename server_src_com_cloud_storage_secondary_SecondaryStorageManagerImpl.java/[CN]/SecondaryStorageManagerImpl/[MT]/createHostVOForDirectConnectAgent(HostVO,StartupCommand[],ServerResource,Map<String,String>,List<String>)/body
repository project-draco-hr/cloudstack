{
  StartupCommand firstCmd=startup[0];
  if (!(firstCmd instanceof StartupSecondaryStorageCommand) && !(firstCmd instanceof StartupSecondaryStorageCommand)) {
    return null;
  }
  com.cloud.host.Host.Type type=null;
  if (firstCmd instanceof StartupSecondaryStorageCommand) {
    type=com.cloud.host.Host.Type.SecondaryStorageVM;
  }
 else   if (firstCmd instanceof StartupSecondaryStorageCommand) {
    StartupStorageCommand ssCmd=((StartupStorageCommand)firstCmd);
    if (ssCmd.getHostType() == Host.Type.SecondaryStorageCmdExecutor) {
      type=ssCmd.getHostType();
    }
 else {
      if (ssCmd.getResourceType() == Storage.StorageResourceType.SECONDARY_STORAGE) {
        type=Host.Type.SecondaryStorage;
        if (resource != null && resource instanceof DummySecondaryStorageResource) {
          host.setResource(null);
        }
      }
 else       if (ssCmd.getResourceType() == Storage.StorageResourceType.LOCAL_SECONDARY_STORAGE) {
        type=Host.Type.LocalSecondaryStorage;
      }
 else {
        type=Host.Type.Storage;
      }
      final Map<String,String> hostDetails=ssCmd.getHostDetails();
      if (hostDetails != null) {
        if (details != null) {
          details.putAll(hostDetails);
        }
 else {
          details=hostDetails;
        }
      }
      host.setDetails(details);
    }
  }
  host.setType(type);
  return host;
}
