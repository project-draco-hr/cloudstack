{
  HostVO fromHost=_hostDao.findById(secStorageVm.getId());
  if (!_secStorageVmDao.updateIf(secStorageVm,Event.MigrationRequested,secStorageVm.getHostId())) {
    s_logger.debug("State for " + secStorageVm.toString() + " has changed so migration can not take place.");
    return false;
  }
  MigrateCommand cmd=new MigrateCommand(secStorageVm.getInstanceName(),host.getPrivateIpAddress(),false);
  Answer answer=_agentMgr.easySend(fromHost.getId(),cmd);
  if (answer == null) {
    return false;
  }
  _storageMgr.unshare(secStorageVm,fromHost);
  return true;
}
