{
  CheckVirtualMachineCommand cvm=new CheckVirtualMachineCommand(secStorageVm.getInstanceName());
  CheckVirtualMachineAnswer answer=(CheckVirtualMachineAnswer)_agentMgr.send(host.getId(),cvm);
  if (!answer.getResult()) {
    s_logger.debug("Unable to complete migration for " + secStorageVm.getId());
    _itMgr.stateTransitTo(secStorageVm,VirtualMachine.Event.AgentReportStopped,null);
    return false;
  }
  State state=answer.getState();
  if (state == State.Stopped) {
    s_logger.warn("Unable to complete migration as we can not detect it on " + host.getId());
    _itMgr.stateTransitTo(secStorageVm,VirtualMachine.Event.AgentReportStopped,null);
    return false;
  }
  _itMgr.stateTransitTo(secStorageVm,VirtualMachine.Event.OperationSucceeded,host.getId());
  return true;
}
