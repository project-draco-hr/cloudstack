{
  ZoneHostInfo zoneHostInfo=zoneHostInfoMap.get(dataCenterId);
  if (zoneHostInfo != null && (zoneHostInfo.getFlags() & RunningHostInfoAgregator.ZoneHostInfo.ROUTING_HOST_MASK) != 0) {
    VMTemplateVO template=_templateDao.findSystemVMTemplate(dataCenterId);
    if (template == null) {
      s_logger.debug("No hypervisor host added  in zone " + dataCenterId + ", wait until it is ready to launch secondary storage vm");
      return false;
    }
    List<DataStore> stores=this._dataStoreMgr.getImageStoresByScope(new ZoneScope(dataCenterId));
    if (stores.size() < 1) {
      s_logger.debug("No image store added  in zone " + dataCenterId + ", wait until it is ready to launch secondary storage vm");
      return false;
    }
    DataStore store=templateMgr.getImageStore(dataCenterId,template.getId());
    if (store == null) {
      if (s_logger.isDebugEnabled()) {
        s_logger.debug("No secondary storage available in zone " + dataCenterId + ", wait until it is ready to launch secondary storage vm");
      }
      return false;
    }
    List<Pair<Long,Integer>> l=_storagePoolHostDao.getDatacenterStoragePoolHostInfo(dataCenterId,!_useLocalStorage);
    if (l != null && l.size() > 0 && l.get(0).second().intValue() > 0) {
      return true;
    }
 else {
      if (s_logger.isDebugEnabled()) {
        s_logger.debug("Primary storage is not ready, wait until it is ready to launch secondary storage vm. dcId: " + dataCenterId + " system.vm.use.local.storage: "+ _useLocalStorage+ "If you want to use local storage to start ssvm, need to set system.vm.use.local.storage to true");
      }
    }
  }
  return false;
}
