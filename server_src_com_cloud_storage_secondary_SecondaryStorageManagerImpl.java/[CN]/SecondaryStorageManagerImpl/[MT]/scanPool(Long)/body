{
  long dataCenterId=pool.longValue();
  List<SecondaryStorageVmVO> alreadyRunning=_secStorageVmDao.getSecStorageVmListInStates(SecondaryStorageVm.Role.templateProcessor,dataCenterId,State.Running,State.Migrating,State.Starting);
  List<SecondaryStorageVmVO> stopped=_secStorageVmDao.getSecStorageVmListInStates(SecondaryStorageVm.Role.templateProcessor,dataCenterId,State.Stopped,State.Stopping);
  if (alreadyRunning.size() == 0) {
    if (stopped.size() == 0) {
      s_logger.info("No secondary storage vms found in datacenter id=" + dataCenterId + ", starting a new one");
      return new Pair<AfterScanAction,Object>(AfterScanAction.expand,SecondaryStorageVm.Role.templateProcessor);
    }
 else {
      s_logger.warn("Stopped secondary storage vms found in datacenter id=" + dataCenterId + ", not restarting them automatically");
    }
  }
  return new Pair<AfterScanAction,Object>(AfterScanAction.nop,SecondaryStorageVm.Role.templateProcessor);
}
