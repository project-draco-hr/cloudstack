def config(self):
    try:
        cfo = configFileOps('/etc/cloud/agent/agent.properties', self)
        cfo.addEntry('host', self.syscfg.env.mgtSvr)
        cfo.addEntry('zone', self.syscfg.env.zoneToken)
        cfo.addEntry('port', '443')
        cfo.addEntry('private.network.device', self.syscfg.env.nics[0])
        cfo.addEntry('public.network.device', self.syscfg.env.nics[1])
        cfo.addEntry('guest.network.device', self.syscfg.env.nics[2])
        cfo.addEntry('guid', str(self.syscfg.env.uuid))
        cfo.addEntry('mount.path', '/mnt')
        cfo.addEntry('resource', 'com.cloud.storage.resource.LocalSecondaryStorageResource|com.cloud.agent.resource.computing.CloudZonesComputingResource')
        cfo.save()
        self.syscfg.stopService('cloud-agent')
        self.syscfg.startService('cloud-agent')
        return True
    except:
        raise CloudRuntimeException('Failed to configure myCloud, please see the /var/log/cloud/setupAgent.log for detail', formatExceptionInfo())
