{
  int nextDot=buf.toString().indexOf(".",startPos);
  if (nextDot != -1) {
    if ((nextDot - startPos) > charCount) {
      buf.delete(startPos + charCount,nextDot);
      nextDot=startPos + charCount;
      if (ellipsis != '\0') {
        buf.insert(nextDot,ellipsis);
        nextDot++;
      }
    }
    nextDot++;
  }
  return nextDot;
}
