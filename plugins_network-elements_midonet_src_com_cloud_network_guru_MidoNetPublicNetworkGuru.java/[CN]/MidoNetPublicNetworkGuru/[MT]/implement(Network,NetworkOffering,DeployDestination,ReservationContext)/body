{
  s_logger.debug("implement called with network: " + network);
  long dcId=destination.getDataCenter().getId();
  long physicalNetworkId=_networkModel.findPhysicalNetworkId(dcId,offering.getTags(),offering.getTrafficType());
  NetworkVO implemented=new NetworkVO(network.getTrafficType(),network.getMode(),network.getBroadcastDomainType(),network.getNetworkOfferingId(),Network.State.Allocated,network.getDataCenterId(),physicalNetworkId,offering.getRedundantRouter());
  if (network.getGateway() != null) {
    implemented.setGateway(network.getGateway());
  }
  if (network.getCidr() != null) {
    implemented.setCidr(network.getCidr());
  }
  implemented.setBroadcastUri(generateBroadcastUri(network));
  return implemented;
}
