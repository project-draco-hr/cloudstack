{
  if (vmMo == null)   return;
  boolean hasSnapshot=false;
  hasSnapshot=vmMo.hasSnapshot();
  if (!hasSnapshot)   vmMo.tearDownDevices(new Class<?>[]{VirtualDisk.class,VirtualEthernetCard.class});
 else   vmMo.tearDownDevices(new Class<?>[]{VirtualEthernetCard.class});
  vmMo.ensureScsiDeviceController();
}
