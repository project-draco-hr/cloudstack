{
  int controllerKey;
  if (vol.getType() == Volume.Type.ROOT) {
    if (vmSpec.getDetails() != null && vmSpec.getDetails().get(VmDetailConstants.ROOK_DISK_CONTROLLER) != null) {
      if (vmSpec.getDetails().get(VmDetailConstants.ROOK_DISK_CONTROLLER).equalsIgnoreCase("scsi"))       controllerKey=scsiControllerKey;
 else       controllerKey=ideControllerKey;
    }
 else {
      controllerKey=scsiControllerKey;
    }
  }
 else {
    controllerKey=scsiControllerKey;
  }
  return controllerKey;
}
