{
  rec=new SessionRecorder(fname);
  rec.writeHeader();
  rec.write(versionMsg_3_3.getBytes());
  rec.writeIntBE(SecTypeNone);
  rec.writeShortBE(framebufferWidth);
  rec.writeShortBE(framebufferHeight);
  byte[] fbsServerInitMsg={32,24,0,1,0,(byte)0xFF,0,(byte)0xFF,0,(byte)0xFF,16,8,0,0,0,0};
  rec.write(fbsServerInitMsg);
  rec.writeIntBE(desktopName.length());
  rec.write(desktopName.getBytes());
  numUpdatesInSession=0;
  if (wereZlibUpdates)   recordFromBeginning=false;
  zlibWarningShown=false;
  tightWarningShown=false;
}
