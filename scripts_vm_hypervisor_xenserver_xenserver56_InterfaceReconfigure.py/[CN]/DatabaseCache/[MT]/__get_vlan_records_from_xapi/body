def __get_vlan_records_from_xapi(self, session):
    self.__vlans = {}
    for v in session.xenapi.VLAN.get_all():
        rec = session.xenapi.VLAN.get_record(v)
        if (not self.__pif_on_host(rec['untagged_PIF'])):
            continue
        self.__vlans[v] = {}
        for f in _VLAN_ATTRS:
            self.__vlans[v][f] = rec[f]
