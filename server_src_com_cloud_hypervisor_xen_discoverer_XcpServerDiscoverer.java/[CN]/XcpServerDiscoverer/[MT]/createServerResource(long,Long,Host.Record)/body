{
  String prodBrand=record.softwareVersion.get("product_brand").trim();
  String prodVersion=record.softwareVersion.get("product_version").trim();
  if (prodBrand.equals("XenCloudPlatform") && prodVersion.equals("0.1.1"))   return new XcpServerResource();
  if (prodBrand.equals("XenServer") && prodVersion.equals("5.6.0"))   return new XenServer56Resource();
  if (prodBrand.equals("XenServer") && prodVersion.equals("5.6.100"))   return new XenServer56FP1Resource();
  String msg="Only support XCP 0.1.1, XenServer 5.6 and XenServer 5.6 FP1 , but this one is " + prodBrand + " "+ prodVersion;
  _alertMgr.sendAlert(AlertManager.ALERT_TYPE_HOST,dcId,podId,msg,msg);
  s_logger.debug(msg);
  throw new RuntimeException(msg);
}
