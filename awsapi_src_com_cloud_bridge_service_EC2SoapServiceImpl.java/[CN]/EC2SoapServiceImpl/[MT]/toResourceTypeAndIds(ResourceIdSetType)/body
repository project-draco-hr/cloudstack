{
  EC2Tags request=new EC2Tags();
  if (resourceIds != null) {
    ResourceIdSetItemType[] items=resourceIds.getItem();
    List<String> resourceTypeList=new ArrayList<String>();
    if (items != null) {
      for (int i=0; i < items.length; i++) {
        String resourceType=items[i].getResourceId().split(":")[0];
        if (resourceTypeList.isEmpty())         resourceTypeList.add(resourceType);
 else {
          Boolean existsInList=false;
          for (          String addedResourceType : resourceTypeList) {
            if (addedResourceType.equalsIgnoreCase(resourceType)) {
              existsInList=true;
              break;
            }
          }
          if (!existsInList)           resourceTypeList.add(resourceType);
        }
      }
      for (      String resourceType : resourceTypeList) {
        EC2TagTypeId param1=new EC2TagTypeId();
        param1.setResourceType(resourceType);
        for (int i=0; i < items.length; i++) {
          String[] resourceTag=items[i].getResourceId().split(":");
          if (resourceType.equals(resourceTag[0]))           param1.addResourceId(resourceTag[1]);
        }
        request.addResourceType(param1);
      }
    }
  }
  return request;
}
