{
  EC2VolumeFilterSet vfs=new EC2VolumeFilterSet();
  boolean timeFilter=false;
  FilterType[] items=fst.getItem();
  if (null != items) {
    for (int j=0; j < items.length; j++) {
      String filterName=items[j].getName();
      ValueSetType vst=items[j].getValueSet();
      ValueType[] valueItems=vst.getItem();
      if (filterName.startsWith("tag:")) {
        String key=filterName.split(":")[1];
        for (        ValueType valueItem : valueItems) {
          EC2TagKeyValue tag=new EC2TagKeyValue();
          tag.setKey(key);
          tag.setValue(valueItem.getValue());
          request.addResourceTag(tag);
        }
      }
 else {
        EC2Filter oneFilter=new EC2Filter();
        oneFilter.setName(filterName);
        timeFilter=false;
        for (int m=0; m < timeStrs.length; m++) {
          timeFilter=filterName.equalsIgnoreCase(timeStrs[m]);
          if (timeFilter)           break;
        }
        for (int k=0; k < valueItems.length; k++) {
          if (timeFilter)           oneFilter.addValue(valueItems[k].getValue());
 else           oneFilter.addValueEncoded(valueItems[k].getValue());
        }
        vfs.addFilter(oneFilter);
      }
    }
    request.setFilterSet(vfs);
  }
  return request;
}
