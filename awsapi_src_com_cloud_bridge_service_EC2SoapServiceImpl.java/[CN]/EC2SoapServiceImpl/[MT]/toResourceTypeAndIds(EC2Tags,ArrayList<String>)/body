{
  List<String> resourceTypeList=new ArrayList<String>();
  for (  String resourceId : resourceIdList) {
    if (!resourceId.contains(":") || resourceId.split(":").length != 2) {
      throw new EC2ServiceException(ClientError.InvalidParameterValue,"Invalid usage. ResourceId format is resource-type:resource-uuid");
    }
    String resourceType=resourceId.split(":")[0];
    if (resourceTypeList.isEmpty())     resourceTypeList.add(resourceType);
 else {
      Boolean existsInList=false;
      for (      String addedResourceType : resourceTypeList) {
        if (addedResourceType.equalsIgnoreCase(resourceType)) {
          existsInList=true;
          break;
        }
      }
      if (!existsInList)       resourceTypeList.add(resourceType);
    }
  }
  for (  String resourceType : resourceTypeList) {
    EC2TagTypeId param1=new EC2TagTypeId();
    param1.setResourceType(resourceType);
    for (    String resourceId : resourceIdList) {
      String[] resourceTag=resourceId.split(":");
      if (resourceType.equals(resourceTag[0]))       param1.addResourceId(resourceTag[1]);
    }
    request.addResourceType(param1);
  }
  return request;
}
