{
  Connect conn=LibvirtConnection.getConnection();
  LibvirtStoragePoolDef spd=getStoragePoolDef(conn,pool);
  if ((!spd.getPoolType().equals(LibvirtStoragePoolDef.poolType.NETFS)) && (!spd.getPoolType().equals(LibvirtStoragePoolDef.poolType.DIR))) {
    pool.refresh(0);
    return;
  }
  String lockFile=spd.getTargetPath() + File.separator + _lockfile;
  s_logger.debug("Attempting to lock pool " + pool.getName() + " with file "+ lockFile);
  if (lock(lockFile,ACQUIRE_GLOBAL_FILELOCK_TIMEOUT_FOR_KVM)) {
    try {
      pool.refresh(0);
    }
  finally {
      s_logger.debug("Releasing the lock on pool " + pool.getName() + " with file "+ lockFile);
      unlock(lockFile);
    }
  }
 else {
    throw new CloudRuntimeException("Can not get file lock to refresh the pool " + pool.getName());
  }
}
