{
  String method=(String)req.getParams().getParameter("method");
  int nMethod=RemoteMethodConstants.METHOD_UNKNOWN;
  String responseContent=null;
  try {
    if (method != null) {
      nMethod=Integer.parseInt(method);
    }
switch (nMethod) {
case RemoteMethodConstants.METHOD_EXECUTE:
      responseContent=handleExecuteMethodCall(req);
    break;
case RemoteMethodConstants.METHOD_EXECUTE_ASYNC:
  responseContent=handleExecuteAsyncMethodCall(req);
break;
case RemoteMethodConstants.METHOD_ASYNC_RESULT:
responseContent=handleAsyncResultMethodCall(req);
break;
case RemoteMethodConstants.METHOD_PING:
responseContent=handlePingMethodCall(req);
break;
case RemoteMethodConstants.METHOD_UNKNOWN:
default :
assert(false);
s_logger.error("unrecognized method " + nMethod);
break;
}
}
 catch (Throwable e) {
s_logger.error("Unexpected exception when processing cluster service request : ",e);
}
if (responseContent != null) {
writeResponse(response,HttpStatus.SC_OK,responseContent);
}
 else {
writeResponse(response,HttpStatus.SC_BAD_REQUEST,null);
}
}
