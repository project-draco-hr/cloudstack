{
  Account caller=CallContext.current().getCallingAccount();
  Domain domain=null;
  if (domainId != null) {
    domain=_domainDao.findById(domainId);
    if (domain == null) {
      throw new InvalidParameterValueException("Domain id=" + domainId + " doesn't exist");
    }
    _accountMgr.checkAccess(caller,domain);
  }
 else {
    domain=_domainDao.findById(caller.getDomainId());
  }
  String domainPath=domain.getPath();
  Pair<List<AclPolicy>,Integer> result=_iamSrv.listAclPolicies(aclPolicyId,aclPolicyName,domainPath,startIndex,pageSize);
  ListResponse<AclPolicyResponse> response=new ListResponse<AclPolicyResponse>();
  List<AclPolicyResponse> policyResponses=new ArrayList<AclPolicyResponse>();
  for (  AclPolicy policy : result.first()) {
    AclPolicyResponse resp=createAclPolicyResponse(policy);
    policyResponses.add(resp);
  }
  response.setResponses(policyResponses,result.second());
  return response;
}
