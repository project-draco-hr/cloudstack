{
  VirtualMachineTemplate template=null;
  try {
    template=_userVmService.createPrivateTemplateRecord(this);
  }
 catch (  ResourceAllocationException ex) {
    s_logger.warn("Exception: ",ex);
    throw new ServerApiException(BaseCmd.RESOURCE_ALLOCATION_ERROR,ex.getMessage());
  }
  if (template != null) {
    this.setEntityId(template.getId());
  }
 else {
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"Failed to create a template");
  }
}
