{
  try {
    NiciraNvpList<LogicalRouterPort> ports=_niciraNvpApi.findLogicalRouterPortByGatewayServiceUuid(cmd.getLogicalRouterUuid(),cmd.getL3GatewayServiceUuid());
    if (ports.getResultCount() != 1) {
      return new ConfigurePublicIpsOnLogicalRouterAnswer(cmd,false,"No logical router ports found, unable to set ip addresses");
    }
    LogicalRouterPort lrp=ports.getResults().get(0);
    lrp.setIpAddresses(cmd.getPublicCidrs());
    _niciraNvpApi.modifyLogicalRouterPort(cmd.getLogicalRouterUuid(),lrp);
    return new ConfigurePublicIpsOnLogicalRouterAnswer(cmd,true,"Configured " + cmd.getPublicCidrs().size() + " ip addresses on logical router uuid "+ cmd.getLogicalRouterUuid());
  }
 catch (  NiciraNvpApiException e) {
    if (numRetries > 0) {
      return retry(cmd,--numRetries);
    }
 else {
      return new ConfigurePublicIpsOnLogicalRouterAnswer(cmd,e);
    }
  }
}
