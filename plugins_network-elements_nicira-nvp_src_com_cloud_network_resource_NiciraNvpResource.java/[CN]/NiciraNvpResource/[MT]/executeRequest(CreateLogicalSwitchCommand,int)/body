{
  LogicalSwitch logicalSwitch=new LogicalSwitch();
  logicalSwitch.setDisplayName(truncate("lswitch-" + cmd.getName(),NAME_MAX_LEN));
  logicalSwitch.setPortIsolationEnabled(false);
  final List<TransportZoneBinding> ltzb=new ArrayList<TransportZoneBinding>();
  ltzb.add(new TransportZoneBinding(cmd.getTransportUuid(),cmd.getTransportType()));
  logicalSwitch.setTransportZones(ltzb);
  final List<NiciraNvpTag> tags=new ArrayList<NiciraNvpTag>();
  tags.add(new NiciraNvpTag("cs_account",cmd.getOwnerName()));
  logicalSwitch.setTags(tags);
  try {
    logicalSwitch=niciraNvpApi.createLogicalSwitch(logicalSwitch);
    return new CreateLogicalSwitchAnswer(cmd,true,"Logicalswitch " + logicalSwitch.getUuid() + " created",logicalSwitch.getUuid());
  }
 catch (  final NiciraNvpApiException e) {
    if (numRetries > 0) {
      return retry(cmd,--numRetries);
    }
 else {
      return new CreateLogicalSwitchAnswer(cmd,e);
    }
  }
}
