{
  if (AccountDataCenterVirtualSearch == null) {
    NicDao _nicDao=ComponentLocator.getLocator("management-server").getDao(NicDao.class);
    SearchBuilder<NicVO> nicSearch=_nicDao.createSearchBuilder();
    nicSearch.and("networkId",nicSearch.entity().getNetworkId(),SearchCriteria.Op.EQ);
    nicSearch.and("ip4Address",nicSearch.entity().getIp4Address(),SearchCriteria.Op.NNULL);
    AccountDataCenterVirtualSearch=createSearchBuilder();
    AccountDataCenterVirtualSearch.and("account",AccountDataCenterVirtualSearch.entity().getAccountId(),SearchCriteria.Op.EQ);
    AccountDataCenterVirtualSearch.and("dc",AccountDataCenterVirtualSearch.entity().getDataCenterIdToDeployIn(),SearchCriteria.Op.EQ);
    AccountDataCenterVirtualSearch.join("nicSearch",nicSearch,AccountDataCenterVirtualSearch.entity().getId(),nicSearch.entity().getInstanceId(),JoinBuilder.JoinType.INNER);
    AccountDataCenterVirtualSearch.done();
  }
  SearchCriteria<UserVmVO> sc=AccountDataCenterVirtualSearch.create();
  sc.setParameters("account",accountId);
  sc.setParameters("dc",dcId);
  sc.setJoinParameters("nicSearch","networkId",networkId);
  return listBy(sc);
}
