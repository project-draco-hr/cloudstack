{
  LogLog.debug("setFile called: " + fileName + ", "+ append);
  if (bufferedIO) {
    setImmediateFlush(false);
  }
  reset();
  FileOutputStream ostream=null;
  try {
    ostream=new FileOutputStream(fileName,append);
  }
 catch (  FileNotFoundException ex) {
    String parentName=new File(fileName).getParent();
    if (parentName != null) {
      File parentDir=new File(parentName);
      if (!parentDir.exists() && parentDir.mkdirs()) {
        ostream=new FileOutputStream(fileName,append);
      }
 else {
        throw ex;
      }
    }
 else {
      throw ex;
    }
  }
  Writer fw=createWriter(ostream);
  if (bufferedIO) {
    fw=new BufferedWriter(fw,bufferSize);
  }
  this.setQWForFiles(fw);
  this.fileName=fileName;
  this.fileAppend=append;
  this.bufferedIO=bufferedIO;
  this.bufferSize=bufferSize;
  writeHeader();
  LogLog.debug("setFile ended");
}
