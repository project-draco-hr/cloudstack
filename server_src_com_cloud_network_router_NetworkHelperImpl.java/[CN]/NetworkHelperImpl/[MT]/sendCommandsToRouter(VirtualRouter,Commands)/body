{
  if (!checkRouterVersion(router)) {
    s_logger.debug("Router requires upgrade. Unable to send command to router:" + router.getId() + ", router template version : "+ router.getTemplateVersion()+ ", minimal required version : "+ VirtualNetworkApplianceService.MinVRVersion);
    throw new CloudRuntimeException("Unable to send command. Upgrade in progress. Please contact administrator.");
  }
  Answer[] answers=null;
  try {
    answers=_agentMgr.send(router.getHostId(),cmds);
  }
 catch (  final OperationTimedoutException e) {
    s_logger.warn("Timed Out",e);
    throw new AgentUnavailableException("Unable to send commands to virtual router ",router.getHostId(),e);
  }
  if (answers == null) {
    return false;
  }
  if (answers.length != cmds.size()) {
    return false;
  }
  boolean result=true;
  if (answers.length > 0) {
    for (    final Answer answer : answers) {
      if (!answer.getResult()) {
        result=false;
        break;
      }
    }
  }
  return result;
}
