{
  final String password=(String)profile.getParameter(VirtualMachineProfile.Param.VmPassword);
  final DataCenterVO dcVo=dcDao.findById(router.getDataCenterId());
  if (password != null && nic.isDefaultNic()) {
    final String encodedPassword=PasswordGenerator.rot13(password);
    final SavePasswordCommand cmd=new SavePasswordCommand(encodedPassword,nic.getIp4Address(),profile.getVirtualMachine().getHostName(),networkModel.getExecuteInSeqNtwkElmtCmd());
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_IP,routerControlHelper.getRouterControlIp(router.getId()));
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_GUEST_IP,routerControlHelper.getRouterIpInNetwork(nic.getNetworkId(),router.getId()));
    cmd.setAccessDetail(NetworkElementCommand.ROUTER_NAME,router.getInstanceName());
    cmd.setAccessDetail(NetworkElementCommand.ZONE_NETWORK_TYPE,dcVo.getNetworkType().toString());
    cmds.addCommand("password",cmd);
  }
}
