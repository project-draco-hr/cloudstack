{
  VMTemplateZoneVO tmpltZone=_vmTemplateZoneDao.findByZoneTemplate(dcId,TemplateConstants.DEFAULT_SYSTEM_VM_DB_ID);
  if (tmpltZone == null) {
    VMTemplateZoneVO vmTemplateZone=new VMTemplateZoneVO(dcId,TemplateConstants.DEFAULT_SYSTEM_VM_DB_ID,new Date());
    _vmTemplateZoneDao.persist(vmTemplateZone);
  }
  List<VMTemplateVO> allTemplates=_vmTemplateDao.listAllActive();
  for (  VMTemplateVO vt : allTemplates) {
    if (vt.isCrossZones()) {
      tmpltZone=_vmTemplateZoneDao.findByZoneTemplate(dcId,vt.getId());
      if (tmpltZone == null) {
        VMTemplateZoneVO vmTemplateZone=new VMTemplateZoneVO(dcId,vt.getId(),new Date());
        _vmTemplateZoneDao.persist(vmTemplateZone);
      }
    }
  }
}
