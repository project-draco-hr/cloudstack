{
  VMTemplateVO tmplt=_tmpltDao.findById(TemplateConstants.DEFAULT_SYSTEM_VM_DB_ID);
  if (tmplt == null) {
    throw new CloudRuntimeException("Cannot find routing template in vm_template table. Check your configuration");
  }
  VMTemplateHostVO tmpltHost=_vmTemplateHostDao.findByHostTemplate(hostId,TemplateConstants.DEFAULT_SYSTEM_VM_DB_ID);
  if (tmpltHost == null) {
    VMTemplateHostVO vmTemplateHost=new VMTemplateHostVO(hostId,TemplateConstants.DEFAULT_SYSTEM_VM_DB_ID,new Date(),100,VMTemplateStorageResourceAssoc.Status.DOWNLOADED,null,null,null,TemplateConstants.DEFAULT_SYSTEM_VM_TEMPLATE_PATH,null);
    _vmTemplateHostDao.persist(vmTemplateHost);
  }
}
