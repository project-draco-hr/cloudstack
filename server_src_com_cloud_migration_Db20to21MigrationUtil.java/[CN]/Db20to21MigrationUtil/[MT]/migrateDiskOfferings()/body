{
  System.out.println("Migrating disk offering...");
  List<DiskOffering20VO> oldDiskOfferings=_diskOffering20Dao.listAll();
  long maxDiskOfferingId=_domRServiceOfferingId;
  maxDiskOfferingId+=100;
  for (  DiskOffering20VO do20 : oldDiskOfferings) {
    DiskOffering21VO do21=new DiskOffering21VO(do20.getDomainId(),do20.getName(),do20.getDisplayText(),do20.getDiskSize(),do20.getMirrored(),null);
    do21.setType(Type.Disk);
    do21.setId(maxDiskOfferingId++);
    do21=_diskOffering21Dao.persist(do21);
    if (do20.getId().longValue() != do21.getId().longValue()) {
      updateDiskOfferingReferences(do20.getId().longValue(),do21.getId().longValue());
    }
  }
  FixupNullDiskOfferingInVolumes();
  System.out.println("Disk offering has been migrated to 2.1 format");
}
