{
  Transaction txn=Transaction.open(Transaction.CLOUD_DB);
  try {
    PreparedStatement pstmt=null;
    pstmt=txn.prepareAutoCloseStatement("UPDATE volumes SET disk_offering_id=? WHERE instance_id IN (SELECT id FROM vm_instance WHERE type='ConsoleProxy')");
    pstmt.setLong(1,serviceOfferingId);
    int rows=pstmt.executeUpdate();
    s_logger.info("Update volumes for console proxy service offering change, affected rows: " + rows);
  }
 catch (  SQLException e) {
    s_logger.error("Unhandled exception: ",e);
  }
 finally {
    txn.close();
  }
}
