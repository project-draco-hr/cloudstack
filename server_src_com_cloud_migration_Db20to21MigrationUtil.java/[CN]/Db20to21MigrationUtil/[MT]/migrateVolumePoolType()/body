{
  System.out.println("Migrating pool type for volumes...");
  SearchCriteria<VolumeVO> sc=_volumeDao.createSearchCriteria();
  List<VolumeVO> volumes=_volumeDao.searchAll(sc,null,false,false);
  for (  VolumeVO vol : volumes) {
    if (vol.getPoolId() != null) {
      StoragePoolVO pool=_poolDao.findById(vol.getPoolId());
      if (pool != null) {
        vol.setPoolType(pool.getPoolType());
        _volumeDao.update(vol.getId(),vol);
      }
 else {
        System.out.println("Unable to determine pool type for volume: " + vol.getName());
      }
    }
  }
  System.out.println("Migrating pool type for volumes done");
}
