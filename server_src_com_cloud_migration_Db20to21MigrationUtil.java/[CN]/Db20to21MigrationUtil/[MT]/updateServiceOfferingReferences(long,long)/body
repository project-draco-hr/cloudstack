{
  Transaction txn=Transaction.open(Transaction.CLOUD_DB);
  try {
    PreparedStatement pstmt=null;
    pstmt=txn.prepareAutoCloseStatement("UPDATE user_vm SET service_offering_id=? WHERE service_offering_id=?");
    pstmt.setLong(1,newServiceOfferingId);
    pstmt.setLong(2,oldServiceOfferingId);
    int rows=pstmt.executeUpdate();
    s_logger.info("Update user_vm for service offering change (" + oldServiceOfferingId + "->"+ newServiceOfferingId+ "), affected rows: "+ rows);
  }
 catch (  SQLException e) {
    s_logger.error("Unhandled exception: ",e);
  }
 finally {
    txn.close();
  }
}
