{
  boolean createCluster=false;
  String value=_configDao.getValue("xen.create.pools.in.pod");
  if (value == null || !value.equalsIgnoreCase("true")) {
    s_logger.info("System is not configured to use Xen server pool, we will skip creating cluster for pods");
  }
 else {
    createCluster=true;
  }
  GenericSearchBuilder<DataCenterVO,DcPod> sb=_dcDao.createSearchBuilder(DcPod.class);
  sb.selectField(sb.entity().getId());
  sb.selectField(sb.entity().getName());
  sb.select("count",Func.COUNT,null);
  sb.groupBy(sb.entity().getId(),sb.entity().getName());
  sb.done();
  SearchCriteria<DcPod> sc=sb.create();
  List<DcPod> results=_dcDao.searchIncludingRemoved(sc,(Filter)null);
  if (results.size() > 0) {
    System.out.println("We've found following zones are deployed in your database");
    for (    DcPod cols : results) {
      System.out.println("\tid: " + cols.id + ",\tname: "+ cols.name+ ",\tpods in zone: "+ cols.count);
    }
    System.out.println("From 2.0 to 2.1, pod is required to have gateway configuration");
    for (    DcPod cols : results) {
      migrateZonePods(cols.id,cols.name,createCluster);
      s_logger.info("Set system VM guest MAC in zone" + cols.name);
      migrateSystemVmGuestMacAndState(cols.id);
    }
  }
 else {
    System.out.println("We couldn't find any zone being deployed. Skip Zone/Pod migration");
  }
}
