{
  List<DnsmasqTO> dnsmasqTOs=dnsMasqconfigcmd.getIps();
  List<String> dnsMasqconf=Arrays.asList(Dnsmasq_config);
  String range="";
  String gateway="";
  String netmask="";
  String domain=dnsMasqconfigcmd.getDomain();
  String dnsServers="";
  int i=0;
  for (; i < dnsmasqTOs.size(); i++) {
    range=range + "dhcp-range=set:range" + i+ ","+ dnsmasqTOs.get(i).getRouterIp()+ ",static\n";
    gateway=gateway + "dhcp-option=tag:range" + i+ ",3,"+ dnsmasqTOs.get(i).getGateway()+ "\n";
    netmask=netmask + "dhcp-option=tag:range" + i+ ",1,"+ dnsmasqTOs.get(i).getNetmask()+ "\n";
  }
  dnsMasqconf.set(12,"domain=" + domain + "\n");
  dnsMasqconf.set(14,"domain=" + domain + "\n");
  dnsMasqconf.set(16,"domain=" + domain + "\n");
  dnsMasqconf.set(18,range);
  dnsMasqconf.set(22,gateway);
  dnsMasqconf.set(23,netmask);
  if (dnsMasqconfigcmd.getInternal_dns1() != null) {
    dnsServers=dnsServers + dnsMasqconfigcmd.getInternal_dns1() + ",";
  }
  if (dnsMasqconfigcmd.getInternal_dns2() != null) {
    dnsServers=dnsServers + dnsMasqconfigcmd.getInternal_dns2() + ",";
  }
  if (dnsMasqconfigcmd.getDns1() != null) {
    dnsServers=dnsServers + dnsMasqconfigcmd.getDns1() + ",";
  }
  if (dnsMasqconfigcmd.getDns2() != null) {
    dnsServers=dnsServers + dnsMasqconfigcmd.getDns2() + ",";
  }
  dnsServers=dnsServers + "*";
  dnsServers=dnsServers.replace(",*","");
  dnsMasqconf.set(24,"dhcp-option=6," + dnsServers);
  return dnsMasqconf.toArray(new String[dnsMasqconf.size()]);
}
