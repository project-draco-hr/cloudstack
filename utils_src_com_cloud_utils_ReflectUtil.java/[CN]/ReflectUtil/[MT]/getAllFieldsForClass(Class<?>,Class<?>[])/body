{
  Field[] fields=cmdClass.getDeclaredFields();
  Class<?> superClass=cmdClass.getSuperclass();
  while (superClass != null && superClass != Object.class) {
    String superName=superClass.getName();
    for (    Class<?> baseClass : searchClasses) {
      if (!baseClass.isAssignableFrom(superClass))       continue;
      if (!superName.equals(baseClass.getName())) {
        Field[] superClassFields=superClass.getDeclaredFields();
        if (superClassFields != null) {
          Field[] tmpFields=new Field[fields.length + superClassFields.length];
          System.arraycopy(fields,0,tmpFields,0,fields.length);
          System.arraycopy(superClassFields,0,tmpFields,fields.length,superClassFields.length);
          fields=tmpFields;
        }
      }
    }
    superClass=superClass.getSuperclass();
  }
  return fields;
}
