{
  log.info("Configuring CloudStack Components");
  with(new WithComponentLifeCycle(){
    @Override public void with(    ComponentLifecycle lifecycle){
      try {
        lifecycle.configure(lifecycle.getName(),lifecycle.getConfigParams());
      }
 catch (      ConfigurationException e) {
        log.error("Failed to configure {}",lifecycle.getName(),e);
        throw new CloudRuntimeException(e);
      }
    }
  }
);
  log.info("Done Configuring CloudStack Components");
}
