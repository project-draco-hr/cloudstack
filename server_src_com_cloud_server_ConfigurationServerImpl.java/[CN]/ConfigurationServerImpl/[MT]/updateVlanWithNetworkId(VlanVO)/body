{
  long zoneId=vlan.getDataCenterId();
  long networkId=0L;
  if (vlan.getVlanType() == VlanType.VirtualNetwork) {
    networkId=getSystemNetworkIdByZoneAndTrafficTypeAndGuestType(zoneId,TrafficType.Public,null);
  }
 else   if (vlan.getVlanType() == VlanType.DirectAttached) {
    networkId=getSystemNetworkIdByZoneAndTrafficTypeAndGuestType(zoneId,TrafficType.Public,GuestIpType.DirectPodBased);
  }
  vlan.setNetworkId(networkId);
  _vlanDao.update(vlan.getId(),vlan);
}
