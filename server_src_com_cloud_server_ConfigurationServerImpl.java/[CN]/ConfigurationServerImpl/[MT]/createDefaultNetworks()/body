{
  List<DataCenterVO> zones=_dataCenterDao.listAll();
  long id=1;
  HashMap<TrafficType,String> guruNames=new HashMap<TrafficType,String>();
  guruNames.put(TrafficType.Public,PublicNetworkGuru.class.getSimpleName());
  guruNames.put(TrafficType.Management,PodBasedNetworkGuru.class.getSimpleName());
  guruNames.put(TrafficType.Control,ControlNetworkGuru.class.getSimpleName());
  guruNames.put(TrafficType.Storage,PodBasedNetworkGuru.class.getSimpleName());
  guruNames.put(TrafficType.Guest,DirectPodBasedNetworkGuru.class.getSimpleName());
  for (  DataCenterVO zone : zones) {
    long zoneId=zone.getId();
    long accountId=1L;
    Long domainId=zone.getDomainId();
    if (domainId == null) {
      domainId=1L;
    }
    List<NetworkOfferingVO> ntwkOff=_networkOfferingDao.listSystemNetworkOfferings();
    for (    NetworkOfferingVO offering : ntwkOff) {
      if (offering.isSystemOnly()) {
        long related=id;
        long networkOfferingId=offering.getId();
        Mode mode=Mode.Static;
        BroadcastDomainType broadcastDomainType=null;
        TrafficType trafficType=offering.getTrafficType();
        if (trafficType == TrafficType.Management || trafficType == TrafficType.Storage) {
          broadcastDomainType=BroadcastDomainType.Native;
        }
 else         if (trafficType == TrafficType.Control) {
          broadcastDomainType=BroadcastDomainType.LinkLocal;
        }
 else         if (offering.getTrafficType() == TrafficType.Public) {
          if (zone.getNetworkType() == NetworkType.Advanced) {
            broadcastDomainType=BroadcastDomainType.Vlan;
          }
 else {
            continue;
          }
        }
 else         if (offering.getTrafficType() == TrafficType.Guest) {
          if (zone.getNetworkType() == NetworkType.Basic) {
            broadcastDomainType=BroadcastDomainType.Native;
          }
 else {
            continue;
          }
        }
        if (broadcastDomainType != null) {
          NetworkVO network=new NetworkVO(id,trafficType,null,mode,broadcastDomainType,networkOfferingId,zoneId,domainId,accountId,related,null,null,true,false);
          network.setGuruName(guruNames.get(network.getTrafficType()));
          network.setDns1(zone.getDns1());
          network.setDns2(zone.getDns2());
          network.setState(State.Implemented);
          _networkDao.persist(network,false);
          id++;
        }
      }
    }
  }
}
