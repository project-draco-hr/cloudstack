{
  SnapshotObjectTO snapshot=(SnapshotObjectTO)cmd.getData();
  DataStoreTO store=snapshot.getDataStore();
  if (store.getRole() == DataStoreRole.Primary) {
    Connection conn=this.hypervisorResource.getConnection();
    VDI snapshotVdi=getVDIbyUuid(conn,snapshot.getPath());
    if (snapshotVdi == null) {
      return new Answer(null);
    }
    String errMsg=null;
    try {
      this.deleteVDI(conn,snapshotVdi);
    }
 catch (    BadServerResponse e) {
      s_logger.debug("delete snapshot failed:" + e.toString());
      errMsg=e.toString();
    }
catch (    XenAPIException e) {
      s_logger.debug("delete snapshot failed:" + e.toString());
      errMsg=e.toString();
    }
catch (    XmlRpcException e) {
      s_logger.debug("delete snapshot failed:" + e.toString());
      errMsg=e.toString();
    }
    return new Answer(cmd,false,errMsg);
  }
  return new Answer(cmd,false,"unsupported storage type");
}
