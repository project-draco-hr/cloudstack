{
  Account caller=CallContext.current().getCallingAccount();
  Domain domain=null;
  if (domainId != null) {
    domain=_domainDao.findById(domainId);
    if (domain == null) {
      throw new InvalidParameterValueException("Domain id=" + domainId + " doesn't exist");
    }
    _accountMgr.checkAccess(caller,domain);
  }
 else {
    domain=_domainDao.findById(caller.getDomainId());
  }
  String domainPath=domain.getPath();
  Pair<List<AclGroup>,Integer> result=_iamSrv.listAclGroups(aclGroupId,aclGroupName,domainPath,startIndex,pageSize);
  ListResponse<AclGroupResponse> response=new ListResponse<AclGroupResponse>();
  List<AclGroupResponse> groupResponses=new ArrayList<AclGroupResponse>();
  for (  AclGroup group : result.first()) {
    AclGroupResponse resp=createAclGroupResponse(group);
    groupResponses.add(resp);
  }
  response.setResponses(groupResponses,result.second());
  return response;
}
