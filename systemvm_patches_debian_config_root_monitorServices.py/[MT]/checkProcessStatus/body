def checkProcessStatus(process):
    '\n    Check the process running status, if not running tries to restart\n    '
    process_name = process.get('processname')
    service_name = process.get('servicename')
    pidfile = process.get('pidfile')
    restartFailed = False
    pidFileMatched = False
    pids = ''
    cmd = ''
    if (process_name is None):
        printd('\n Invalid Process Name')
        return StatusCodes.INVALID_INP
    else:
        printd(('checking the process ' + process_name))
        cmd = ('pidof ' + process_name)
        printd(cmd)
        pout = Popen(cmd, shell=True, stdout=PIPE)
        exitStatus = pout.wait()
        temp_out = pout.communicate()[0]
    if (exitStatus == 0):
        pids = temp_out.split(' ')
        msg = ('pids: ' + temp_out)
        printd(msg)
        printd('Checking pid file')
        if (isPidMatchPidFile(pidfile, pids) == StatusCodes.SUCCESS):
            pidFileMatched = True
        else:
            pidFileMatched = False
    if ((exitStatus == 0) and (pidFileMatched == True)):
        printd('The process is running ....')
        return StatusCodes.RUNNING
    else:
        printd(('exit status:' + str(exitStatus)))
        msg = (('The process ' + process_name) + ' is not running trying recover ')
        printd(msg)
        for i in range(1, Config.RETRY_ITERATIONS):
            pout = Popen(cmd, shell=True, stdout=PIPE)
            exitStatus = pout.wait()
            temp_out = pout.communicate()[0]
            if (i < Config.RETRY_FOR_RESTART):
                if (exitStatus == 0):
                    pids = temp_out.split(' ')
                    if (isPidMatchPidFile(pidfile, pids) == StatusCodes.SUCCESS):
                        pidFileMatched = True
                        printd('pid file is matched ...')
                        raisealert(Log.ALERT, 'The process detected as running', process_name)
                        break
                    else:
                        printd('pid file is not matched ...')
                        pidFileMatched = False
                        time.sleep(Config.SLEEP_SEC)
                        continue
            else:
                msg = (('The process ' + process_name) + ' is not running trying recover ')
                raisealert(Log.INFO, process_name, msg)
                if (service_name == 'apache2'):
                    for pid in pids:
                        cmd = ('kill -9 ' + pid)
                        printd(cmd)
                        Popen(cmd, shell=True, stdout=PIPE, stderr=STDOUT)
                cmd = (('service ' + service_name) + ' restart')
                time.sleep(Config.SLEEP_SEC)
                cout = Popen(cmd, shell=True, stdout=PIPE, stderr=STDOUT)
                return_val = cout.wait()
                if (return_val == 0):
                    printd((('The process' + process_name) + ' recovered successfully '))
                    msg = (('The process ' + process_name) + ' is recovered successfully ')
                    raisealert(Log.INFO, msg, process_name)
                    break
                else:
                    printd('process restart failing trying again ....')
                    restartFailed = True
                    time.sleep(Config.SLEEP_SEC)
                    continue
        if (restartFailed == True):
            msg = ('The process %s recover failed ' % process_name)
            raisealert(Log.ALERT, process_name, msg)
            printd('Restart failed after number of retries')
            return StatusCodes.STOPPED
    return StatusCodes.RUNNING
