{
  S3MultipartPart[] parts=new S3MultipartPart[maxParts];
  int i=0;
  List<MultiPartPartsVO> partsVO;
  try {
    partsVO=mpartPartsDao.getParts(uploadId,startAt + maxParts + 1,startAt);
    for (    MultiPartPartsVO partVO : partsVO) {
      Calendar tod=Calendar.getInstance();
      tod.setTime(partVO.getCreateTime());
      parts[i]=new S3MultipartPart();
      parts[i].setPartNumber(partVO.getPartNumber());
      parts[i].setEtag(partVO.getMd5());
      parts[i].setLastModified(tod);
      parts[i].setSize(partVO.getStoredSize().intValue());
      parts[i].setPath(partVO.getStoredPath());
      i++;
    }
    if (i < maxParts)     parts=(S3MultipartPart[])resizeArray(parts,i);
    return parts;
  }
  finally {
  }
}
