{
  PropertySpec pSpec=new PropertySpec();
  pSpec.setType("VirtualMachine");
  pSpec.getPathSet().add("name");
  pSpec.getPathSet().add("config.files");
  ObjectSpec oSpec=new ObjectSpec();
  oSpec.setObj(_mor);
  oSpec.setSkip(Boolean.FALSE);
  PropertyFilterSpec pfSpec=new PropertyFilterSpec();
  pfSpec.getPropSet().add(pSpec);
  pfSpec.getObjectSet().add(oSpec);
  List<PropertyFilterSpec> pfSpecArr=new ArrayList<PropertyFilterSpec>();
  pfSpecArr.add(pfSpec);
  List<ObjectContent> ocs=_context.getService().retrieveProperties(_context.getPropertyCollector(),pfSpecArr);
  assert(ocs != null);
  String vmName=null;
  VirtualMachineFileInfo fileInfo=null;
  assert(ocs.size() == 1);
  for (  ObjectContent oc : ocs) {
    List<DynamicProperty> props=oc.getPropSet();
    if (props != null) {
      assert(props.size() == 2);
      for (      DynamicProperty prop : props) {
        if (prop.getName().equals("name")) {
          vmName=prop.getVal().toString();
        }
 else {
          fileInfo=(VirtualMachineFileInfo)prop.getVal();
        }
      }
    }
  }
  assert(vmName != null);
  assert(fileInfo != null);
  DatastoreFile vmxFile=new DatastoreFile(fileInfo.getVmPathName());
  return vmxFile.getCompanionPath(vmName + ".vmsd");
}
