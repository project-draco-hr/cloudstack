{
  assert(disks != null);
  assert(disks.length >= 1);
  HostMO hostMo=getRunningHost();
  VirtualMachineConfigInfo vmConfigInfo=getConfigInfo();
  hostMo.createBlankVm(clonedVmName,1,cpuSpeedMHz,0,false,memoryMb,vmConfigInfo.getGuestId(),morDs,false);
  VirtualMachineMO clonedVmMo=hostMo.findVmOnHyperHost(clonedVmName);
  VirtualMachineConfigSpec vmConfigSpec=new VirtualMachineConfigSpec();
  VirtualDeviceConfigSpec[] deviceConfigSpecArray=new VirtualDeviceConfigSpec[1];
  deviceConfigSpecArray[0]=new VirtualDeviceConfigSpec();
  VirtualDevice device=VmwareHelper.prepareDiskDevice(clonedVmMo,-1,disks,morDs,-1,1);
  deviceConfigSpecArray[0].setDevice(device);
  deviceConfigSpecArray[0].setOperation(VirtualDeviceConfigSpecOperation.add);
  vmConfigSpec.setDeviceChange(deviceConfigSpecArray);
  clonedVmMo.configureVm(vmConfigSpec);
}
