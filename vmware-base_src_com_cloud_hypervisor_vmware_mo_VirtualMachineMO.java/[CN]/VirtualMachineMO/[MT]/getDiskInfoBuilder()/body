{
  VirtualMachineDiskInfoBuilder builder=new VirtualMachineDiskInfoBuilder();
  List<VirtualDevice> devices=(List<VirtualDevice>)_context.getVimClient().getDynamicProperty(_mor,"config.hardware.device");
  if (devices != null && devices.size() > 0) {
    for (    VirtualDevice device : devices) {
      if (device instanceof VirtualDisk) {
        VirtualDeviceBackingInfo backingInfo=((VirtualDisk)device).getBacking();
        if (backingInfo instanceof VirtualDiskFlatVer2BackingInfo) {
          VirtualDiskFlatVer2BackingInfo diskBackingInfo=(VirtualDiskFlatVer2BackingInfo)backingInfo;
          while (diskBackingInfo != null) {
            String deviceBusName=getDeviceBusName(devices,device);
            builder.addDisk(deviceBusName,diskBackingInfo.getFileName());
            diskBackingInfo=diskBackingInfo.getParent();
          }
        }
      }
    }
  }
  return builder;
}
