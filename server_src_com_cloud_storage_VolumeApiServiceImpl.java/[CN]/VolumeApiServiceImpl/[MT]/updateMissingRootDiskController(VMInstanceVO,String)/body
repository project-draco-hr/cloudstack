{
  if (vm == null || !VirtualMachine.Type.User.equals(vm.getType()) || Strings.isNullOrEmpty(rootVolChainInfo)) {
    return;
  }
  String rootDiskController=null;
  try {
    final VirtualMachineDiskInfo infoInChain=_gson.fromJson(rootVolChainInfo,VirtualMachineDiskInfo.class);
    if (infoInChain != null) {
      rootDiskController=infoInChain.getControllerFromDeviceBusName();
    }
    final UserVmVO userVmVo=_userVmDao.findById(vm.getId());
    if ((rootDiskController != null) && (!rootDiskController.isEmpty())) {
      _userVmDao.loadDetails(userVmVo);
      _userVmMgr.persistDeviceBusInfo(userVmVo,rootDiskController);
    }
  }
 catch (  JsonParseException e) {
    s_logger.debug("Error parsing chain info json: " + e.getMessage());
  }
}
