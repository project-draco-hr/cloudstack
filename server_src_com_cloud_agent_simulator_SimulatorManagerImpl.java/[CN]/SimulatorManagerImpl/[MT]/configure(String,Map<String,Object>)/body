{
  try {
    FileAgentStateFilter filter=new FileAgentStateFilter();
    File dir=new File(getAgentPath());
    if (!dir.exists()) {
      s_logger.error("The directory " + getAgentPath() + " containing agent states does not exist. Assuming fresh run.");
      return false;
    }
 else {
      File[] agentStateFiles=dir.listFiles(filter);
      if (agentStateFiles.length == 0) {
        s_logger.error("The directory " + getAgentPath() + " containing agent states is empty. Assuming fresh run");
        return false;
      }
      restoreAllResourceStates(agentStateFiles);
    }
  }
 catch (  FileNotFoundException e) {
    s_logger.info("Failed to stop simulator because of " + e.getStackTrace());
  }
catch (  IOException e) {
    s_logger.info("Failed to stop simulator because of " + e.getStackTrace());
  }
  return true;
}
