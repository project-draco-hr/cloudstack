{
  DataTO srcData=cmd.getSrcTO();
  DataTO destData=cmd.getDestTO();
  DataStoreTO srcDataStore=srcData.getDataStore();
  DataStoreTO destDataStore=destData.getDataStore();
  if (srcDataStore.getRole() == DataStoreRole.Image && destDataStore.getRole() == DataStoreRole.ImageCache) {
    if (!(destDataStore instanceof NfsTO)) {
      s_logger.debug("only support nfs as cache storage");
      return Answer.createUnsupportedCommandAnswer(cmd);
    }
    if (srcDataStore instanceof S3TO) {
      return downloadFromS3ToNfs(cmd,srcData,(S3TO)srcDataStore,destData,(NfsTO)destDataStore);
    }
 else     if (srcDataStore instanceof SwiftTO) {
      return downloadFromSwiftToNfs(cmd,srcData,(SwiftTO)srcDataStore,destData,(NfsTO)destDataStore);
    }
 else {
      return Answer.createUnsupportedCommandAnswer(cmd);
    }
  }
  return Answer.createUnsupportedCommandAnswer(cmd);
}
