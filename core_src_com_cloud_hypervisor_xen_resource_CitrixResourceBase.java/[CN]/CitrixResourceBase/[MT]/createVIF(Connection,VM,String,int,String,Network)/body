{
  VIF.Record vifr=new VIF.Record();
  vifr.VM=vm;
  vifr.device=devNum;
  vifr.MAC=mac;
  vifr.network=network;
  if (rate == 0)   rate=200;
  vifr.qosAlgorithmType="ratelimit";
  vifr.qosAlgorithmParams=new HashMap<String,String>();
  vifr.qosAlgorithmParams.put("kbps",Integer.toString(rate * 1000));
  return VIF.create(conn,vifr);
}
