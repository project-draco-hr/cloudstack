{
  try {
    Network vswitchNw=null;
    if (_host.vswitchNetwork == null) {
      Network.Record rec=new Network.Record();
      String nwName=Networks.BroadcastScheme.VSwitch.toString();
      Set<Network> networks=Network.getByNameLabel(conn,nwName);
      if (networks.size() == 0) {
        rec.nameDescription="vswitch network for " + nwName;
        rec.nameLabel=nwName;
        vswitchNw=Network.create(conn,rec);
      }
 else {
        vswitchNw=networks.iterator().next();
      }
      enableXenServerNetwork(conn,vswitchNw,"vswitch","vswicth network");
      _host.vswitchNetwork=vswitchNw.getUuid(conn);
    }
 else {
      vswitchNw=Network.getByUuid(conn,_host.vswitchNetwork);
      enableXenServerNetwork(conn,vswitchNw,"vswitch","vswicth network");
    }
    return vswitchNw;
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  return null;
}
