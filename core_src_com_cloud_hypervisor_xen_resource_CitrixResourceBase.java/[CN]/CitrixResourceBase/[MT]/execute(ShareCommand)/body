{
  if (!cmd.isShare()) {
    SR sr=getISOSRbyVmName(cmd.getVmName());
    Connection conn=getConnection();
    try {
      if (sr != null) {
        Set<VM> vms=VM.getByNameLabel(conn,cmd.getVmName());
        if (vms.size() == 0) {
          removeSR(sr);
        }
      }
    }
 catch (    Exception e) {
      String msg="SR.getNameLabel failed due to  " + e.getMessage() + e.toString();
      s_logger.warn(msg);
    }
  }
  return new ShareAnswer(cmd,new HashMap<String,Integer>());
}
