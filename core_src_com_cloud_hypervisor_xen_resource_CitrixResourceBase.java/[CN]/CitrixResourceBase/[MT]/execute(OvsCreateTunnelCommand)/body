{
  Connection conn=getConnection();
  String bridge="unknown";
  try {
    s_logger.debug("### About to create tunnel network");
    Network nw=createAndConfigureTunnelNetwork(conn,cmd.getNetworkId(),cmd.getFrom());
    if (nw == null) {
      s_logger.debug("### SOMETHING WENT WRONG DURING NETWORK SETUP");
      return new OvsCreateTunnelAnswer(cmd,false,"Cannot create network",bridge);
    }
    bridge=nw.getBridge(conn);
    s_logger.debug("### The bridge is:" + bridge);
    String result=callHostPlugin(conn,"ovstunnel","create_tunnel","bridge",bridge,"remote_ip",cmd.getRemoteIp(),"key",cmd.getKey(),"from",cmd.getFrom().toString(),"to",cmd.getTo().toString());
    s_logger.debug("### Result from create tunnel operation:" + result);
    String[] res=result.split(":");
    if (res.length == 2 && res[0].equalsIgnoreCase("SUCCESS")) {
      return new OvsCreateTunnelAnswer(cmd,true,result,res[1],bridge);
    }
 else {
      return new OvsCreateTunnelAnswer(cmd,false,result,bridge);
    }
  }
 catch (  Exception e) {
    s_logger.debug("### SOMETHING WENT WRONG DURING TUNNEL SETUP");
    s_logger.warn("caught execption when creating ovs tunnel",e);
    return new OvsCreateTunnelAnswer(cmd,false,e.getMessage(),bridge);
  }
}
