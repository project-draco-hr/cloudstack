{
  Connection conn=getConnection();
  if (!getHostInfo(conn)) {
    s_logger.warn("Unable to get host information for " + _host.ip);
    return null;
  }
  StartupRoutingCommand cmd=new StartupRoutingCommand();
  fillHostInfo(conn,cmd);
  Map<String,State> changes=null;
synchronized (_vms) {
    _vms.clear();
    changes=sync(conn);
  }
  cmd.setHypervisorType(HypervisorType.XenServer);
  cmd.setChanges(changes);
  cmd.setCluster(_cluster);
  StartupStorageCommand sscmd=initializeLocalSR(conn);
  if (sscmd != null) {
    return new StartupCommand[]{cmd,sscmd};
  }
  return new StartupCommand[]{cmd};
}
