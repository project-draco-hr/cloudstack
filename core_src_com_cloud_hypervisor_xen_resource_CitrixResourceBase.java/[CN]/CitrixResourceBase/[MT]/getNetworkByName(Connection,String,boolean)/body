{
  Network found=null;
  Set<Network> networks=Network.getByNameLabel(conn,name);
  if (networks.size() == 1) {
    found=networks.iterator().next();
  }
 else   if (networks.size() > 1) {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Found more than one network with the name " + name);
    }
    for (    Network network : networks) {
      if (!lookForPif) {
        found=network;
        break;
      }
      Network.Record netr=network.getRecord(conn);
      s_logger.debug("Checking network " + netr.uuid);
      if (netr.PIFs.size() == 0) {
        if (s_logger.isDebugEnabled()) {
          s_logger.debug("Network " + netr.uuid + " has no pifs so skipping that.");
        }
      }
 else {
        for (        PIF pif : netr.PIFs) {
          PIF.Record pifr=pif.getRecord(conn);
          if (_host.uuid.equals(pifr.host.getUuid(conn))) {
            if (s_logger.isDebugEnabled()) {
              s_logger.debug("Network " + netr.uuid + " has a pif "+ pifr.uuid+ " for our host ");
            }
            found=network;
            break;
          }
        }
      }
    }
  }
  return found;
}
