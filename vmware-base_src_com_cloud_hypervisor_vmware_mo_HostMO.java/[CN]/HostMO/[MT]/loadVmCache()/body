{
  if (s_logger.isDebugEnabled())   s_logger.debug("load VM cache on host");
  _vmCache.clear();
  ObjectContent[] ocs=getVmPropertiesOnHyperHost(new String[]{"name"});
  if (ocs != null && ocs.length > 0) {
    for (    ObjectContent oc : ocs) {
      List<DynamicProperty> props=oc.getPropSet();
      if (props != null) {
        String vmVcenterName=null;
        String vmInternalCSName=null;
        for (        DynamicProperty prop : props) {
          if (prop.getName().equals("name")) {
            vmVcenterName=prop.getVal().toString();
          }
        }
        VirtualMachineMO vmMo=new VirtualMachineMO(_context,oc.getObj());
        vmInternalCSName=vmMo.getCustomFieldValue(CustomFieldConstants.CLOUD_VM_INTERNAL_NAME);
        String vmName=null;
        if (vmInternalCSName != null && isUserVMInternalCSName(vmInternalCSName)) {
          vmName=vmInternalCSName;
        }
 else {
          vmName=vmVcenterName;
        }
        if (s_logger.isTraceEnabled())         s_logger.trace("put " + vmName + " into host cache");
        _vmCache.put(vmName,new VirtualMachineMO(_context,oc.getObj()));
      }
    }
  }
}
