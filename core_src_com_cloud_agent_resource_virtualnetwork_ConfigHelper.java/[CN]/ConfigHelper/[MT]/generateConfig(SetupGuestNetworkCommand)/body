{
  NicTO nic=cmd.getNic();
  String routerGIP=cmd.getAccessDetail(NetworkElementCommand.ROUTER_GUEST_IP);
  String gateway=cmd.getAccessDetail(NetworkElementCommand.GUEST_NETWORK_GATEWAY);
  String cidr=Long.toString(NetUtils.getCidrSize(nic.getNetmask()));
  String netmask=NetUtils.getSubNet(routerGIP,nic.getNetmask());
  String domainName=cmd.getNetworkDomain();
  String dns=cmd.getDefaultDns1();
  if (dns == null || dns.isEmpty()) {
    dns=cmd.getDefaultDns2();
  }
 else {
    String dns2=cmd.getDefaultDns2();
    if (dns2 != null && !dns2.isEmpty()) {
      dns+="," + dns2;
    }
  }
  GuestNetwork guestNetwork=new GuestNetwork(cmd.isAdd(),nic.getMac(),"eth" + nic.getDeviceId(),routerGIP,netmask,gateway,cidr,dns,domainName);
  LinkedList<ConfigItem> cfg=new LinkedList<>();
  ConfigItem guestNetworkConfig=new FileConfigItem(VRScripts.CONFIG_PERSIST_LOCATION,VRScripts.GUEST_NETWORK_CONFIG,gson.toJson(guestNetwork));
  cfg.add(guestNetworkConfig);
  ConfigItem updateGuestNetwork=new ScriptConfigItem(VRScripts.UPDATE_CONFIG,VRScripts.GUEST_NETWORK_CONFIG);
  cfg.add(updateGuestNetwork);
  return cfg;
}
