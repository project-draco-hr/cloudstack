{
  LinkedList<ConfigItem> cfg=new LinkedList<>();
  List<IpAddress> ips=new LinkedList<IpAddress>();
  for (  IpAddressTO ip : cmd.getIpAddresses()) {
    IpAddress ipAddress=new IpAddress(ip.getPublicIp(),ip.isSourceNat(),ip.isAdd(),ip.isOneToOneNat(),ip.isFirstIP(),ip.getVlanGateway(),ip.getVlanNetmask(),ip.getVifMacAddress(),ip.getNicDevId(),ip.isNewNic());
    ips.add(ipAddress);
  }
  IpAssociation ipAssociation=new IpAssociation(ips.toArray(new IpAddress[ips.size()]));
  ConfigItem ipAssociationsFile=new FileConfigItem(VRScripts.CONFIG_PERSIST_LOCATION,VRScripts.IP_ASSOCIATION_CONFIG,gson.toJson(ipAssociation));
  cfg.add(ipAssociationsFile);
  ConfigItem updateIpAssociations=new ScriptConfigItem(VRScripts.UPDATE_CONFIG,VRScripts.IP_ASSOCIATION_CONFIG);
  cfg.add(updateIpAssociations);
  return cfg;
}
