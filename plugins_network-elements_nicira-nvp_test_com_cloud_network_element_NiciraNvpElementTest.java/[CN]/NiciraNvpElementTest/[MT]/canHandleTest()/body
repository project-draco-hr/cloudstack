{
  Network net=mock(Network.class);
  when(net.getBroadcastDomainType()).thenReturn(BroadcastDomainType.Lswitch);
  when(net.getId()).thenReturn(42L);
  when(_ntwkSrvcDao.canProviderSupportServiceInNetwork(42L,Service.Connectivity,Provider.NiciraNvp)).thenReturn(true);
  assertTrue(_element.canHandle(net,Service.Connectivity));
  when(net.getBroadcastDomainType()).thenReturn(BroadcastDomainType.Vlan);
  assertFalse(_element.canHandle(net,Service.Connectivity));
  when(net.getBroadcastDomainType()).thenReturn(BroadcastDomainType.Lswitch);
  when(_ntwkSrvcDao.canProviderSupportServiceInNetwork(42L,Service.Connectivity,Provider.NiciraNvp)).thenReturn(false);
  assertFalse(_element.canHandle(net,Service.Connectivity));
  when(_networkManager.isProviderForNetwork(Provider.NiciraNvp,42L)).thenReturn(false);
  when(_ntwkSrvcDao.canProviderSupportServiceInNetwork(42L,Service.Connectivity,Provider.NiciraNvp)).thenReturn(true);
  assertFalse(_element.canHandle(net,Service.Connectivity));
  when(_networkManager.isProviderForNetwork(Provider.NiciraNvp,42L)).thenReturn(true);
  assertFalse(_element.canHandle(net,Service.Dhcp));
}
