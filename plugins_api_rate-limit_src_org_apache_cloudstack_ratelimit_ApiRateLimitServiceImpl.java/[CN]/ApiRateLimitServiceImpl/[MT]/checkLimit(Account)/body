{
  Long accountId=account.getId();
  StoreEntry entry=_store.get(accountId);
  if (entry == null) {
    entry=_store.create(accountId,timeToLive);
  }
  int current=entry.incrementAndGet();
  if (current <= maxAllowed) {
    return;
  }
 else {
    long expireAfter=entry.getExpireDuration();
    s_logger.warn("The given user has reached his/her account api limit, please retry after " + expireAfter + " ms.");
    throw new ServerApiException(BaseCmd.API_LIMIT_EXCEED,"The given user has reached his/her account api limit, please retry after " + expireAfter + " ms.");
  }
}
