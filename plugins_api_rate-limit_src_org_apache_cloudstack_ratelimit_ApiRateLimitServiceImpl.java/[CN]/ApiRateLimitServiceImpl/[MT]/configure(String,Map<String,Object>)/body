{
  super.configure(name,params);
  if (_store == null) {
    Object duration=params.get("api.throttling.interval");
    if (duration != null) {
      timeToLive=Integer.parseInt((String)duration);
    }
    Object maxReqs=params.get("api.throttling.max");
    if (maxReqs != null) {
      maxAllowed=Integer.parseInt((String)maxReqs);
    }
    EhcacheLimitStore cacheStore=new EhcacheLimitStore();
    int maxElements=10000;
    Object cachesize=params.get("api.throttling.cachesize");
    if (cachesize != null) {
      maxElements=Integer.parseInt((String)cachesize);
    }
    CacheManager cm=CacheManager.create();
    Cache cache=new Cache("api-limit-cache",maxElements,false,false,timeToLive,timeToLive);
    cm.addCache(cache);
    s_logger.info("Limit Cache created with timeToLive=" + timeToLive + ", maxAllowed="+ maxAllowed+ ", maxElements="+ maxElements);
    cacheStore.setCache(cache);
    _store=cacheStore;
  }
  return true;
}
