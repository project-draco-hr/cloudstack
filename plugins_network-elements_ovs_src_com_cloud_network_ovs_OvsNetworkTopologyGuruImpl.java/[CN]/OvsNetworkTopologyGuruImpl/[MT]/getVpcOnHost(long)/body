{
  List<Long> vpcIds=new ArrayList<>();
  List<VMInstanceVO> vmInstances=_vmInstanceDao.listByHostId(hostId);
  for (  VMInstanceVO instance : vmInstances) {
    List<NicVO> nics=_nicDao.listByVmId(instance.getId());
    for (    Nic nic : nics) {
      Network network=_networkDao.findById(nic.getNetworkId());
      if (network.getTrafficType() == Networks.TrafficType.Guest && network.getVpcId() != null) {
        if (!vpcIds.contains(network.getVpcId())) {
          vpcIds.add(network.getVpcId());
        }
      }
    }
  }
  return vpcIds;
}
