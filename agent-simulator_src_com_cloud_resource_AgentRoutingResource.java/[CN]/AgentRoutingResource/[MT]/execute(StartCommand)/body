{
  VirtualMachineTO vmSpec=cmd.getVirtualMachine();
  String vmName=vmSpec.getName();
  State state=State.Stopped;
synchronized (_vms) {
    _vms.put(vmName,State.Starting);
  }
  try {
    Answer result=_simMgr.simulate(cmd,hostGuid);
    if (!result.getResult()) {
      return new StartAnswer(cmd,result.getDetails());
    }
    state=State.Running;
  }
  finally {
synchronized (_vms) {
      _vms.put(vmName,state);
    }
  }
  return new StartAnswer(cmd);
}
