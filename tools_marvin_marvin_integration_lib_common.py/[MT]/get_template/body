def get_template(apiclient, zoneid, ostype, services=None, templatefilter='featured', templatetype='BUILTIN'):
    'Returns a template'
    cmd = listOsTypes.listOsTypesCmd()
    cmd.description = ostype
    ostypes = apiclient.listOsTypes(cmd)
    if isinstance(ostypes, list):
        ostypeid = ostypes[0].id
    else:
        raise Exception(('Failed to find OS type with description: %s' % ostype))
    cmd = listTemplates.listTemplatesCmd()
    cmd.templatefilter = templatefilter
    cmd.zoneid = zoneid
    if services:
        if ('template' in services):
            cmd.id = services['template']
    list_templates = apiclient.listTemplates(cmd)
    if isinstance(list_templates, list):
        assert (len(list_templates) > 0), ('received empty response on template of type %s' % ostype)
        for template in list_templates:
            if ((template.ostypeid == ostypeid) and template.isready and (template.templatetype == templatetype)):
                return template
    raise Exception(('Exception: Failed to find template of type %s with OSTypeID and which is in ready state: %s' % (templatetype, ostypeid)))
    return
