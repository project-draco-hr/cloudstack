{
  method=mock(HttpPost.class);
  response=mock(HttpResponse.class);
  final StatusLine statusLine=mock(StatusLine.class);
  when(statusLine.getStatusCode()).thenReturn(HttpStatus.SC_OK);
  when(response.getStatusLine()).thenReturn(statusLine);
  when(response.getEntity()).thenReturn(new StringEntity(OUTPUT_XML_RESPONSE));
  Output result=api.getSwitchStatus();
  verify(method,times(1)).releaseConnection();
  assertEquals("Wrong URI for get SwitchStatus REST service",Constants.STATUS_URI,uri);
  assertEquals("Wrong HTTP method for get SwitchStatus REST service","post",type);
  assertEquals("Wrong state for get SwitchStatus REST service","Online",result.getVcsNodes().getVcsNodeInfo().get(0).getNodeState());
}
