{
  SearchBuilder<SAclVO> SearchByTarget=createSearchBuilder();
  SearchByTarget.and("Target",SearchByTarget.entity().getTarget(),SearchCriteria.Op.EQ);
  SearchByTarget.and("TargetID",SearchByTarget.entity().getTargetId(),SearchCriteria.Op.EQ);
  Transaction txn=Transaction.open(Transaction.AWSAPI_DB);
  try {
    txn.start();
    SearchCriteria<SAclVO> sc=SearchByTarget.create();
    sc.setParameters("Target",target);
    sc.setParameters("TargetID",targetId);
    this.remove(sc);
    if (acl != null) {
      S3Grant[] grants=acl.getGrants();
      if (grants != null && grants.length > 0) {
        int grantOrder=1;
        for (        S3Grant grant : grants) {
          save(target,targetId,grant,grantOrder++);
        }
      }
    }
    txn.commit();
  }
  finally {
    txn.close();
  }
}
