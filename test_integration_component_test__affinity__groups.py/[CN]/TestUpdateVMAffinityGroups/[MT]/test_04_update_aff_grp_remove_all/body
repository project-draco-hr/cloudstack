def test_04_update_aff_grp_remove_all(self):
    '\n            Update the list of Affinity Groups to empty list\n        '
    self.create_aff_grp(aff_grp=self.services['host_anti_affinity_0'])
    self.create_aff_grp(aff_grp=self.services['host_anti_affinity_1'])
    (vm1, hostid1) = self.create_vm_in_aff_grps([self.aff_grp[0].name])
    aff_grps_names = [self.aff_grp[0].name, self.aff_grp[1].name]
    vm1.stop(self.api_client)
    vm1.update_affinity_group(self.api_client, affinitygroupnames=[])
    vm1.start(self.api_client)
    list_aff_grps = AffinityGroup.list(self.api_client, virtualmachineid=vm1.id)
    self.assertEqual(list_aff_grps, [], 'The affinity groups list is not empyty')
    vm1.delete(self.api_client)
    wait_for_cleanup(self.apiclient, ['expunge.delay', 'expunge.interval'])
    for i in aff_grps_names:
        AffinityGroup.delete(self.api_client, i)
