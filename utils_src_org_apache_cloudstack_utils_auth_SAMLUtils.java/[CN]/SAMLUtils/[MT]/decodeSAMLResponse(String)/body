{
  try {
    DefaultBootstrap.bootstrap();
  }
 catch (  ConfigurationException|FactoryConfigurationError e) {
    s_logger.error("SAML response message decoding error: " + e.getMessage());
  }
  DocumentBuilderFactory documentBuilderFactory=DocumentBuilderFactory.newInstance();
  documentBuilderFactory.setNamespaceAware(true);
  DocumentBuilder docBuilder=documentBuilderFactory.newDocumentBuilder();
  byte[] base64DecodedResponse=Base64.decode(responseMessage);
  Document document=docBuilder.parse(new ByteArrayInputStream(base64DecodedResponse));
  Element element=document.getDocumentElement();
  UnmarshallerFactory unmarshallerFactory=Configuration.getUnmarshallerFactory();
  Unmarshaller unmarshaller=unmarshallerFactory.getUnmarshaller(element);
  return (Response)unmarshaller.unmarshall(element);
}
