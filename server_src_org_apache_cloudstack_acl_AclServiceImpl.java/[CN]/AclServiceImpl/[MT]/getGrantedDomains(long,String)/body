{
  List<AclPolicy> policies=listAclPolicies(accountId);
  List<Long> domainIds=new ArrayList<Long>();
  for (  AclPolicy policy : policies) {
    List<AclPolicyPermissionVO> pp=_policyPermissionDao.listGrantedByActionAndScope(policy.getId(),action,PermissionScope.DOMAIN);
    if (pp != null) {
      for (      AclPolicyPermissionVO p : pp) {
        if (p.getScopeId() != null) {
          domainIds.add(p.getScopeId());
        }
      }
    }
  }
  return domainIds;
}
