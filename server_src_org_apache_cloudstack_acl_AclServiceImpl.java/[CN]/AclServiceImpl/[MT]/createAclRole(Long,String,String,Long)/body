{
  Account caller=CallContext.current().getCallingAccount();
  if (domainId == null) {
    domainId=caller.getDomainId();
  }
  if (!_accountMgr.isRootAdmin(caller.getAccountId())) {
    if (caller.getDomainId() != domainId.longValue()) {
      throw new PermissionDeniedException("Can't create acl role in domain " + domainId + ", permission denied");
    }
  }
  AclRole ro=_aclRoleDao.findByName(domainId,aclRoleName);
  if (ro != null) {
    throw new InvalidParameterValueException("Unable to create acl role with name " + aclRoleName + " already exisits for domain "+ domainId);
  }
  Transaction txn=Transaction.currentTxn();
  txn.start();
  AclRoleVO rvo=new AclRoleVO(aclRoleName,description);
  rvo.setDomainId(domainId);
  AclRole role=_aclRoleDao.persist(rvo);
  if (parentRoleId != null) {
    List<AclRolePermissionVO> perms=_rolePermissionDao.listByRole(parentRoleId);
    if (perms != null) {
      for (      AclRolePermissionVO perm : perms) {
        perm.setAclRoleId(role.getId());
        _rolePermissionDao.persist(perm);
      }
    }
  }
  txn.commit();
  return role;
}
