{
  Account caller=CallContext.current().getCallingAccount();
  if (domainId == null) {
    domainId=caller.getDomainId();
  }
  if (!_accountMgr.isRootAdmin(caller.getAccountId())) {
    if (caller.getDomainId() != domainId.longValue()) {
      throw new PermissionDeniedException("Can't create acl role in domain " + domainId + ", permission denied");
    }
  }
  AclRole ro=_aclRoleDao.findByName(domainId,aclRoleName);
  if (ro != null) {
    throw new InvalidParameterValueException("Unable to create acl role with name " + aclRoleName + " already exisits for domain "+ domainId);
  }
  final long domain_id=domainId;
  AclRole role=Transaction.execute(new TransactionCallback<AclRole>(){
    @Override public AclRole doInTransaction(    TransactionStatus status){
      AclRoleVO rvo=new AclRoleVO(aclRoleName,description);
      rvo.setDomainId(domain_id);
      AclRole role=_aclRoleDao.persist(rvo);
      if (parentRoleId != null) {
        List<AclRolePermissionVO> perms=_policyPermissionDao.listByRole(parentRoleId);
        if (perms != null) {
          for (          AclRolePermissionVO perm : perms) {
            perm.setAclRoleId(role.getId());
            _policyPermissionDao.persist(perm);
          }
        }
      }
      return role;
    }
  }
);
  return role;
}
