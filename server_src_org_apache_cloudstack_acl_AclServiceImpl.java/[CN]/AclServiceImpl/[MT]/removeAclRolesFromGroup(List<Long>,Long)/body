{
  final Account caller=CallContext.current().getCallingAccount();
  AclGroup group=_aclGroupDao.findById(groupId);
  if (group == null) {
    throw new InvalidParameterValueException("Unable to find acl group: " + groupId + "; failed to remove roles from acl group.");
  }
  _accountMgr.checkAccess(caller,null,true,group);
  Transaction.execute(new TransactionCallbackNoReturn(){
    @Override public void doInTransactionWithoutResult(    TransactionStatus status){
      for (      Long roleId : roleIds) {
        AclRole role=_aclRoleDao.findById(roleId);
        if (role == null) {
          throw new InvalidParameterValueException("Unable to find acl role: " + roleId + "; failed to add roles to acl group.");
        }
        _accountMgr.checkAccess(caller,null,true,role);
        AclGroupRoleMapVO grMap=_aclGroupRoleMapDao.findByGroupAndRole(groupId,roleId);
        if (grMap != null) {
          _aclGroupRoleMapDao.remove(grMap.getId());
        }
      }
    }
  }
);
  return group;
}
