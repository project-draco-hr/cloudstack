{
  Volume vol=this.getVolume(id);
  if (vol == null) {
    return null;
  }
  if (!pdsInfo.isVolumeDiskTypeSupported(diskType)) {
    return null;
  }
  boolean result=vol.stateTransit(VolumeEvent.CreateRequested);
  if (!result) {
    return null;
  }
  try {
    vol.setVolumeDiskType(diskType);
    result=this.driver.createVolume(vol);
    vol.update();
    return vol;
  }
 catch (  Exception e) {
    result=false;
    s_logger.debug("Failed to create volume: " + e.toString());
    throw new CloudRuntimeException(e.toString());
  }
 finally {
    if (result == true) {
      vol.stateTransit(VolumeEvent.OperationSucceeded);
    }
 else {
      vol.stateTransit(VolumeEvent.OperationFailed);
    }
  }
}
