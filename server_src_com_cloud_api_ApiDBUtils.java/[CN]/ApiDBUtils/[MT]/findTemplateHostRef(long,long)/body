{
  VMTemplateVO vmTemplate=findTemplateById(templateId);
  if (vmTemplate.getHypervisorType() == HypervisorType.BareMetal) {
    return _templateHostDao.listByTemplateId(templateId).get(0);
  }
 else {
    return _storageMgr.getTemplateHostRef(zoneId,templateId);
  }
}
