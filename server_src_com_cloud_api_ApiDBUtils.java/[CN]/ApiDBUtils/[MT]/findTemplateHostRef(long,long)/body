{
  VMTemplateVO vmTemplate=findTemplateById(templateId);
  if (vmTemplate.getHypervisorType() == HypervisorType.BareMetal) {
    return _templateHostDao.listByTemplateId(templateId).get(0);
  }
 else {
    HostVO secondaryStorageHost=_storageMgr.getSecondaryStorageHost(zoneId);
    if (secondaryStorageHost == null) {
      return null;
    }
 else {
      return _templateHostDao.findByHostTemplate(secondaryStorageHost.getId(),templateId);
    }
  }
}
