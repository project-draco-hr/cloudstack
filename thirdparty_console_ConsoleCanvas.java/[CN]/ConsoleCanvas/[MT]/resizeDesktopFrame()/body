{
  setSize(scaledWidth,scaledHeight);
  Insets insets=viewer.desktopScrollPane.getInsets();
  viewer.desktopScrollPane.setSize(scaledWidth + 2 * Math.min(insets.left,insets.right),scaledHeight + 2 * Math.min(insets.top,insets.bottom));
  viewer.vncFrame.pack();
  Dimension screenSize=viewer.vncFrame.getToolkit().getScreenSize();
  Dimension frameSize=viewer.vncFrame.getSize();
  Dimension newSize=frameSize;
  screenSize.height-=30;
  screenSize.width-=30;
  boolean needToResizeFrame=false;
  if (frameSize.height > screenSize.height) {
    newSize.height=screenSize.height;
    needToResizeFrame=true;
  }
  if (frameSize.width > screenSize.width) {
    newSize.width=screenSize.width;
    needToResizeFrame=true;
  }
  if (needToResizeFrame) {
    viewer.vncFrame.setSize(newSize);
  }
  viewer.desktopScrollPane.doLayout();
}
