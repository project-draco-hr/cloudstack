{
  final DataTO data=cmd.getData();
  final VolumeObjectTO volume=(VolumeObjectTO)data;
  try {
    final Connection conn=hypervisorResource.getConnection();
    final SR poolSr=hypervisorResource.getStorageRepository(conn,data.getDataStore().getUuid());
    VDI.Record vdir=new VDI.Record();
    vdir.nameLabel=volume.getName();
    vdir.SR=poolSr;
    vdir.type=Types.VdiType.USER;
    vdir.virtualSize=volume.getSize();
    VDI vdi;
    vdi=VDI.create(conn,vdir);
    vdir=vdi.getRecord(conn);
    final VolumeObjectTO newVol=new VolumeObjectTO();
    newVol.setName(vdir.nameLabel);
    newVol.setSize(vdir.virtualSize);
    newVol.setPath(vdir.uuid);
    return new CreateObjectAnswer(newVol);
  }
 catch (  final Exception e) {
    s_logger.debug("create volume failed: " + e.toString());
    return new CreateObjectAnswer(e.toString());
  }
}
