{
  StringBuffer sb=new StringBuffer();
  int inactiveInterval=session.getMaxInactiveInterval();
  if (BaseCmd.RESPONSE_TYPE_JSON.equalsIgnoreCase(responseType)) {
    sb.append("{ \"loginresponse\" : { ");
    Enumeration attrNames=session.getAttributeNames();
    if (attrNames != null) {
      sb.append("\"timeout\" : \"" + inactiveInterval + "\"");
      while (attrNames.hasMoreElements()) {
        String attrName=(String)attrNames.nextElement();
        Object attrObj=session.getAttribute(attrName);
        if (attrObj instanceof String) {
          sb.append(", \"" + attrName + "\" : \""+ (String)attrObj+ "\"");
        }
      }
    }
    sb.append(" } }");
  }
 else {
    sb.append("<loginresponse>");
    sb.append("<timeout>" + inactiveInterval + "</timeout>");
    Enumeration attrNames=session.getAttributeNames();
    if (attrNames != null) {
      while (attrNames.hasMoreElements()) {
        String attrName=(String)attrNames.nextElement();
        String attr=(String)session.getAttribute(attrName);
        sb.append("<" + attrName + ">"+ attr+ "</"+ attrName+ ">");
      }
    }
    sb.append("</loginresponse>");
  }
  return sb.toString();
}
