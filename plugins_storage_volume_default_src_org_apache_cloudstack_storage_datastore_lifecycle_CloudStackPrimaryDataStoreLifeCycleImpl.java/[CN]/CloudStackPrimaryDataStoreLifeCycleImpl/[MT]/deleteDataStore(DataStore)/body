{
  List<StoragePoolHostVO> hostPoolRecords=this._storagePoolHostDao.listByPoolId(store.getId());
  StoragePool pool=(StoragePool)store;
  boolean deleteFlag=false;
  for (  StoragePoolHostVO host : hostPoolRecords) {
    DeleteStoragePoolCommand deleteCmd=new DeleteStoragePoolCommand(pool);
    final Answer answer=agentMgr.easySend(host.getHostId(),deleteCmd);
    if (answer != null && answer.getResult()) {
      deleteFlag=true;
      break;
    }
 else {
      if (answer != null) {
        s_logger.debug("Failed to delete storage pool: " + answer.getResult());
      }
    }
  }
  if (!deleteFlag) {
    throw new CloudRuntimeException("Failed to delete storage pool on host");
  }
  this.dataStoreHelper.deletePrimaryDataStore(store);
  return false;
}
