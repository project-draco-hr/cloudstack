{
  boolean rootRef=OptionConverter.toBoolean(OptionConverter.findAndSubst(errorHandlerPrefix + ROOT_REF,props),false);
  if (rootRef) {
    eh.setLogger(hierarchy.getRootLogger());
  }
  String loggerName=OptionConverter.findAndSubst(errorHandlerPrefix + LOGGER_REF,props);
  if (loggerName != null) {
    Logger logger=(loggerFactory == null) ? hierarchy.getLogger(loggerName) : hierarchy.getLogger(loggerName,loggerFactory);
    eh.setLogger(logger);
  }
  String appenderName=OptionConverter.findAndSubst(errorHandlerPrefix + APPENDER_REF_TAG,props);
  if (appenderName != null) {
    Appender backup=parseAppender(props,appenderName);
    if (backup != null) {
      eh.setBackupAppender(backup);
    }
  }
}
