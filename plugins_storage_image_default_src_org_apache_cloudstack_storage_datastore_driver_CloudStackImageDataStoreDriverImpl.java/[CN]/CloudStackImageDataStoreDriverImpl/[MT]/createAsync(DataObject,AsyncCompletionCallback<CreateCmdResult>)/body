{
  if (data.getType() == DataObjectType.TEMPLATE) {
    List<VMTemplateZoneVO> templateZones=this.templateZoneDao.listByTemplateId(data.getId());
    for (    VMTemplateZoneVO templateZone : templateZones) {
      VMTemplateVO template=this.templateDao.findById(data.getId());
      _downloadMonitor.downloadTemplateToStorage(template,templateZone.getZoneId());
    }
  }
 else   if (data.getType() == DataObjectType.VOLUME) {
    VolumeVO vol=this.volumeDao.findById(data.getId());
    VolumeInfo volInfo=(VolumeInfo)data;
    RegisterVolumePayload payload=(RegisterVolumePayload)volInfo.getpayload();
    _downloadMonitor.downloadVolumeToStorage(vol,vol.getDataCenterId(),payload.getUrl(),payload.getChecksum(),ImageFormat.valueOf(payload.getFormat().toUpperCase()));
  }
  CreateCmdResult result=new CreateCmdResult(null,null);
  callback.complete(result);
}
