{
  CommandResult result=callback.getResult();
  AsyncCallFuture<SnapshotResult> future=context.future;
  SnapshotInfo snapshot=context.snapshot;
  if (result.isFailed()) {
    s_logger.debug("delete snapshot failed" + result.getResult());
    snapshot.processEvent(ObjectInDataStoreStateMachine.Event.OperationFailed);
    SnapshotResult res=new SnapshotResult(context.snapshot);
    future.complete(res);
    return null;
  }
  snapshot.processEvent(ObjectInDataStoreStateMachine.Event.OperationSuccessed);
  SnapshotResult res=new SnapshotResult(context.snapshot);
  future.complete(res);
  return null;
}
