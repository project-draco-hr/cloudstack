{
  byte[] currentSize=new byte[8];
  byte[] creatorApp=new byte[4];
  try (FileInputStream strm=new FileInputStream(file)){
    long skipped=strm.skip(file.length() - vhdFooterSize + vhdFooterCreatorAppOffset);
    if (skipped == -1) {
      throw new IOException("Unexpected end-of-file");
    }
    long read=strm.read(creatorApp);
    if (read == -1) {
      throw new IOException("Unexpected end-of-file");
    }
    skipped=strm.skip(vhdFooterCurrentSizeOffset - vhdFooterCreatorVerOffset);
    if (skipped == -1) {
      throw new IOException("Unexpected end-of-file");
    }
    read=strm.read(currentSize);
    if (read == -1) {
      throw new IOException("Unexpected end-of-file");
    }
  }
   return NumbersUtil.bytesToLong(currentSize);
}
