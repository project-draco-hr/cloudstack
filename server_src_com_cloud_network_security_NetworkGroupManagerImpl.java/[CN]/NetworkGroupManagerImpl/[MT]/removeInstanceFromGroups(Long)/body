{
  final Transaction txn=Transaction.currentTxn();
  txn.start();
  UserVm userVm=_userVMDao.acquire(userVmId);
  if (userVm == null) {
    s_logger.warn("Failed to acquire lock on user vm id=" + userVmId);
  }
  int n=_networkGroupVMMapDao.deleteVM(userVmId);
  s_logger.info("Disassociated " + n + " network groups "+ " from uservm "+ userVmId);
  _userVMDao.release(userVmId);
  txn.commit();
}
