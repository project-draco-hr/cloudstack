{
  MBeanServer server=MBeanServerFactory.createMBeanServer();
  Object html=createServer();
  try {
    log.info("Registering HtmlAdaptorServer instance.");
    server.registerMBean(html,new ObjectName("Adaptor:name=html,port=8082"));
    log.info("Registering HierarchyDynamicMBean instance.");
    HierarchyDynamicMBean hdm=new HierarchyDynamicMBean();
    server.registerMBean(hdm,new ObjectName("log4j:hiearchy=default"));
  }
 catch (  JMException e) {
    log.error("Problem while registering MBeans instances.",e);
    return;
  }
catch (  RuntimeException e) {
    log.error("Problem while registering MBeans instances.",e);
    return;
  }
  startServer(html);
}
