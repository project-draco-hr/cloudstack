def write_config(self, first_time=False):
    global config_fields
    config = ConfigParser()
    for section in config_fields.keys():
        config.add_section(section)
        for key in config_fields[section].keys():
            if first_time:
                config.set(section, key, config_fields[section][key])
            else:
                config.set(section, key, getattr(self, key))
    with open(self.config_file, 'w') as cfg:
        config.write(cfg)
    return config
