{
  SearchCriteria<HostVO> sc=MsStatusSearch.create();
  sc.setParameters("ms",msId);
  sc.setParameters("statuses",Status.ErrorInMaintenance,Status.Maintenance,Status.PrepareForMaintenance);
  HostVO host=createForUpdate();
  host.setLastPinged((System.currentTimeMillis() >> 10) - (10 * 60));
  host.setDisconnectedOn(new Date());
  UpdateBuilder ub=getUpdateBuilder(host);
  ub.set(host,"status",Status.Disconnected);
  update(ub,sc,null);
  sc=MsStatusSearch.create();
  sc.setParameters("ms",msId);
  host=createForUpdate();
  host.setManagementServerId(null);
  host.setLastPinged((System.currentTimeMillis() >> 10) - (10 * 60));
  host.setDisconnectedOn(new Date());
  ub=getUpdateBuilder(host);
  update(ub,sc,null);
}
