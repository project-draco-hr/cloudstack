{
  List<CapacityVO> result=BaseCmd._mgr.listCapacities(this);
  ListResponse<CapacityResponse> response=new ListResponse<CapacityResponse>();
  List<CapacityResponse> capacityResponses=new ArrayList<CapacityResponse>();
  List<CapacityVO> summedCapacities=sumCapacities(result);
  for (  CapacityVO summedCapacity : summedCapacities) {
    CapacityResponse capacityResponse=new CapacityResponse();
    capacityResponse.setCapacityTotal(summedCapacity.getTotalCapacity());
    capacityResponse.setCapacityType(summedCapacity.getCapacityType());
    capacityResponse.setCapacityUsed(summedCapacity.getUsedCapacity());
    if (summedCapacity.getPodId() != null) {
      capacityResponse.setPodId(summedCapacity.getPodId());
      if (summedCapacity.getPodId() > 0) {
        capacityResponse.setPodName(ApiDBUtils.findPodById(summedCapacity.getPodId()).getName());
      }
 else {
        capacityResponse.setPodName("All");
      }
    }
    capacityResponse.setZoneId(summedCapacity.getDataCenterId());
    capacityResponse.setZoneName(ApiDBUtils.findZoneById(summedCapacity.getDataCenterId()).getName());
    if (summedCapacity.getTotalCapacity() != 0) {
      float computed=((float)summedCapacity.getUsedCapacity() / (float)summedCapacity.getTotalCapacity() * 100f);
      capacityResponse.setPercentUsed(s_percentFormat.format((float)summedCapacity.getUsedCapacity() / (float)summedCapacity.getTotalCapacity() * 100f));
    }
 else {
      capacityResponse.setPercentUsed(s_percentFormat.format(0L));
    }
    capacityResponse.setObjectName("capacity");
    capacityResponses.add(capacityResponse);
  }
  response.setResponses(capacityResponses);
  response.setResponseName(getName());
  this.setResponseObject(response);
}
