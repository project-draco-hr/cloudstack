@attr(hypervisor='XenServer')
def test_10_attach_more_than_one_disk_to_VM(self):
    'Attach more than one disk to a VM'
    self.virtual_machine.start(self.apiClient)
    volume_2 = Volume.create(self.apiClient, self.testdata[TestData.volume_2], zoneid=self.zone.id, account=self.account.name, domainid=self.domain.id, diskofferingid=self.disk_offering.id)
    self.cleanup.append(volume_2)
    self._check_and_get_cs_volume(volume_2.id, self.testdata[TestData.volume_2][TestData.diskName])
    self.virtual_machine.attach_volume(self.apiClient, self.volume)
    self.attached = True
    vol = self._check_and_get_cs_volume(self.volume.id, self.testdata[TestData.volume_1][TestData.diskName])
    self.virtual_machine.attach_volume(self.apiClient, volume_2)
    vol_2 = self._check_and_get_cs_volume(volume_2.id, self.testdata[TestData.volume_2][TestData.diskName])
    sf_account_id = self._get_sf_account_id(self.primary_storage.id, self.account.id)
    sf_volume_size = self._get_volume_size_with_hsr(self.volume)
    sf_volume_2_size = self._get_volume_size_with_hsr(volume_2)
    sf_vag_id = self._get_vag_id()
    sf_volumes = self._get_sf_volumes(sf_account_id)
    sf_volume = self._check_and_get_sf_volume(sf_volumes, vol.name)
    self._check_size_and_iops(sf_volume, vol, sf_volume_size)
    sf_iscsi_name = self._get_iqn(self.volume)
    self._check_xen_sr(sf_iscsi_name)
    self._check_vag(sf_volume, sf_vag_id)
    sf_volume_2 = self._check_and_get_sf_volume(sf_volumes, vol_2.name)
    self._check_size_and_iops(sf_volume_2, vol_2, sf_volume_2_size)
    sf_iscsi_name_2 = self._get_iqn(volume_2)
    self._check_xen_sr(sf_iscsi_name_2)
    self._check_vag(sf_volume_2, sf_vag_id)
    self.virtual_machine.detach_volume(self.apiClient, volume_2)
