@attr(tags=['advanced'])
def test_vpcnetwork_nuage(self):
    'Test network VPC for Nuage'
    vpcOffering = VpcOffering.list(self.apiclient, name='Nuage VSP VPC offering')
    self.assert_(((vpcOffering is not None) and (len(vpcOffering) > 0)), 'Nuage VPC offering not found')
    vpc = VPC.create(apiclient=self.apiclient, services=self.services['vpc'], networkDomain='vpc.networkacl', vpcofferingid=vpcOffering[0].id, zoneid=self.zone.id, account=self.account.name, domainid=self.account.domainid)
    self.assert_((vpc is not None), 'VPC creation failed')
    aclgroup = NetworkACLList.create(apiclient=self.apiclient, services={}, name='acl', description='acl', vpcid=vpc.id)
    self.assertIsNotNone(aclgroup, 'Failed to create NetworkACL list')
    self.debug(('Created a network ACL list %s' % aclgroup.name))
    aclitem = NetworkACL.create(apiclient=self.apiclient, services={}, protocol='TCP', number='10', action='Deny', aclid=aclgroup.id, cidrlist=['0.0.0.0/0'])
    self.assertIsNotNone(aclitem, 'Network failed to aclItem')
    self.debug(('Added a network ACL %s to ACL list %s' % (aclitem.id, aclgroup.name)))
    nwNuage = Network.create(self.apiclient, self.services['vpcnetwork'], accountid=self.account.name, domainid=self.account.domainid, networkofferingid=self.network_offering.id, zoneid=self.zone.id, vpcid=vpc.id, aclid=aclgroup.id, gateway='10.1.0.1')
    self.debug(('Network %s created in VPC %s' % (nwNuage.id, vpc.id)))
    vm = VirtualMachine.create(self.apiclient, self.services['virtual_machine'], accountid=self.account.name, domainid=self.account.domainid, serviceofferingid=self.service_offering.id, networkids=[str(nwNuage.id)])
    self.assert_((vm is not None), 'VM failed to deploy')
    self.assert_((vm.state == 'Running'), 'VM is not running')
    self.debug(('VM %s deployed in VPC %s' % (vm.id, vpc.id)))
