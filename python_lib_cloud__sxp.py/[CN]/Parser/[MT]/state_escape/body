def state_escape(self, c):
    if self.at_eof():
        raise ParseError(self, 'unexpected EOF')
    d = escapes.get(c)
    if d:
        self.state.parent.buf += d
        self.pop_state()
    elif (c == 'x'):
        self.state.fn = self.state_hex
        self.state.val = 0
    elif (c in string.octdigits):
        self.state.fn = self.state_octal
        self.state.val = 0
        self.input_char(c)
    else:
        self.state.parent.buf += '\\'
        self.pop_state()
