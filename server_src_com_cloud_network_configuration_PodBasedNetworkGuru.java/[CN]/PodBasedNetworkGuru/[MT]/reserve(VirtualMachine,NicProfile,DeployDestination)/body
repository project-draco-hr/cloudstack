{
  DataCenter dc=dest.getDataCenter();
  Pod pod=dest.getPod();
  String ip=_dcDao.allocatePrivateIpAddress(dest.getDataCenter().getId(),dest.getPod().getId(),nic.getId());
  String[] macs=_dcDao.getNextAvailableMacAddressPair(dc.getId());
  nic.setIp4Address(ip);
  nic.setCidr(pod.getCidrAddress() + "/" + pod.getCidrSize());
  nic.setGateway(pod.getGateway());
  nic.setMacAddress(macs[0]);
  String netmask=NetUtils.getCidrSubNet(pod.getCidrAddress(),pod.getCidrSize());
  nic.setNetmask(netmask);
  return Long.toString(nic.getId());
}
