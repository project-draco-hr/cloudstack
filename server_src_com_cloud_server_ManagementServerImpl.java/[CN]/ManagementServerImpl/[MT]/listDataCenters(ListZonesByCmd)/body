{
  List<DataCenterVO> dcs=_dcDao.listAllActive();
  Account account=(Account)UserContext.current().getAccountObject();
  Boolean available=cmd.isAvailable();
  if (account != null) {
    if ((available != null) && Boolean.FALSE.equals(available)) {
      List<DomainRouterVO> routers=_routerDao.listBy(account.getId());
      for (Iterator<DataCenterVO> iter=dcs.iterator(); iter.hasNext(); ) {
        DataCenterVO dc=iter.next();
        boolean found=false;
        for (        DomainRouterVO router : routers) {
          if (dc.getId() == router.getDataCenterId()) {
            found=true;
            break;
          }
        }
        if (!found)         iter.remove();
      }
    }
  }
  return dcs;
}
