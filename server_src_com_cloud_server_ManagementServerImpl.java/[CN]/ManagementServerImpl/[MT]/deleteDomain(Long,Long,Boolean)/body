{
  try {
    DomainVO domain=_domainDao.findById(domainId);
    if (domain != null) {
      if ((cleanup != null) && cleanup.booleanValue()) {
        boolean success=cleanupDomain(domainId,ownerId);
        if (!success) {
          saveEvent(new Long(1),ownerId,EventVO.LEVEL_ERROR,EventTypes.EVENT_DOMAIN_DELETE,"Failed to clean up domain resources and sub domains, domain with id " + domainId + " was not deleted.");
          return "Failed to clean up domain resources and sub domains, delete failed on domain " + domain.getName() + " (id: "+ domainId+ ").";
        }
      }
 else {
        if (!_domainDao.remove(domainId)) {
          saveEvent(new Long(1),ownerId,EventVO.LEVEL_ERROR,EventTypes.EVENT_DOMAIN_DELETE,"Domain with id " + domainId + " was not deleted");
          return "Delete failed on domain " + domain.getName() + " (id: "+ domainId+ "); please make sure all users and sub domains have been removed from the domain before deleting";
        }
 else {
          saveEvent(new Long(1),ownerId,EventVO.LEVEL_INFO,EventTypes.EVENT_DOMAIN_DELETE,"Domain with id " + domainId + " was deleted");
        }
      }
    }
    return null;
  }
 catch (  Exception ex) {
    s_logger.error("Exception deleting domain with id " + domainId,ex);
    return "Delete failed on domain with id " + domainId + " due to an internal server error.";
  }
}
