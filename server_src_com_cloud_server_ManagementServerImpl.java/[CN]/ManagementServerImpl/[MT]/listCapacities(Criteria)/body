{
  _alertMgr.recalculateCapacity();
  Filter searchFilter=new Filter(CapacityVO.class,c.getOrderBy(),c.getAscending(),c.getOffset(),c.getLimit());
  SearchCriteria<CapacityVO> sc=_capacityDao.createSearchCriteria();
  Object type=c.getCriteria(Criteria.TYPE);
  Object zoneId=c.getCriteria(Criteria.DATACENTERID);
  Object podId=c.getCriteria(Criteria.PODID);
  Object hostId=c.getCriteria(Criteria.HOSTID);
  if (type != null) {
    sc.addAnd("capacityType",SearchCriteria.Op.EQ,type);
  }
  if (zoneId != null) {
    sc.addAnd("dataCenterId",SearchCriteria.Op.EQ,zoneId);
  }
  if (podId != null) {
    sc.addAnd("podId",SearchCriteria.Op.EQ,podId);
  }
  if (hostId != null) {
    sc.addAnd("hostOrPoolId",SearchCriteria.Op.EQ,hostId);
  }
  return _capacityDao.search(sc,searchFilter);
}
