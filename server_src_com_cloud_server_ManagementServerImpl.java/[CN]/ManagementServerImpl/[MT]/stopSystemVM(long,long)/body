{
  VMInstanceVO systemVm=_vmInstanceDao.findByIdTypes(instanceId,VirtualMachine.Type.ConsoleProxy,VirtualMachine.Type.SecondaryStorageVm);
  if (systemVm.getType().equals(VirtualMachine.Type.ConsoleProxy)) {
    return stopConsoleProxy(instanceId,startEventId);
  }
 else {
    return stopSecondaryStorageVm(instanceId,startEventId);
  }
}
