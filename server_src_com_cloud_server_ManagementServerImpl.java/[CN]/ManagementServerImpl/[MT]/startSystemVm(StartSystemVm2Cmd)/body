{
  UserContext context=UserContext.current();
  long callerId=context.getUserId();
  long callerAccountId=context.getAccountId();
  Long id=cmd.getId();
  VMInstanceVO systemVm=_vmInstanceDao.findByIdTypes(id,VirtualMachine.Type.ConsoleProxy,VirtualMachine.Type.SecondaryStorageVm);
  if (systemVm == null) {
    throw new InvalidParameterValueException("unable to find a system vm with id " + id);
  }
  if (systemVm.getType() == VirtualMachine.Type.ConsoleProxy) {
    long eventId=EventUtils.saveScheduledEvent(callerId,callerAccountId,EventTypes.EVENT_PROXY_START,"Starting console proxy with Id: " + id);
    return startConsoleProxy(id,eventId);
  }
 else   if (systemVm.getType() == VirtualMachine.Type.SecondaryStorageVm) {
    long eventId=EventUtils.saveScheduledEvent(callerId,callerAccountId,EventTypes.EVENT_SSVM_START,"Starting secondary storage Vm Id: " + id);
    return startSecondaryStorageVm(id,eventId);
  }
 else {
    throw new InvalidParameterValueException("Unable to find a system vm: " + id);
  }
}
