{
  VolumeVO volume=findVolumeById(volumeId);
  String secondaryStorageURL=_storageMgr.getSecondaryStorageURL(zoneId);
  StoragePoolVO srcPool=_poolDao.findById(volume.getPoolId());
  Long sourceHostId=_storageMgr.findHostIdForStoragePool(srcPool);
  CopyVolumeCommand cvCmd=new CopyVolumeCommand(volume.getId(),volume.getPath(),srcPool,secondaryStorageURL,true);
  CopyVolumeAnswer cvAnswer=(CopyVolumeAnswer)_agentMgr.easySend(sourceHostId,cvCmd);
  if (cvAnswer == null || !cvAnswer.getResult()) {
    throw new InternalErrorException("Failed to copy the volume from the source primary storage pool to secondary storage.");
  }
  _uploadMonitor.extractVolume(volume,url,zoneId,"volumes/" + volume.getId() + "/"+ cvAnswer.getVolumePath()+ ".vhd",eventId,asyncJobId,_asyncMgr);
}
