{
  UserVmVO userVm=_userVmDao.findById(vmId);
  saveStartedEvent(userId,userVm.getAccountId(),EventTypes.EVENT_VM_UPGRADE,"upgrading service offering on VM : " + userVm.getName(),startEventId);
  boolean success=_vmMgr.upgradeVirtualMachine(vmId,serviceOfferingId);
  String params="id=" + vmId + "\nvmName="+ userVm.getName()+ "\nsoId="+ serviceOfferingId+ "\ntId="+ userVm.getTemplateId()+ "\ndcId="+ userVm.getDataCenterId();
  if (success) {
    this.saveEvent(userId,userVm.getAccountId(),EventVO.LEVEL_INFO,EventTypes.EVENT_VM_UPGRADE,"Successfully upgrade service offering on VM : " + userVm.getName(),params,startEventId);
  }
 else {
    this.saveEvent(userId,userVm.getAccountId(),EventVO.LEVEL_ERROR,EventTypes.EVENT_VM_UPGRADE,"Failed to upgrade service offering on VM : " + userVm.getName(),params,startEventId);
  }
  return success;
}
