{
  Filter searchFilter=new Filter(ConfigurationVO.class,"name",true,cmd.getStartIndex(),cmd.getPageSizeVal());
  SearchCriteria<ConfigurationVO> sc=_configDao.createSearchCriteria();
  Object name=cmd.getConfigName();
  Object category=cmd.getCategory();
  Object keyword=cmd.getKeyword();
  Long id=cmd.getId();
  String scope=cmd.getScope();
  if (scope != null && !scope.isEmpty()) {
    try {
      Config.ConfigurationParameterScope.valueOf(scope.toLowerCase());
    }
 catch (    Exception e) {
      throw new InvalidParameterValueException("Invalid scope " + scope + " while listing configuration parameters");
    }
    if (id == null) {
      throw new InvalidParameterValueException("Invalid id null, id is needed corresponding to the scope");
    }
    List<ConfigurationVO> configList=_configServer.getConfigListByScope(scope,id);
    return new Pair<List<? extends Configuration>,Integer>(configList,configList.size());
  }
  if (keyword != null) {
    SearchCriteria<ConfigurationVO> ssc=_configDao.createSearchCriteria();
    ssc.addOr("name",SearchCriteria.Op.LIKE,"%" + keyword + "%");
    ssc.addOr("instance",SearchCriteria.Op.LIKE,"%" + keyword + "%");
    ssc.addOr("component",SearchCriteria.Op.LIKE,"%" + keyword + "%");
    ssc.addOr("description",SearchCriteria.Op.LIKE,"%" + keyword + "%");
    ssc.addOr("category",SearchCriteria.Op.LIKE,"%" + keyword + "%");
    ssc.addOr("value",SearchCriteria.Op.LIKE,"%" + keyword + "%");
    sc.addAnd("name",SearchCriteria.Op.SC,ssc);
  }
  if (name != null) {
    sc.addAnd("name",SearchCriteria.Op.LIKE,"%" + name + "%");
  }
  if (category != null) {
    sc.addAnd("category",SearchCriteria.Op.EQ,category);
  }
  sc.addAnd("category",SearchCriteria.Op.NEQ,"Hidden");
  Pair<List<ConfigurationVO>,Integer> result=_configDao.searchAndCount(sc,searchFilter);
  return new Pair<List<? extends Configuration>,Integer>(result.first(),result.second());
}
