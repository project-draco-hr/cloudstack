{
  SearchCriteria<DomainVO> sc=_domainDao.createSearchCriteria();
  sc.addAnd("name",SearchCriteria.Op.EQ,domainName);
  List<DomainVO> domains=_domainDao.search(sc,null);
  if ((domains == null) || domains.isEmpty()) {
    _domainDao.update(domainId,domainName);
    DomainVO domain=_domainDao.findById(domainId);
    saveEvent(new Long(1),domain.getOwner(),EventVO.LEVEL_INFO,EventTypes.EVENT_DOMAIN_UPDATE,"Domain, " + domainName + " was updated");
  }
 else {
    DomainVO domain=_domainDao.findById(domainId);
    saveEvent(new Long(1),domain.getOwner(),EventVO.LEVEL_ERROR,EventTypes.EVENT_DOMAIN_UPDATE,"Failed to update domain " + domain.getName() + " with name "+ domainName+ ", name in use.");
  }
}
