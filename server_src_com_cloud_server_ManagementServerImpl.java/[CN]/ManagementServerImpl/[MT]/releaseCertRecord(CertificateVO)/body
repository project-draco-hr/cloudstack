{
  CertificateVO lockedCert=_certDao.acquire(cert.getId());
  if (lockedCert == null) {
    String msg="Unable to obtain lock on the cert from releaseCertRecord() in uploadCertificate()";
    s_logger.error(msg);
    throw new ResourceUnavailableException(msg);
  }
 else {
    try {
      lockedCert.setMgmtServerId(null);
      _certDao.update(lockedCert.getId(),lockedCert);
    }
 catch (    Exception e) {
      String msg="Unable to update record in cert table from releaseCertRecord() during uploadCertificate()";
      s_logger.warn(msg,e);
      throw new ResourceUnavailableException(msg);
    }
 finally {
      _certDao.release(cert.getId());
    }
  }
}
