{
  UserVmVO vm=_userVmDao.findById(vmId);
  if (vm == null) {
    throw new CloudRuntimeException("Unable to find virual machine with id " + vmId);
  }
  boolean haEnabled=vm.isHaEnabled();
  _userVmDao.updateVM(vmId,displayName,group,enable);
  if (haEnabled != enable) {
    String description=null;
    String type=null;
    if (enable) {
      description="Successfully enabled HA for virtual machine " + vm.getName();
      type=EventTypes.EVENT_VM_ENABLE_HA;
    }
 else {
      description="Successfully disabled HA for virtual machine " + vm.getName();
      type=EventTypes.EVENT_VM_DISABLE_HA;
    }
    EventUtils.saveEvent(userId,accountId,EventVO.LEVEL_INFO,type,description,null);
  }
}
