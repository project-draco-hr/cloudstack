{
  Criteria c=new Criteria("id",Boolean.TRUE,cmd.getStartIndex(),cmd.getPageSizeVal());
  c.addCriteria(Criteria.NAME,cmd.getStoragePoolName());
  c.addCriteria(Criteria.ADDRESS,cmd.getIpAddress());
  c.addCriteria(Criteria.KEYWORD,cmd.getKeyword());
  c.addCriteria(Criteria.PATH,cmd.getPath());
  c.addCriteria(Criteria.PODID,cmd.getPodId());
  c.addCriteria(Criteria.DATACENTERID,cmd.getZoneId());
  List<Object> poolsAndHosts=new ArrayList<Object>();
  List<? extends StoragePoolVO> pools=searchForStoragePools(c);
  if ((pools != null) && !pools.isEmpty()) {
    poolsAndHosts.addAll(pools);
  }
  if ((cmd.getPath() == null) && (cmd.getIpAddress() == null)) {
    List<HostVO> hosts=searchForServers(cmd.getStartIndex(),cmd.getPageSizeVal(),cmd.getStoragePoolName(),Host.Type.Storage.toString(),cmd.getState(),cmd.getZoneId(),cmd.getPodId(),null,null,cmd.getKeyword());
    if ((hosts != null) && !hosts.isEmpty()) {
      poolsAndHosts.addAll(hosts);
    }
  }
  return poolsAndHosts;
}
