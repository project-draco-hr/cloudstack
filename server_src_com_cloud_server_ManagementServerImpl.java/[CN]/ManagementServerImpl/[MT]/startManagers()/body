{
  @SuppressWarnings("rawtypes") Map<String,Manager> managers=ComponentContext.getApplicationContext().getBeansOfType(Manager.class);
  Map<String,Object> params=new HashMap<String,Object>();
  for (  Manager manager : managers.values()) {
    s_logger.info("Start manager: " + ComponentContext.getTargetClass(manager).getName() + "...");
    try {
      if (!ComponentContext.isPrimary(manager,Manager.class)) {
        s_logger.error("Skip manager:" + ComponentContext.getTargetClass(manager).getName() + " as there are multiple matches");
        continue;
      }
      if (!manager.configure(manager.getClass().getSimpleName(),params)) {
        throw new CloudRuntimeException("Failed to start manager: " + ComponentContext.getTargetClass(manager).getName());
      }
      if (!manager.start()) {
        throw new CloudRuntimeException("Failed to start manager: " + ComponentContext.getTargetClass(manager).getName());
      }
      if (manager instanceof ManagementBean) {
        registerMBean((ManagementBean)manager);
      }
    }
 catch (    Exception e) {
      s_logger.error("Problems to start manager:" + ComponentContext.getTargetClass(manager).getName(),e);
      System.exit(1);
    }
  }
}
