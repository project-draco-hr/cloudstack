{
  Long userId=cmd.getId();
  if (userId <= 2) {
    if (s_logger.isInfoEnabled()) {
      s_logger.info("disableUser -- invalid user id: " + userId);
    }
    return false;
  }
  boolean success=doSetUserStatus(userId,Account.ACCOUNT_STATE_DISABLED);
  if (success) {
    User user=_userDao.findById(userId);
    List<UserVO> allUsersByAccount=_userDao.listByAccount(user.getAccountId());
    for (    UserVO oneUser : allUsersByAccount) {
      if (oneUser.getState().equals(Account.ACCOUNT_STATE_ENABLED)) {
        return true;
      }
    }
    return disableAccount(user.getAccountId());
  }
 else {
    return false;
  }
}
