{
  Account adminAccount=(Account)UserContext.current().getAccountObject();
  Long domainId=cmd.getDomainId();
  String accountName=UserContext.current().getAccountName();
  if ((adminAccount != null) && !_domainDao.isChildDomain(adminAccount.getDomainId(),domainId)) {
    throw new ServerApiException(BaseCmd.ACCOUNT_ERROR,"Failed to lock account " + accountName + " in domain "+ domainId+ ", permission denied.");
  }
  Account account=_accountDao.findActiveAccount(accountName,domainId);
  if (account == null) {
    throw new ServerApiException(BaseCmd.PARAM_ERROR,"Unable to find active account with name " + accountName + " in domain "+ domainId);
  }
  if (account.getId() == Account.ACCOUNT_ID_SYSTEM) {
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"can not lock system account");
  }
  return lockAccountInternal(account.getId());
}
