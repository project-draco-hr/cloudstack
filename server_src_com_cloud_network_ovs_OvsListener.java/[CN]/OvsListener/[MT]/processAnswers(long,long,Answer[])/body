{
  Set<Long> failedFlowVms=new HashSet<Long>();
  try {
    for (    Answer ans : answers) {
      if (ans instanceof OvsSetTagAndFlowAnswer) {
        OvsSetTagAndFlowAnswer r=(OvsSetTagAndFlowAnswer)ans;
        if (!r.getResult()) {
          s_logger.warn("Failed to set flow for VM " + r.getVmId());
          _workDao.updateStep(r.getVmId(),r.getSeqNo(),Step.Error);
          failedFlowVms.add(r.getVmId());
        }
 else {
          s_logger.info("Success to set flow for VM " + r.getVmId());
          _workDao.updateStep(r.getVmId(),r.getSeqNo(),Step.Done);
        }
      }
    }
  }
 catch (  Exception e) {
    s_logger.warn("process answer failed",e);
  }
  if (failedFlowVms.size() > 0) {
    _ovsNetworkMgr.scheduleFlowUpdateToHosts(failedFlowVms,false,new Long(10 * 1000l));
  }
  return true;
}
