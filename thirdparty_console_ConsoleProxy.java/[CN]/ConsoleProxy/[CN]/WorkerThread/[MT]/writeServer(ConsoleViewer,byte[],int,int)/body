{
synchronized (viewer) {
    if (!viewer.rfb.closed()) {
      try {
        viewer.rfb.os.write(b,off,len);
        viewer.rfb.os.flush();
      }
 catch (      IOException e) {
        Logger.log(Logger.INFO,"Ignore exception when writing to server " + e);
        Logger.log(Logger.DEBUG,e.toString(),e);
        viewer.rfb.close();
      }
    }
 else {
      Logger.log(Logger.INFO,"Dropping client event because server connection is closed ");
    }
  }
}
