{
  try {
    Thread.currentThread().setName("JPG Thread " + Thread.currentThread().getId() + " "+ t.getRemoteAddress());
    Logger.log(Logger.DEBUG,"ScreenHandler " + t.getRequestURI());
    doHandle(t);
  }
 catch (  IllegalArgumentException e) {
    String response="Bad query string";
    Logger.log(Logger.ERROR,response);
    t.sendResponseHeaders(200,response.length());
    OutputStream os=t.getResponseBody();
    os.write(response.getBytes());
    os.close();
  }
catch (  Throwable e) {
    Logger.log(Logger.ERROR,e.toString());
    File f=new File("./cannotconnect.jpg");
    long length=f.length();
    FileInputStream fis=new FileInputStream(f);
    Headers hds=t.getResponseHeaders();
    hds.set("Content-Type","image/jpeg");
    hds.set("Cache-Control","no-cache");
    hds.set("Cache-Control","no-store");
    t.sendResponseHeaders(200,length);
    OutputStream os=t.getResponseBody();
    try {
      while (true) {
        byte[] b=new byte[8192];
        int n=fis.read(b);
        if (n < 0) {
          break;
        }
        os.write(b,0,n);
      }
    }
  finally {
      os.close();
      fis.close();
    }
    Logger.log(Logger.ERROR,"Cannot get console, sent error JPG response");
    return;
  }
 finally {
    t.close();
  }
}
