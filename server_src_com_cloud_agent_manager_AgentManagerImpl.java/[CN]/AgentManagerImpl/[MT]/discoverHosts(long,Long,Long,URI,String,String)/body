{
  List<HostVO> hosts=new ArrayList<HostVO>();
  s_logger.info("Trying to add a new host at " + url + " in data center "+ dcId);
  Enumeration<Discoverer> en=_discoverers.enumeration();
  while (en.hasMoreElements()) {
    Discoverer discoverer=en.nextElement();
    Map<? extends ServerResource,Map<String,String>> resources=null;
    try {
      resources=discoverer.find(dcId,podId,clusterId,url,username,password);
    }
 catch (    Exception e) {
      s_logger.info("Exception in host discovery process with discoverer: " + discoverer.getName() + ", skip to another discoverer if there is any");
    }
    if (resources != null) {
      for (      Map.Entry<? extends ServerResource,Map<String,String>> entry : resources.entrySet()) {
        ServerResource resource=entry.getKey();
        AgentAttache attache=simulateStart(resource,entry.getValue(),true);
        if (attache != null) {
          hosts.add(_hostDao.findById(attache.getId()));
        }
        discoverer.postDiscovery(hosts,_nodeId);
      }
      s_logger.info("server resources successfully discovered by " + discoverer.getName());
      return hosts;
    }
  }
  s_logger.warn("Unable to find the server resources at " + url);
  throw new DiscoveryException("Unable to add the host");
}
