{
  if (startup == null) {
    return null;
  }
  HostVO server=createHost(startup,resource,details,old,hostTags,allocationState);
  if (server == null) {
    return null;
  }
  long id=server.getId();
  AgentAttache attache=createAttache(id,server,resource);
  StartupAnswer[] answers=new StartupAnswer[startup.length];
  for (int i=0; i < answers.length; i++) {
    answers[i]=new StartupAnswer(startup[i],attache.getId(),_pingInterval);
  }
  attache.process(answers);
  attache=notifyMonitorsOfConnection(attache,startup,forRebalance);
  return attache;
}
