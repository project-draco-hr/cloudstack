{
  s_logger.debug("Adding directly connect host for " + id);
  if (resource instanceof DummySecondaryStorageResource || resource instanceof KvmDummyResourceBase) {
    return new DummyAttache(id,false);
  }
  final DirectAgentAttache attache=new DirectAgentAttache(id,resource,server.getStatus() == Status.Maintenance || server.getStatus() == Status.ErrorInMaintenance || server.getStatus() == Status.PrepareForMaintenance,this);
  AgentAttache old=null;
synchronized (_agents) {
    old=_agents.get(id);
    _agents.put(id,attache);
  }
  return attache;
}
