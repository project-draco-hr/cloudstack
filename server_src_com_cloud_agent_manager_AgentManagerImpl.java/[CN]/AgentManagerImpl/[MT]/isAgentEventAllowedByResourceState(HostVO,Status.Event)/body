{
  ResourceState state=host.getResourceState();
  boolean allow=true;
  if (state == ResourceState.Enabled) {
  }
 else   if (state == ResourceState.Disabled) {
    if (event == Status.Event.AgentConnected) {
      allow=false;
    }
  }
 else   if (state == ResourceState.Unmanaged) {
    if (event == Status.Event.AgentConnected) {
      allow=false;
    }
  }
 else   if (state == ResourceState.PrepareForMaintenance) {
  }
 else   if (state == ResourceState.Maintenance) {
  }
 else {
    throw new CloudRuntimeException("Unknown resource state " + state);
  }
  return allow;
}
