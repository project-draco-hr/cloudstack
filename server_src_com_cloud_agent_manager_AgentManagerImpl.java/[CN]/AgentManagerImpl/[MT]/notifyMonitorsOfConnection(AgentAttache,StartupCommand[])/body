{
  long hostId=attache.getId();
  HostVO host=_hostDao.findById(hostId);
  for (  Pair<Integer,Listener> monitor : _hostMonitors) {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Sending Connect to listener: " + monitor.second().getClass().getSimpleName());
    }
    for (int i=0; i < cmd.length; i++) {
      if (!monitor.second().processConnect(host,cmd[i])) {
        s_logger.info("Monitor " + monitor.second().getClass().getSimpleName() + " says not to continue the connect process for "+ hostId);
        handleDisconnect(attache,Event.AgentDisconnected,false);
        return null;
      }
    }
  }
  Long dcId=host.getDataCenterId();
  ReadyCommand ready=new ReadyCommand(dcId);
  Answer answer=easySend(hostId,ready);
  if (answer == null) {
    handleDisconnect(attache,Event.AgentDisconnected,false);
  }
  _hostDao.updateStatus(host,Event.Ready,_nodeId);
  attache.ready();
  return attache;
}
