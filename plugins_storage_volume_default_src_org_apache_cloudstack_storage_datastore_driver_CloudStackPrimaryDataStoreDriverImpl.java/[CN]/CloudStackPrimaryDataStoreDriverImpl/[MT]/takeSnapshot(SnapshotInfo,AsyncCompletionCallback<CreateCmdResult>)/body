{
  CreateCmdResult result=null;
  try {
    DataTO snapshotTO=snapshot.getTO();
    CreateObjectCommand cmd=new CreateObjectCommand(snapshotTO);
    Answer answer=storageMgr.sendToPool((StoragePool)snapshot.getDataStore(),null,cmd);
    result=new CreateCmdResult(null,answer);
    if (answer != null && !answer.getResult()) {
      result.setResult(answer.getDetails());
    }
    callback.complete(result);
  }
 catch (  Exception e) {
    s_logger.debug("Failed to take snapshot: " + snapshot.getId(),e);
    result=new CreateCmdResult(null,null);
    result.setResult(e.toString());
  }
  callback.complete(result);
}
