{
  CreateCmdResult result=null;
  try {
    DataTO snapshotTO=snapshot.getTO();
    CreateObjectCommand cmd=new CreateObjectCommand(snapshotTO);
    EndPoint ep=this.epSelecotor.select(snapshot);
    Answer answer=ep.sendMessage(cmd);
    result=new CreateCmdResult(null,answer);
    if (answer != null && !answer.getResult()) {
      result.setResult(answer.getDetails());
    }
    callback.complete(result);
    return;
  }
 catch (  Exception e) {
    s_logger.debug("Failed to take snapshot: " + snapshot.getId(),e);
    result=new CreateCmdResult(null,null);
    result.setResult(e.toString());
  }
  callback.complete(result);
}
