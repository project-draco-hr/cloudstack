{
  SspClient sspClient=spy(new SspClient(apiUrl,username,password));
  HttpClient client=mock(HttpClient.class);
  HttpResponse res=mock(HttpResponse.class,RETURNS_DEEP_STUBS);
  doReturn(client).when(sspClient).getHttpClient();
  when(client.execute(any(HttpUriRequest.class))).thenReturn(res);
  when(res.getStatusLine().getStatusCode()).thenReturn(HttpStatus.SC_OK);
  assertTrue(sspClient.login());
  assertTrue(sspClient.login());
  assertTrue(sspClient.login());
}
