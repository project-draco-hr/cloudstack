{
  StringBuilder devicesBuilder=new StringBuilder();
  devicesBuilder.append("<devices>\n");
  if (_emulator != null) {
    devicesBuilder.append("<emulator>" + _emulator + "</emulator>\n");
  }
  for (  List<?> devs : devices.values()) {
    for (    Object dev : devs) {
      if (_guestType == GuestDef.guestType.LXC) {
        if (dev instanceof GraphicDef || dev instanceof InputDef || dev instanceof DiskDef) {
          continue;
        }
      }
      devicesBuilder.append(dev.toString());
    }
  }
  devicesBuilder.append("</devices>\n");
  return devicesBuilder.toString();
}
