{
  StringBuilder devicesBuilder=new StringBuilder();
  devicesBuilder.append("<devices>\n");
  if (_emulator != null) {
    devicesBuilder.append("<emulator>" + _emulator + "</emulator>\n");
  }
  for (  List<?> devs : devices.values()) {
    for (    Object dev : devs) {
      if (_guestType == GuestDef.GuestType.LXC) {
        if (dev instanceof GraphicDef || dev instanceof InputDef) {
          continue;
        }
        if (dev instanceof DiskDef) {
          DiskDef disk=(DiskDef)dev;
          if (!disk.getDiskType().toString().equals("block")) {
            continue;
          }
        }
      }
      devicesBuilder.append(dev.toString());
    }
  }
  devicesBuilder.append("</devices>\n");
  return devicesBuilder.toString();
}
