{
  Account account=(Account)params.get(BaseCmd.Properties.ACCOUNT_OBJ.getName());
  Boolean available=(Boolean)params.get(BaseCmd.Properties.AVAILABLE.getName());
  List<DataCenterVO> dataCenters=null;
  if (account != null) {
    if (available != null && available) {
      dataCenters=getManagementServer().listDataCenters();
    }
 else {
      dataCenters=getManagementServer().listDataCentersBy(account.getId());
    }
  }
 else {
    dataCenters=getManagementServer().listDataCenters();
  }
  if (dataCenters == null) {
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"unable to find zones for account " + account.getAccountName());
  }
  List<Pair<String,Object>> dcTags=new ArrayList<Pair<String,Object>>();
  Object[] dcInstTag=new Object[dataCenters.size()];
  int i=0;
  for (  DataCenterVO dataCenter : dataCenters) {
    List<Pair<String,Object>> dcData=new ArrayList<Pair<String,Object>>();
    dcData.add(new Pair<String,Object>(BaseCmd.Properties.ID.getName(),Long.toString(dataCenter.getId())));
    dcData.add(new Pair<String,Object>(BaseCmd.Properties.NAME.getName(),dataCenter.getName()));
    if ((dataCenter.getDescription() != null) && !dataCenter.getDescription().equalsIgnoreCase("null")) {
      dcData.add(new Pair<String,Object>(BaseCmd.Properties.DESCRIPTION.getName(),dataCenter.getDescription()));
    }
    if ((account == null) || (account.getType() == Account.ACCOUNT_TYPE_ADMIN)) {
      if (dataCenter.getDns1() != null) {
        dcData.add(new Pair<String,Object>(BaseCmd.Properties.DNS1.getName(),dataCenter.getDns1()));
      }
      if (dataCenter.getDns2() != null) {
        dcData.add(new Pair<String,Object>(BaseCmd.Properties.DNS2.getName(),dataCenter.getDns2()));
      }
      if (dataCenter.getInternalDns1() != null) {
        dcData.add(new Pair<String,Object>(BaseCmd.Properties.INTERNAL_DNS1.getName(),dataCenter.getInternalDns1()));
      }
      if (dataCenter.getInternalDns2() != null) {
        dcData.add(new Pair<String,Object>(BaseCmd.Properties.INTERNAL_DNS2.getName(),dataCenter.getInternalDns2()));
      }
      if (dataCenter.getVnet() != null) {
        dcData.add(new Pair<String,Object>("vlan",dataCenter.getVnet()));
      }
      if (dataCenter.getGuestNetworkCidr() != null) {
        dcData.add(new Pair<String,Object>(BaseCmd.Properties.GUEST_CIDR_ADDRESS.getName(),dataCenter.getGuestNetworkCidr()));
      }
    }
    dcInstTag[i++]=dcData;
  }
  Pair<String,Object> dcTag=new Pair<String,Object>("zone",dcInstTag);
  dcTags.add(dcTag);
  return dcTags;
}
