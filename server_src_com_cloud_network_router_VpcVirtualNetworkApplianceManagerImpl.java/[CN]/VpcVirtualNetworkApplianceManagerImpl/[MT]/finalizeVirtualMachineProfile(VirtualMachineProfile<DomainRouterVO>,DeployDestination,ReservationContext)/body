{
  if (profile.getVirtualMachine().getVpcId() != null) {
    Iterator<NicProfile> it=profile.getNics().iterator();
    while (it.hasNext()) {
      NicProfile nic=it.next();
      if (nic.getTrafficType() == TrafficType.Public || nic.getTrafficType() == TrafficType.Guest) {
        s_logger.debug("Removing nic of type " + nic.getTrafficType() + " from the nics passed on vm start. "+ "The nic will be plugged later");
        it.remove();
      }
    }
    StringBuilder buf=profile.getBootArgsBuilder();
    Vpc vpc=_vpcMgr.getVpc(profile.getVirtualMachine().getVpcId());
    buf.append(" vpccidr=" + vpc.getCidr());
  }
  return super.finalizeVirtualMachineProfile(profile,dest,context);
}
