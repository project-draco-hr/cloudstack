{
  if (network.getTrafficType() != TrafficType.Guest) {
    s_logger.warn("Network " + network + " is not of type "+ TrafficType.Guest);
    return false;
  }
  if (!_networkMgr.isVmPartOfNetwork(router.getId(),network.getId())) {
    s_logger.debug("Router " + router + " is not a part of the Guest network "+ network);
    return true;
  }
  boolean result=setupVpcGuestNetwork(network,router,false,_networkMgr.getNicProfile(router,network.getId()));
  if (!result) {
    s_logger.warn("Failed to destroy guest network config " + network + " on router "+ router);
    return false;
  }
  result=result && _itMgr.removeVmFromNetwork(router,network,null);
  if (result) {
    if (result) {
      _routerDao.removeRouterFromGuestNetwork(router.getId(),network.getId());
    }
  }
  return result;
}
