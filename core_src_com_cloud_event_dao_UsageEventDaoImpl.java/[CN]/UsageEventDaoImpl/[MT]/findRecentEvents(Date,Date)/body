{
  Transaction txn=Transaction.open(Transaction.USAGE_DB);
  try {
    int i=1;
    if (recentEventDate == null) {
      return listAllEvents(endDate);
    }
 else {
      return listLatestEvents(recentEventDate,endDate);
    }
  }
 catch (  Exception ex) {
    s_logger.error("error getting most recent event date",ex);
    throw new UsageServerException(ex.getMessage());
  }
 finally {
    txn.close();
  }
}
