{
  SnapshotObject snapshotObj=(SnapshotObject)data;
  DataStore secStore=snapshotObj.getDataStore();
  CommandResult result=new CommandResult();
  SnapshotVO snapshot=snapshotObj.getSnapshotVO();
  if (snapshot == null) {
    s_logger.debug("Destroying snapshot " + snapshotObj.getId() + " backup failed due to unable to find snapshot ");
    result.setResult("Unable to find snapshot: " + snapshotObj.getId());
    callback.complete(result);
    return;
  }
  try {
    String backupOfSnapshot=snapshotObj.getPath();
    if (backupOfSnapshot == null) {
      callback.complete(result);
      return;
    }
    DeleteSnapshotBackupCommand2 cmd=new DeleteSnapshotBackupCommand2(secStore.getTO(),backupOfSnapshot);
    EndPoint ep=_epSelector.select(secStore);
    Answer answer=ep.sendMessage(cmd);
    if (answer != null && !answer.getResult()) {
      result.setResult(answer.getDetails());
    }
  }
 catch (  Exception e) {
    s_logger.debug("failed to delete snapshot: " + snapshotObj.getId() + ": "+ e.toString());
    result.setResult(e.toString());
  }
  callback.complete(result);
}
