{
  Transaction txn=Transaction.currentTxn();
  try {
    txn.start();
    PlannerHostReservationVO reservationEntry=_plannerHostReserveDao.findByHostId(hostId);
    if (reservationEntry != null) {
      long id=reservationEntry.getId();
      PlannerHostReservationVO hostReservation=_plannerHostReserveDao.lockRow(id,true);
      if (hostReservation == null) {
        if (s_logger.isDebugEnabled()) {
          s_logger.debug("Host reservation for host: " + hostId + " does not even exist.  Release reservartion call is ignored.");
        }
        txn.rollback();
        return false;
      }
      hostReservation.setResourceUsage(null);
      _plannerHostReserveDao.persist(hostReservation);
      txn.commit();
      return true;
    }
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Host reservation for host: " + hostId + " does not even exist.  Release reservartion call is ignored.");
    }
    return false;
  }
 catch (  CloudRuntimeException e) {
    throw e;
  }
catch (  Throwable t) {
    s_logger.error("Unable to release host reservation for host: " + hostId,t);
    txn.rollback();
    return false;
  }
}
