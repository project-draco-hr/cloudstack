{
  if (cmd.getClusterId() == null) {
    try {
      final Boolean result=propagateResourceEvent(cmd.getHostId(),ResourceState.Event.UpdatePassword);
      if (result != null) {
        return result;
      }
    }
 catch (    final AgentUnavailableException e) {
    }
    return doUpdateHostPassword(cmd.getHostId());
  }
 else {
    final List<HostVO> hosts=listAllHostsInCluster(cmd.getClusterId());
    for (    final HostVO h : hosts) {
      try {
        final Boolean result=propagateResourceEvent(h.getId(),ResourceState.Event.UpdatePassword);
        if (result != null) {
          return result;
        }
        doUpdateHostPassword(h.getId());
      }
 catch (      final AgentUnavailableException e) {
      }
    }
    return true;
  }
}
