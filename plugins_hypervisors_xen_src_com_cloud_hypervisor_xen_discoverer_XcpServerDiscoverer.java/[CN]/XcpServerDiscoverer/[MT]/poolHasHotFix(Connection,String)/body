{
  try {
    Map<Host,Host.Record> hosts=Host.getAllRecords(conn);
    for (    Map.Entry<Host,Host.Record> entry : hosts.entrySet()) {
      Host.Record re=entry.getValue();
      if (!re.address.equalsIgnoreCase(hostIp)) {
        continue;
      }
      Set<HostPatch> patches=re.patches;
      PoolPatch poolPatch=PoolPatch.getByUuid(conn,XenserverConfigs.FixFoxUuid);
      for (      HostPatch patch : patches) {
        PoolPatch pp=patch.getPoolPatch(conn);
        if (pp.equals(poolPatch) && patch.getApplied(conn)) {
          s_logger.debug("host " + hostIp + " does have Fox Hotfix");
          return true;
        }
      }
    }
    return false;
  }
 catch (  UuidInvalid e) {
    s_logger.debug("host " + hostIp + " doesn't have Fox Hotfix");
  }
catch (  Exception e) {
    s_logger.debug("can't get patches information, consider it doesn't have Fox Hotfix");
  }
  return false;
}
