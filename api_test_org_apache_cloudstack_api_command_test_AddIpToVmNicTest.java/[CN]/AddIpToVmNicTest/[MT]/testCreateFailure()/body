{
  NetworkService networkService=Mockito.mock(NetworkService.class);
  AddIpToVmNicCmd ipTonicCmd=Mockito.mock(AddIpToVmNicCmd.class);
  Mockito.when(networkService.allocateSecondaryGuestIP(Matchers.any(Account.class),Matchers.anyLong(),Matchers.anyLong(),Matchers.anyLong(),Matchers.anyString())).thenReturn(null);
  ipTonicCmd._networkService=networkService;
  try {
    ipTonicCmd.execute();
  }
 catch (  InsufficientAddressCapacityException e) {
    throw new InvalidParameterValueException("Allocating guest ip for nic failed");
  }
}
