{
  Map<String,String> configs=_configDao.getConfiguration("Network",params);
  _numWorkerThreads=NumbersUtil.parseInt(configs.get(Config.SecurityGroupWorkerThreads.key()),WORKER_THREAD_COUNT);
  _timeBetweenCleanups=NumbersUtil.parseInt(configs.get(Config.SecurityGroupWorkCleanupInterval.key()),TIME_BETWEEN_CLEANUPS);
  _globalWorkLockTimeout=NumbersUtil.parseInt(configs.get(Config.SecurityGroupWorkGlobalLockTimeout.key()),300);
  VirtualMachine.State.getStateMachine().registerListener(this);
  _answerListener=new SecurityGroupListener(this,_agentMgr,_workDao);
  _agentMgr.registerForHostEvents(_answerListener,true,true,true);
  _serverId=((ManagementServer)ComponentLocator.getComponent(ManagementServer.Name)).getId();
  _executorPool=Executors.newScheduledThreadPool(_numWorkerThreads,new NamedThreadFactory("NWGRP"));
  _cleanupExecutor=Executors.newScheduledThreadPool(1,new NamedThreadFactory("NWGRP-Cleanup"));
  s_logger.info("SecurityGroupManager: num worker threads=" + _numWorkerThreads + ", time between cleanups="+ _timeBetweenCleanups);
  return true;
}
