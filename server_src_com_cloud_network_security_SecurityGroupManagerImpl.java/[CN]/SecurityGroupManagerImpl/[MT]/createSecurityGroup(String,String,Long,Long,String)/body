{
  final Transaction txn=Transaction.currentTxn();
  AccountVO account=null;
  txn.start();
  try {
    account=_accountDao.acquireInLockTable(accountId);
    if (account == null) {
      s_logger.warn("Failed to acquire lock on account");
      return null;
    }
    SecurityGroupVO group=_securityGroupDao.findByAccountAndName(accountId,name);
    if (group == null) {
      group=new SecurityGroupVO(name,description,domainId,accountId);
      group=_securityGroupDao.persist(group);
    }
    s_logger.debug("Created security group " + group + " for account id="+ accountId);
    return group;
  }
  finally {
    if (account != null) {
      _accountDao.releaseFromLockTable(accountId);
    }
    txn.commit();
  }
}
