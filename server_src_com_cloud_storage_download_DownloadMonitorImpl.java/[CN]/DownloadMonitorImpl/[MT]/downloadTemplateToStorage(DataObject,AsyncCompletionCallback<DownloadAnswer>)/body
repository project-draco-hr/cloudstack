{
  long templateId=template.getId();
  DataStore store=template.getDataStore();
  if (isTemplateUpdateable(templateId,store.getId())) {
    if (template != null && template.getUri() != null) {
      initiateTemplateDownload(template,callback);
    }
 else {
      s_logger.info("Template url is null, cannot download");
      DownloadAnswer ans=new DownloadAnswer("Template url is null",VMTemplateStorageResourceAssoc.Status.DOWNLOAD_ERROR.UNKNOWN);
      callback.complete(ans);
    }
  }
 else {
    s_logger.info("Template download is already in progress or already downloaded");
    DownloadAnswer ans=new DownloadAnswer("Template download is already in progress or already downloaded",VMTemplateStorageResourceAssoc.Status.DOWNLOAD_ERROR.UNKNOWN);
    callback.complete(ans);
  }
}
