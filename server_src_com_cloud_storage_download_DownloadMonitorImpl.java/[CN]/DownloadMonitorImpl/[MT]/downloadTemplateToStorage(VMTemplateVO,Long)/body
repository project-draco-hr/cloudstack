{
  List<DataCenterVO> dcs=new ArrayList<DataCenterVO>();
  if (zoneId == null) {
    dcs.addAll(_dcDao.listAll());
  }
 else {
    dcs.add(_dcDao.findById(zoneId));
  }
  long templateId=template.getId();
  boolean isPublic=template.isFeatured() || template.isPublicTemplate();
  for (  DataCenterVO dc : dcs) {
    List<HostVO> ssHosts=_hostDao.listAllSecondaryStorageHosts(dc.getId());
    for (    HostVO ssHost : ssHosts) {
      if (isTemplateUpdateable(ssHost.getId(),templateId)) {
        initiateTemplateDownload(templateId,ssHost);
        if (!isPublic) {
          break;
        }
      }
    }
  }
  return true;
}
