{
  StoragePoolHostVO poolHost=_storagePoolHostDao.findByPoolHost(store.getId(),scope.getScopeId());
  if (poolHost == null) {
    poolHost=new StoragePoolHostVO(store.getId(),scope.getScopeId(),existingInfo.getLocalPath());
    _storagePoolHostDao.persist(poolHost);
  }
  StoragePoolVO pool=this.primaryDataStoreDao.findById(store.getId());
  pool.setScope(scope.getScopeType());
  pool.setAvailableBytes(existingInfo.getAvailableBytes());
  pool.setCapacityBytes(existingInfo.getCapacityBytes());
  pool.setStatus(StoragePoolStatus.Up);
  this.primaryDataStoreDao.update(pool.getId(),pool);
  this.storageMgr.createCapacityEntry(pool,Capacity.CAPACITY_TYPE_LOCAL_STORAGE,pool.getCapacityBytes() - pool.getAvailableBytes());
  return true;
}
