{
  if (cmd instanceof StartupRoutingCommand) {
    if (((StartupRoutingCommand)cmd).getHypervisorType() == Hypervisor.Type.KVM || ((StartupRoutingCommand)cmd).getHypervisorType() == Hypervisor.Type.XenServer) {
      Map<String,String> configs=_configDao.getConfiguration("management-server",new HashMap<String,Object>());
      String pubKey=configs.get("ssh.publickey");
      String prvKey=configs.get("ssh.privatekey");
      if (!_networkMgr.sendSshKeysToHost(host.getId(),pubKey,prvKey)) {
        s_logger.debug("Failed to send keys to agent: " + host.getId());
        return false;
      }
    }
  }
  return true;
}
