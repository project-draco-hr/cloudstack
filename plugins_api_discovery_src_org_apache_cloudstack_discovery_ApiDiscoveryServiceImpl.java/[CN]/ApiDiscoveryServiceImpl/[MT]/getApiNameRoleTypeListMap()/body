{
  Map<String,List<RoleType>> apiNameRoleTypeMap=new HashMap<String,List<RoleType>>();
  ComponentLocator locator=ComponentLocator.getLocator(ManagementServer.Name);
  List<PluggableService> services=locator.getAllPluggableServices();
  services.add((PluggableService)ComponentLocator.getComponent(ManagementServer.Name));
  for (  PluggableService service : services) {
    for (    Map.Entry<String,String> entry : service.getProperties().entrySet()) {
      String apiName=entry.getKey();
      String roleMask=entry.getValue();
      try {
        short cmdPermissions=Short.parseShort(roleMask);
        if (!apiNameRoleTypeMap.containsKey(apiName))         apiNameRoleTypeMap.put(apiName,new ArrayList<RoleType>());
        for (        RoleType roleType : RoleType.values()) {
          if ((cmdPermissions & roleType.getValue()) != 0)           apiNameRoleTypeMap.get(apiName).add(roleType);
        }
      }
 catch (      NumberFormatException nfe) {
      }
    }
  }
  return apiNameRoleTypeMap;
}
