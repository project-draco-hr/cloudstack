@attr(tags=['simulator', 'basic', 'advanced'], required_hardware='false')
def test_01_list_aff_grps_for_vm(self):
    '\n          List affinity group for a vm for projects\n        '
    aff_grps = []
    aff_grps.append(self.create_aff_grp(self.domain_api_client, projectid=self.project.id))
    (vm, hostid) = self.create_vm_in_aff_grps(self.account_api_client, ag_list=[aff_grps[0].name])
    list_aff_grps = AffinityGroup.list(self.api_client, virtualmachineid=vm.id)
    self.assertEqual(list_aff_grps[0].name, aff_grps[0].name, 'Listing Affinity Group by VM id failed')
    self.assertEqual(list_aff_grps[0].projectid, self.project.id, 'Listing Affinity Group by VM id failed, vm was not in project')
    vm.delete(self.api_client)
    wait_for_cleanup(self.apiclient, ['expunge.delay', 'expunge.interval'])
    self.cleanup.append(aff_grps[0])
