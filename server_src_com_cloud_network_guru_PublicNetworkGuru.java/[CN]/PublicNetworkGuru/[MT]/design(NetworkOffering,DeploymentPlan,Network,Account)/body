{
  DataCenter dc=_dcDao.findById(plan.getDataCenterId());
  if (!canHandle(offering,dc)) {
    return null;
  }
  if (offering.getTrafficType() == TrafficType.Public) {
    GuestIpType type=null;
    if (network.isSecurityGroupEnabled()) {
      type=GuestIpType.Direct;
    }
    NetworkVO ntwk=new NetworkVO(offering.getTrafficType(),type,Mode.Static,BroadcastDomainType.Vlan,offering.getId(),plan.getDataCenterId(),State.Setup);
    return ntwk;
  }
 else {
    return null;
  }
}
