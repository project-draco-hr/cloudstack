{
  String value=configDao.getValue(Config.CreatePrivateTemplateFromSnapshotWait.toString());
  int _createprivatetemplatefromsnapshotwait=NumbersUtil.parseInt(value,Integer.parseInt(Config.CreatePrivateTemplateFromSnapshotWait.getDefaultValue()));
  boolean needCache=false;
  if (needCacheStorage(srcData,destData)) {
    needCache=true;
    SnapshotInfo snapshot=(SnapshotInfo)srcData;
    srcData=cacheSnapshotChain(snapshot);
  }
  EndPoint ep=null;
  if (srcData.getDataStore().getRole() == DataStoreRole.Primary) {
    ep=selector.select(destData);
  }
 else {
    ep=selector.select(srcData,destData);
  }
  CopyCommand cmd=new CopyCommand(srcData.getTO(),destData.getTO(),_createprivatetemplatefromsnapshotwait,VirtualMachineManager.ExecuteInSequence.value());
  Answer answer=null;
  if (ep == null) {
    String errMsg="No remote endpoint to send command, check if host or ssvm is down?";
    s_logger.error(errMsg);
    answer=new Answer(cmd,false,errMsg);
  }
 else {
    answer=ep.sendMessage(cmd);
  }
  if (needCache && srcData != null) {
    cacheMgr.releaseCacheObject(srcData);
  }
  return answer;
}
