{
  Answer answer=null;
  String errMsg=null;
  try {
    if (destData.getType() == DataObjectType.VOLUME && srcData.getType() == DataObjectType.VOLUME && srcData.getDataStore().getRole() == DataStoreRole.Image) {
      answer=copyVolumeFromImage(srcData,destData);
    }
 else     if (destData.getType() == DataObjectType.TEMPLATE && srcData.getType() == DataObjectType.TEMPLATE) {
      answer=copyTemplate(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.SNAPSHOT && destData.getType() == DataObjectType.VOLUME) {
      answer=copyVolumeFromSnapshot(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.SNAPSHOT && destData.getType() == DataObjectType.TEMPLATE) {
      answer=createTemplateFromSnapshot(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.VOLUME && destData.getType() == DataObjectType.TEMPLATE) {
      answer=createTemplateFromVolume(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.TEMPLATE && destData.getType() == DataObjectType.VOLUME) {
      answer=cloneVolume(srcData,destData);
    }
 else     if (destData.getType() == DataObjectType.VOLUME && srcData.getType() == DataObjectType.VOLUME && srcData.getDataStore().getRole() == DataStoreRole.Primary) {
      answer=copyVolumeBetweenPools(srcData,destData);
    }
 else     if (srcData.getType() == DataObjectType.SNAPSHOT && destData.getType() == DataObjectType.SNAPSHOT) {
      answer=copySnapshot(srcData,destData);
    }
    if (answer != null && !answer.getResult()) {
      errMsg=answer.getDetails();
    }
  }
 catch (  Exception e) {
    s_logger.debug("copy failed",e);
    errMsg=e.toString();
  }
  CopyCommandResult result=new CopyCommandResult(null,answer);
  result.setResult(errMsg);
  callback.complete(result);
  return null;
}
