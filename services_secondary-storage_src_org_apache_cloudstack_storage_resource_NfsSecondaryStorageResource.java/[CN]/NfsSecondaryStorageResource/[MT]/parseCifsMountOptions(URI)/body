{
  List<NameValuePair> args=URLEncodedUtils.parse(uri,"UTF-8");
  boolean foundUser=false;
  boolean foundPswd=false;
  StringBuilder extraOpts=new StringBuilder();
  for (  NameValuePair nvp : args) {
    String name=nvp.getName();
    if (name.equals("user")) {
      foundUser=true;
      s_logger.debug("foundUser is" + foundUser);
    }
 else     if (name.equals("password")) {
      foundPswd=true;
      s_logger.debug("password is present in uri");
    }
    extraOpts.append(name + "=" + nvp.getValue()+ ",");
  }
  if (s_logger.isDebugEnabled()) {
    s_logger.error("extraOpts now " + extraOpts);
  }
  if (!foundUser || !foundPswd) {
    String errMsg="Missing user and password from URI. Make sure they" + "are in the query string and separated by '&'.  E.g. " + "cifs://example.com/some_share?user=foo&password=bar";
    s_logger.error(errMsg);
    throw new CloudRuntimeException(errMsg);
  }
  return extraOpts.toString();
}
