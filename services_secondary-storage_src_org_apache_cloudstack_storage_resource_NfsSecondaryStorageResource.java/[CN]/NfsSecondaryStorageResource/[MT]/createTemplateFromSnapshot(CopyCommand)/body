{
  DataTO srcData=cmd.getSrcTO();
  DataTO destData=cmd.getDestTO();
  DataStoreTO srcDataStore=srcData.getDataStore();
  DataStoreTO destDataStore=destData.getDataStore();
  if (srcDataStore.getRole() == DataStoreRole.Image || srcDataStore.getRole() == DataStoreRole.ImageCache) {
    if (!(srcDataStore instanceof NfsTO)) {
      s_logger.debug("only support nfs storage as src, when create template from snapshot");
      return Answer.createUnsupportedCommandAnswer(cmd);
    }
    if (destDataStore instanceof NfsTO) {
      return copySnapshotToTemplateFromNfsToNfs(cmd,(SnapshotObjectTO)srcData,(NfsTO)srcDataStore,(TemplateObjectTO)destData,(NfsTO)destDataStore);
    }
  }
  return new CopyCmdAnswer("");
}
