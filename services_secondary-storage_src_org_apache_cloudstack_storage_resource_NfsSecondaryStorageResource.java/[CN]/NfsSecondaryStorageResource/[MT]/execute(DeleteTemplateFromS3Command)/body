{
  final S3TO s3=cmd.getS3();
  final Long accountId=cmd.getAccountId();
  final Long templateId=cmd.getTemplateId();
  if (accountId == null || (accountId != null && accountId <= 0)) {
    final String errorMessage="No account id specified for S3 template deletion.";
    s_logger.error(errorMessage);
    return new Answer(cmd,false,errorMessage);
  }
  if (templateId == null || (templateId != null && templateId <= 0)) {
    final String errorMessage="No template id specified for S3 template deletion.";
    s_logger.error(errorMessage);
    return new Answer(cmd,false,errorMessage);
  }
  if (s3 == null) {
    final String errorMessge="No S3 client options provided";
    s_logger.error(errorMessge);
    return new Answer(cmd,false,errorMessge);
  }
  final String bucket=s3.getBucketName();
  try {
    deleteDirectory(s3,bucket,determineS3TemplateDirectory(templateId,accountId));
    return new Answer(cmd,true,String.format("Deleted template %1%s from bucket %2$s.",templateId,bucket));
  }
 catch (  Exception e) {
    final String errorMessage=String.format("Failed to delete templaet id %1$s from bucket %2$s due to the following error: %3$s",templateId,bucket,e.getMessage());
    s_logger.error(errorMessage,e);
    return new Answer(cmd,false,errorMessage);
  }
}
