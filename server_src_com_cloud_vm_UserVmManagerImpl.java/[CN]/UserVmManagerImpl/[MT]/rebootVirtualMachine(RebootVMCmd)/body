{
  Account account=UserContext.current().getAccount();
  Long userId=UserContext.current().getUserId();
  Long vmId=cmd.getId();
  UserVmVO vmInstance=_vmDao.findById(vmId.longValue());
  if (vmInstance == null) {
    throw new ServerApiException(BaseCmd.PARAM_ERROR,"unable to find a virtual machine with id " + vmId);
  }
  userId=accountAndUserValidation(vmId,account,userId,vmInstance);
  EventUtils.saveScheduledEvent(userId,vmInstance.getAccountId(),EventTypes.EVENT_VM_REBOOT,"Rebooting Vm with Id: " + vmId);
  boolean status=rebootVirtualMachine(userId,vmId);
  if (status) {
    EventUtils.saveEvent(userId,vmInstance.getAccountId(),EventTypes.EVENT_VM_REBOOT,"Successfully rebooted vm with id:" + vmId);
    return _vmDao.findById(vmId);
  }
 else {
    EventUtils.saveEvent(userId,vmInstance.getAccountId(),EventTypes.EVENT_VM_REBOOT,"Failed to reboot vm with id:" + vmId);
    throw new CloudRuntimeException("Failed to reboot vm with id: " + vmId);
  }
}
