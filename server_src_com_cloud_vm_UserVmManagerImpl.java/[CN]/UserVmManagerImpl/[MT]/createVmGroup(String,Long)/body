{
  final Transaction txn=Transaction.currentTxn();
  AccountVO account=null;
  txn.start();
  try {
    account=_accountDao.acquire(accountId);
    if (account == null) {
      s_logger.warn("Failed to acquire lock on account");
      return null;
    }
    InstanceGroupVO group=_vmGroupDao.findByAccountAndName(accountId,name);
    if (group == null) {
      group=new InstanceGroupVO(name,accountId);
      group=_vmGroupDao.persist(group);
    }
    return group;
  }
  finally {
    if (account != null) {
      _accountDao.release(accountId);
    }
    txn.commit();
  }
}
