{
  Account caller=UserContext.current().getCaller();
  Long userId=UserContext.current().getCallerUserId();
  long vmId=cmd.getVmId();
  UserVmVO vm=_vmDao.findById(vmId);
  if (vm == null) {
    InvalidParameterValueException ex=new InvalidParameterValueException("Cannot find VM with ID " + vmId);
    ex.addProxyObject(vm,vmId,"vmId");
    throw ex;
  }
  return restoreVMInternal(caller,vm);
}
