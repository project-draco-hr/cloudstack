{
  Long userId=UserContext.current().getUserId();
  boolean result=resetVMPasswordInternal(cmd);
  UserVmVO userVm=_vmDao.findById(cmd.getId());
  if (userVm != null) {
    if (result) {
      EventUtils.saveEvent(userId,userVm.getAccountId(),EventVO.LEVEL_INFO,EventTypes.EVENT_VM_RESETPASSWORD,"successfully reset password for VM : " + userVm.getName(),null);
    }
 else {
      EventUtils.saveEvent(userId,userVm.getAccountId(),EventVO.LEVEL_ERROR,EventTypes.EVENT_VM_RESETPASSWORD,"unable to reset password for VM : " + userVm.getName(),null);
    }
  }
 else {
    s_logger.warn("Unable to find vm = " + cmd.getId() + " to reset password");
  }
  return userVm;
}
