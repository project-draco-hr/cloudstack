{
  UserVmVO vm=profile.getVirtualMachine();
  UsageEventVO usageEvent=new UsageEventVO(EventTypes.EVENT_VM_START,vm.getAccountId(),vm.getDataCenterId(),vm.getId(),vm.getHostName(),vm.getServiceOfferingId(),vm.getTemplateId(),vm.getHypervisorType().toString());
  _usageEventDao.persist(usageEvent);
  List<NicVO> nics=_nicDao.listByVmId(vm.getId());
  for (  NicVO nic : nics) {
    NetworkVO network=_networkDao.findById(nic.getNetworkId());
    long isDefault=(nic.isDefaultNic()) ? 1 : 0;
    usageEvent=new UsageEventVO(EventTypes.EVENT_NETWORK_OFFERING_ASSIGN,vm.getAccountId(),vm.getDataCenterId(),vm.getId(),vm.getHostName(),network.getNetworkOfferingId(),null,isDefault);
    _usageEventDao.persist(usageEvent);
  }
  return true;
}
