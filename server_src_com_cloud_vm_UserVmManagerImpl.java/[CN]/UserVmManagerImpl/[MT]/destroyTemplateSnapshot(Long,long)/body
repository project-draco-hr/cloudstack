{
  boolean success=false;
  SnapshotVO snapshot=_snapshotDao.findById(Long.valueOf(snapshotId));
  if (snapshot != null) {
    VolumeVO volume=_volsDao.findById(snapshot.getVolumeId());
    ManageSnapshotCommand cmd=new ManageSnapshotCommand(ManageSnapshotCommand.DESTROY_SNAPSHOT,snapshotId,snapshot.getPath(),snapshot.getName(),null);
    Answer answer=null;
    String basicErrMsg="Failed to destroy template snapshot: " + snapshot.getName();
    Long storagePoolId=volume.getPoolId();
    answer=_storageMgr.sendToHostsOnStoragePool(storagePoolId,cmd,basicErrMsg);
    if ((answer != null) && answer.getResult()) {
      _snapshotDao.delete(snapshotId);
      success=true;
    }
    if (answer != null) {
      s_logger.error(answer.getDetails());
    }
  }
  return success;
}
