{
  List<UserVmVO> result=new ArrayList<UserVmVO>();
  for (  DomainVO domain : domainToSearchWithin) {
    Criteria c=new Criteria("id",Boolean.TRUE,cmd.getStartIndex(),cmd.getPageSizeVal());
    c.addCriteria(Criteria.KEYWORD,cmd.getKeyword());
    c.addCriteria(Criteria.ID,cmd.getId());
    c.addCriteria(Criteria.NAME,cmd.getInstanceName());
    c.addCriteria(Criteria.STATE,cmd.getState());
    c.addCriteria(Criteria.DATACENTERID,cmd.getZoneId());
    c.addCriteria(Criteria.GROUPID,cmd.getGroupId());
    c.addCriteria(Criteria.FOR_VIRTUAL_NETWORK,cmd.getForVirtualNetwork());
    c.addCriteria(Criteria.NETWORKID,cmd.getNetworkId());
    if (path != null) {
      c.addCriteria(Criteria.PATH,path);
    }
    if (isAdmin == true) {
      c.addCriteria(Criteria.DOMAINID,domain.getId());
      c.addCriteria(Criteria.PODID,cmd.getPodId());
      c.addCriteria(Criteria.HOSTID,cmd.getHostId());
    }
    if (accountId != null) {
      c.addCriteria(Criteria.ACCOUNTID,new Object[]{accountId});
    }
    c.addCriteria(Criteria.ISADMIN,isAdmin);
    result.addAll(searchForUserVMs(c));
  }
  return result;
}
