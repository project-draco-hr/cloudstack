{
  Account account=UserContext.current().getCaller();
  Long userId=UserContext.current().getCallerUserId();
  if (account != null && account.getRemoved() != null) {
    throw new PermissionDeniedException("The account " + account.getId() + " is removed");
  }
  UserVmVO vm=_vmDao.findById(vmId);
  if (vm == null) {
    throw new ServerApiException(BaseCmd.PARAM_ERROR,"unable to find a virtual machine with id " + vmId);
  }
  userId=accountAndUserValidation(vmId,account,userId,vm);
  UserVO user=_userDao.findById(userId);
  VolumeVO disk=_volsDao.findByInstance(vmId).get(0);
  HypervisorType hyperType=_volsDao.getHypervisorType(disk.getId());
  return _itMgr.start(vm,null,user,account,hyperType);
}
