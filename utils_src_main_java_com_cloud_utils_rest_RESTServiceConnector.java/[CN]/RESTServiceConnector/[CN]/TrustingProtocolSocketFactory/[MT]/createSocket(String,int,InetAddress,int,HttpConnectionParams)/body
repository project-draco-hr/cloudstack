{
  final int timeout=params.getConnectionTimeout();
  if (timeout == 0) {
    Socket socket=createSocket(host,port,localAddress,localPort);
    if (socket instanceof SSLSocket) {
      ((SSLSocket)socket).setEnabledProtocols(SSLUtils.getSupportedProtocols(((SSLSocket)socket).getEnabledProtocols()));
    }
    return socket;
  }
 else {
    final Socket s=ssf.createSocket();
    if (s instanceof SSLSocket) {
      ((SSLSocket)s).setEnabledProtocols(SSLUtils.getSupportedProtocols(((SSLSocket)s).getEnabledProtocols()));
    }
    s.bind(new InetSocketAddress(localAddress,localPort));
    s.connect(new InetSocketAddress(host,port),timeout);
    return s;
  }
}
