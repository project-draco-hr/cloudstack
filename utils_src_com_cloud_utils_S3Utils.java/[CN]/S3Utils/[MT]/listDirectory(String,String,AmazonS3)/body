{
  List<S3ObjectSummary> objects=new ArrayList<S3ObjectSummary>();
  ListObjectsRequest listObjectsRequest=new ListObjectsRequest().withBucketName(bucketName).withPrefix(directory + SEPARATOR);
  ObjectListing objectListing;
  do {
    objectListing=client.listObjects(listObjectsRequest);
    if (objectListing != null)     objects.addAll(objectListing.getObjectSummaries());
    listObjectsRequest.setMarker(objectListing.getNextMarker());
  }
 while (objectListing.isTruncated());
  if (objects.isEmpty()) {
    return emptyList();
  }
  return unmodifiableList(objects);
}
