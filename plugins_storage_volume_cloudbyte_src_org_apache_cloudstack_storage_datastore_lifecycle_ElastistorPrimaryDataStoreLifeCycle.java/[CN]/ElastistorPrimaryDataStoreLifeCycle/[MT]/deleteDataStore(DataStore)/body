{
  List<StoragePoolHostVO> hostPoolRecords=_storagePoolHostDao.listByPoolId(store.getId());
  StoragePool pool=(StoragePool)store;
  HypervisorType hType=null;
  if (hostPoolRecords.size() > 0) {
    hType=getHypervisorType(hostPoolRecords.get(0).getHostId());
  }
  StoragePoolVO storagePoolVO=_storagePoolDao.findById(store.getId());
  if (!(storagePoolVO.isManaged())) {
    for (    StoragePoolHostVO host : hostPoolRecords) {
      DeleteStoragePoolCommand deleteCmd=new DeleteStoragePoolCommand(pool);
      final Answer answer=agentMgr.easySend(host.getHostId(),deleteCmd);
      if (answer != null && answer.getResult()) {
        if (HypervisorType.KVM != hType) {
          break;
        }
      }
 else {
        if (answer != null) {
          s_logger.error("Failed to delete storage pool: " + answer.getResult());
        }
      }
    }
  }
  deleteElastistorVolume(pool,storagePoolVO.isManaged());
  return _dataStoreHelper.deletePrimaryDataStore(store);
}
