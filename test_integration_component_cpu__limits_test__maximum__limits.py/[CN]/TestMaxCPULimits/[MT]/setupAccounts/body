def setupAccounts(self, account_limit=2, domain_limit=2, project_limit=2):
    self.debug(('Creating a domain under: %s' % self.domain.name))
    self.child_domain = Domain.create(self.apiclient, services=self.services['domain'], parentdomainid=self.domain.id)
    self.debug(('domain crated with domain id %s' % self.child_domain.id))
    self.child_do_admin = Account.create(self.apiclient, self.services['account'], admin=True, domainid=self.child_domain.id)
    self.debug(('domain admin created for domain id %s' % self.child_do_admin.domainid))
    self.project = Project.create(self.apiclient, self.services['project'], account=self.child_do_admin.name, domainid=self.child_do_admin.domainid)
    self.cleanup.append(self.project)
    self.cleanup.append(self.child_do_admin)
    self.cleanup.append(self.child_domain)
    self.debug(('Updating the CPU resource count for domain: %s' % self.child_domain.name))
    responses = Resources.updateLimit(self.apiclient, resourcetype=8, max=account_limit, account=self.child_do_admin.name, domainid=self.child_do_admin.domainid)
    self.debug(('CPU Resource count for child domain admin account is now: %s' % responses.max))
    self.debug('Updating the CPU limit for project')
    responses = Resources.updateLimit(self.apiclient, resourcetype=8, max=project_limit, projectid=self.project.id)
    self.debug('CPU Resource count for project is now')
    self.debug(responses.max)
    self.debug('Updating the CPU limit for domain only')
    responses = Resources.updateLimit(self.apiclient, resourcetype=8, max=domain_limit, domainid=self.child_domain.id)
    self.debug(('CPU Resource count for domain %s with id %s is now %s' % (responses.domain, responses.domainid, responses.max)))
    return
