def print_entries(self, map):
    dom = xml.dom.minidom.Document()
    element = dom.createElement('iscsi-target-iqns')
    dom.appendChild(element)
    count = 0
    for (address, tpgt, iqn) in map:
        entry = dom.createElement('TGT')
        element.appendChild(entry)
        subentry = dom.createElement('Index')
        entry.appendChild(subentry)
        textnode = dom.createTextNode(str(count))
        subentry.appendChild(textnode)
        try:
            (addr, port) = address.split(':')
        except:
            addr = address
            port = DEFAULT_PORT
        subentry = dom.createElement('IPAddress')
        entry.appendChild(subentry)
        textnode = dom.createTextNode(str(addr))
        subentry.appendChild(textnode)
        if (int(port) != DEFAULT_PORT):
            subentry = dom.createElement('Port')
            entry.appendChild(subentry)
            textnode = dom.createTextNode(str(port))
            subentry.appendChild(textnode)
        subentry = dom.createElement('TargetIQN')
        entry.appendChild(subentry)
        textnode = dom.createTextNode(str(iqn))
        subentry.appendChild(textnode)
        count += 1
    print  >> sys.stderr, dom.toprettyxml()
