def print_LUNs(self):
    self.LUNs = {}
    if os.path.exists(self.path):
        for file in util.listdir(self.path):
            if ((file.find('LUN') != (-1)) and (file.find('_') == (-1))):
                vdi_path = os.path.join(self.path, file)
                LUNid = file.replace('LUN', '')
                obj = self.vdi(self.uuid)
                obj._query(vdi_path, LUNid)
                self.LUNs[obj.uuid] = obj
    dom = xml.dom.minidom.Document()
    element = dom.createElement('iscsi-target')
    dom.appendChild(element)
    for uuid in self.LUNs:
        val = self.LUNs[uuid]
        entry = dom.createElement('LUN')
        element.appendChild(entry)
        for attr in ('vendor', 'serial', 'LUNid', 'size', 'SCSIid'):
            try:
                aval = getattr(val, attr)
            except AttributeError:
                continue
            if aval:
                subentry = dom.createElement(attr)
                entry.appendChild(subentry)
                textnode = dom.createTextNode(str(aval))
                subentry.appendChild(textnode)
    print  >> sys.stderr, dom.toprettyxml()
