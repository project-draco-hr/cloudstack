{
  try {
    executor.getAsyncJobMgr().getExecutorContext().getManagementServer().assignToLoadBalancer(param.getUserId(),param.getLoadBalancerId(),param.getInstanceIdList());
    executor.getAsyncJobMgr().completeAsyncJob(executor.getJob().getId(),AsyncJobResult.STATUS_SUCCEEDED,0,"success");
  }
 catch (  InvalidParameterValueException e) {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Unable to assign vms " + StringUtils.join(param.getInstanceIdList(),",") + " to load balancer "+ param.getLoadBalancerId()+ ": "+ e.getMessage());
    }
    executor.getAsyncJobMgr().completeAsyncJob(executor.getJob().getId(),AsyncJobResult.STATUS_FAILED,BaseCmd.PARAM_ERROR,"Unable to assign vms " + StringUtils.join(param.getInstanceIdList(),",") + " to load balancer "+ param.getLoadBalancerId());
  }
catch (  NetworkRuleConflictException e) {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Unable to assign vms " + StringUtils.join(param.getInstanceIdList(),",") + " to load balancer "+ param.getLoadBalancerId()+ ": "+ e.getMessage());
    }
    executor.getAsyncJobMgr().completeAsyncJob(executor.getJob().getId(),AsyncJobResult.STATUS_FAILED,BaseCmd.NET_CONFLICT_LB_RULE_ERROR,e.getMessage());
  }
catch (  InternalErrorException e) {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Unable to assign vms " + StringUtils.join(param.getInstanceIdList(),",") + " to load balancer "+ param.getLoadBalancerId()+ ": "+ e.getMessage());
    }
    executor.getAsyncJobMgr().completeAsyncJob(executor.getJob().getId(),AsyncJobResult.STATUS_FAILED,BaseCmd.INTERNAL_ERROR,e.getMessage());
  }
catch (  PermissionDeniedException e) {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Unable to assign vms " + StringUtils.join(param.getInstanceIdList(),",") + " to load balancer "+ param.getLoadBalancerId()+ ": "+ e.getMessage());
    }
    executor.getAsyncJobMgr().completeAsyncJob(executor.getJob().getId(),AsyncJobResult.STATUS_FAILED,BaseCmd.ACCOUNT_ERROR,e.getMessage());
  }
catch (  Exception e) {
    s_logger.warn("Unable to assign vms " + StringUtils.join(param.getInstanceIdList(),",") + " to load balancer "+ param.getLoadBalancerId()+ ": "+ e.getMessage(),e);
    executor.getAsyncJobMgr().completeAsyncJob(executor.getJob().getId(),AsyncJobResult.STATUS_FAILED,BaseCmd.INTERNAL_ERROR,e.getMessage());
  }
  return true;
}
