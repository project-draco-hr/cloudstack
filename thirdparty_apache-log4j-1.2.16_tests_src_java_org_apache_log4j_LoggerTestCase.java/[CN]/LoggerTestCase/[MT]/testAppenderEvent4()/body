{
  CountingHierarchyEventListener listener=new CountingHierarchyEventListener();
  LogManager.getLoggerRepository().addHierarchyEventListener(listener);
  CountingAppender appender=new CountingAppender();
  Logger root=Logger.getRootLogger();
  root.addAppender(appender);
  assertEquals(1,listener.getAddEventCount());
  assertEquals(0,listener.getRemoveEventCount());
  LogManager.resetConfiguration();
  assertEquals(1,listener.getAddEventCount());
  assertEquals(1,listener.getRemoveEventCount());
}
