@attr(tags=['advanced', 'advancedns'], required_hardware='false')
def test_02_root_volume_attach_detach(self):
    'Test Root Volume attach/detach to VM\n        '
    if ((self.hypervisor.lower() == 'vmware') or (self.hypervisor.lower() == 'kvm') or (self.hypervisor.lower() == 'simulator') or (self.hypervisor.lower() == 'xenserver')):
        try:
            root_volume_response = Volume.list(self.apiclient, virtualmachineid=self.virtual_machine.id, type='ROOT', listall=True)
            self.assertNotEqual(root_volume_response, None, 'Check if root volume exists in ListVolumes')
            self.assertEqual(isinstance(root_volume_response, list), True, 'Check list volumes response for valid list')
            root_volume = root_volume_response[0]
            self.debug(('Stopping the VM: %s' % self.virtual_machine.id))
            self.virtual_machine.stop(self.apiclient)
            time.sleep(self.services['sleep'])
            vm_response = VirtualMachine.list(self.apiclient, id=self.virtual_machine.id)
            vm = vm_response[0]
            self.assertEqual(vm.state, 'Stopped', 'Check the state of VM')
            self.virtual_machine.detach_volume(self.apiclient, root_volume)
            no_root_volume_response = Volume.list(self.apiclient, virtualmachineid=self.virtual_machine.id, type='ROOT', listall=True)
            self.assertEqual(no_root_volume_response, None, 'Check if root volume exists in ListVolumes')
            self.virtual_machine.attach_volume(self.apiclient, root_volume, 0)
            new_root_volume_response = Volume.list(self.apiclient, virtualmachineid=self.virtual_machine.id, type='ROOT', listall=True)
            self.assertNotEqual(new_root_volume_response, None, 'Check if root volume exists in ListVolumes')
            self.assertEqual(isinstance(new_root_volume_response, list), True, 'Check list volumes response for valid list')
            self.virtual_machine.start(self.apiclient)
            time.sleep(self.services['sleep'])
            vm_response = VirtualMachine.list(self.apiclient, id=self.virtual_machine.id)
            self.assertEqual(isinstance(vm_response, list), True, 'Check list VM response for valid list')
            self.assertNotEqual(len(vm_response), 0, 'Check VMs available in List VMs response')
            vm = vm_response[0]
            self.assertEqual(vm.state, 'Running', 'Check the state of VM')
        except Exception as e:
            self.fail(('Exception occurred: %s' % e))
    else:
        self.skipTest(('Root Volume attach/detach is not supported on %s ' % self.hypervisor))
    return
