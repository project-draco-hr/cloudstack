{
  DataCenter dc=_entityMgr.findById(DataCenter.class,network.getDataCenterId());
  NetworkOffering offering=_entityMgr.findById(NetworkOffering.class,network.getNetworkOfferingId());
  if (!canHandle(offering,dc)) {
    return null;
  }
  if (nic == null) {
    nic=new NicProfile(ReservationStrategy.Create,null,null,null,null);
  }
  getIp(nic,dc,network);
  if (nic.getIPv4Address() == null) {
    nic.setReservationStrategy(ReservationStrategy.Start);
  }
 else {
    nic.setReservationStrategy(ReservationStrategy.Create);
  }
  return nic;
}
