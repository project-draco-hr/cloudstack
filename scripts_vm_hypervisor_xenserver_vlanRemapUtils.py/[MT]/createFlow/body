def createFlow(bridge, vifName, mac, remap):
    inport = getGreOfPorts(bridge)
    if (len(inport) == 0):
        log('WARNING: no inport found')
        return (-1)
    output = getVifPort(bridge, vifName)
    if (output == None):
        log(('WARNING: cannot find ofport for %s' % vifName))
        return (-1)
    if (output == '[]'):
        log(('WARNING: ofport is [] for %s' % vifName))
        return (-1)
    delFlow(mac)
    remap = strip(remap)
    log('')
    log('Create flow for remap')
    noneGreOfPorts = getNoneGreOfPort(bridge)
    isARP = True
    if (len(noneGreOfPorts) == 0):
        log('WARNING: no none GRE ofports found, no ARP flow will be created')
        isARP = False
    for j in remap.split('/'):
        delARPFlow(j)
        for i in inport:
            flow = formatFlow(i, j, mac, output)
            param = (bridge + (' "%s"' % flow))
            addflow = ['ovs-ofctl add-flow', param]
            doCmd(addflow)
            if (isARP == True):
                flow = formatARPFlow(bridge, i, j, noneGreOfPorts)
                param = (bridge + (' "%s"' % flow))
                addflow = ['ovs-ofctl add-flow', param]
                doCmd(addflow)
    return 0
