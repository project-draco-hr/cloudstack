def getOfPortsByType(bridge, askGre):
    portUuids = getPortsOnBridge(bridge)
    if (portUuids == None):
        log(('WARNING:No ports on bridge %s' % bridge))
        return (-1)
    OfPorts = []
    for i in portUuids:
        ifaces = getInterfacesOnPort(i)
        if (ifaces == None):
            log(('WARNING:No interfaces on port %s' % i))
            continue
        for j in ifaces:
            if (j == '[]'):
                log(('WARNING:invalid interface [] on port %s' % i))
                continue
            type = getFieldOfInterface(j, 'type')
            type = strip(type)
            if ((askGre == True) and (type == 'gre')):
                ofport = getFieldOfInterface(j, 'ofport')
                if (ofport != '[]'):
                    OfPorts.append(strip(ofport))
            elif ((askGre == False) and (type != 'gre')):
                ofport = getFieldOfInterface(j, 'ofport')
                if ((ofport != '[]') and (ofport != '65534')):
                    OfPorts.append(strip(ofport))
    return OfPorts
