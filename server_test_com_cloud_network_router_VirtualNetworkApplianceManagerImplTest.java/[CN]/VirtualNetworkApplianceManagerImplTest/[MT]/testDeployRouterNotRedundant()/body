{
  ServiceOfferingVO svcoff=new ServiceOfferingVO("name",1,1024 * 1024,1024 * 1024 * 1024,1,0,false,"displayText",ProvisioningType.THIN,false,false,"tags",false,VirtualMachine.Type.DomainRouter,false);
  DataCenter dc=new DataCenterVO(1L,"name","description","dns1",null,null,null,"cidr","domain",null,NetworkType.Basic,"zoneToken","domainSuffix");
  DomainRouterVO router=new DomainRouterVO(1L,1L,0L,"name",0L,HypervisorType.XenServer,0L,0L,1L,false,0,false,RedundantState.UNKNOWN,false,false,null);
  DeploymentPlan plan=new DataCenterDeployment(1L);
  when(_serviceOfferingDao.findById(1L)).thenReturn(svcoff);
  when(_routerDao.getNextInSequence(Long.class,"id")).thenReturn(1L);
  when(_resourceMgr.getDefaultHypervisor(1L)).thenReturn(HypervisorType.XenServer);
  when(_templateDao.findRoutingTemplate(HypervisorType.XenServer,"SystemVM Template (XenServer)")).thenReturn(new VMTemplateVO());
  when(_routerDao.persist(any(DomainRouterVO.class))).thenReturn(router);
  when(_routerDao.findById(router.getId())).thenReturn(router);
  VirtualRouter vr=virtualNetworkApplianceManagerImpl.deployRouter(new AccountVO(1L),new DeployDestination(dc,null,null,null),plan,null,false,new VirtualRouterProviderVO(),1L,null,new LinkedHashMap<Network,List<? extends NicProfile>>(),true,null);
  assertEquals(vr,router);
}
