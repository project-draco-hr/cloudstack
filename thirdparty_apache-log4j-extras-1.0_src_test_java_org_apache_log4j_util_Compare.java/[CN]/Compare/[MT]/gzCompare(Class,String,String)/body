{
  String resourceName=expected;
  int lastSlash=expected.lastIndexOf("/");
  if (lastSlash >= 0) {
    resourceName=expected.substring(lastSlash + 1);
  }
  InputStream resourceStream=testClass.getResourceAsStream(resourceName);
  if (resourceStream == null) {
    throw new FileNotFoundException("Could not locate resource " + resourceName);
  }
  BufferedReader in1=new BufferedReader(new InputStreamReader(new GZIPInputStream(new FileInputStream(actual))));
  BufferedReader in2=new BufferedReader(new InputStreamReader(new GZIPInputStream(resourceStream)));
  try {
    return gzCompare(testClass,actual,expected,in1,in2);
  }
  finally {
    in1.close();
    in2.close();
  }
}
