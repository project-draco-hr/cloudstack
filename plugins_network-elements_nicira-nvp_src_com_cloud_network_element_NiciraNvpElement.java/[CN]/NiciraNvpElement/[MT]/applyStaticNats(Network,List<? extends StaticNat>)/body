{
  if (!canHandle(network,Service.StaticNat)) {
    return false;
  }
  List<NiciraNvpDeviceVO> devices=_niciraNvpDao.listByPhysicalNetwork(network.getPhysicalNetworkId());
  if (devices.isEmpty()) {
    s_logger.error("No NiciraNvp Controller on physical network " + network.getPhysicalNetworkId());
    return false;
  }
  NiciraNvpDeviceVO niciraNvpDevice=devices.get(0);
  HostVO niciraNvpHost=_hostDao.findById(niciraNvpDevice.getHostId());
  NiciraNvpRouterMappingVO routermapping=_niciraNvpRouterMappingDao.findByNetworkIdI(network.getId());
  if (routermapping == null) {
    s_logger.error("No logical router uuid found for network " + network.getDisplayText());
    return false;
  }
  List<StaticNatRuleTO> staticNatRules=new ArrayList<StaticNatRuleTO>();
  for (  StaticNat rule : rules) {
    IpAddress sourceIp=_networkManager.getIp(rule.getSourceIpAddressId());
    StaticNatRuleTO ruleTO=new StaticNatRuleTO(1,sourceIp.getAddress().addr(),0,65535,rule.getDestIpAddress(),0,65535,"any",rule.isForRevoke(),false);
    staticNatRules.add(ruleTO);
  }
  ConfigureStaticNatRulesOnLogicalRouterCommand cmd=new ConfigureStaticNatRulesOnLogicalRouterCommand(routermapping.getLogicalRouterUuid(),staticNatRules);
  ConfigureStaticNatRulesOnLogicalRouterAnswer answer=(ConfigureStaticNatRulesOnLogicalRouterAnswer)_agentMgr.easySend(niciraNvpHost.getId(),cmd);
  return answer.getResult();
}
