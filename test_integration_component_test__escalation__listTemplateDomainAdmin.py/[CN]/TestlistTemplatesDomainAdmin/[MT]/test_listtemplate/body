@attr(tags=['advanced', 'basic'], required_hardware='true')
def test_listtemplate(self):
    template_register = Template.register(self.apiclient, self.testdata['privatetemplate'], zoneid=self.zone.id, hypervisor=self.hypervisor, account=self.account1.name, domainid=self.domain1.id)
    template_register.download(self.apiclient)
    time.sleep(self.testdata['sleep'])
    timeout = self.testdata['timeout']
    while True:
        listTemplateResponse = Template.list(self.apiclient, templatefilter='all', id=template_register.id, account=self.account1.name, domainid=self.domain1.id)
        if isinstance(listTemplateResponse, list):
            break
        elif (timeout == 0):
            raise Exception('list template failed')
        time.sleep(10)
        timeout = (timeout - 1)
        self.assertEqual(isinstance(listTemplateResponse, list), True, 'Check for list template response return valid data')
        self.assertNotEqual(len(listTemplateResponse), 0, 'Check template available in List Templates')
        template_response = listTemplateResponse[0]
        self.assertEqual(template_response.isready, True, ('Template state is not ready, it is %s' % template_response.isready))
    listtemplate = Template.list(self.apiclient, zoneid=self.zone.id, hypervisor=self.hypervisor, account=self.account2.name, domainid=self.account2.domainid, templatefilter=self.testdata['templatefilter'])
    self.assertEqual(listtemplate, None, 'Check templates are not listed')
    return
