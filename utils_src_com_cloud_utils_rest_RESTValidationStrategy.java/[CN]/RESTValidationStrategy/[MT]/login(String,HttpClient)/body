{
  String url;
  if (host == null || host.isEmpty() || user == null || user.isEmpty() || password == null || password.isEmpty()) {
    throw new CloudstackRESTException("Hostname/credentials are null or empty");
  }
  try {
    url=new URL(protocol,host,loginUrl).toString();
  }
 catch (  final MalformedURLException e) {
    s_logger.error("Unable to build Nicira API URL",e);
    throw new CloudstackRESTException("Unable to build Nicira API URL",e);
  }
  final PostMethod pm=new PostMethod(url);
  pm.addParameter("username",user);
  pm.addParameter("password",password);
  try {
    client.executeMethod(pm);
  }
 catch (  final HttpException e) {
    throw new CloudstackRESTException("REST Service API login failed ",e);
  }
catch (  final IOException e) {
    throw new CloudstackRESTException("REST Service API login failed ",e);
  }
 finally {
    pm.releaseConnection();
  }
  if (pm.getStatusCode() != HttpStatus.SC_OK) {
    s_logger.error("REST Service API login failed : " + pm.getStatusText());
    throw new CloudstackRESTException("REST Service API login failed " + pm.getStatusText());
  }
  if (pm.getResponseHeader("Server") != null) {
    serverVersion=pm.getResponseHeader("Server").getValue();
    s_logger.debug("Server reports version " + serverVersion);
  }
}
