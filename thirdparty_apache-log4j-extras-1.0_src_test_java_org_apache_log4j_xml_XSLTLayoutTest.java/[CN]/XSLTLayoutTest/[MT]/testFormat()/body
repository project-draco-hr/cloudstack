{
  clearMDC();
  NDC.clear();
  Logger logger=Logger.getLogger("org.apache.log4j.xml.XSLTLayoutTest");
  LoggingEvent event=new LoggingEvent("org.apache.log4j.Logger",logger,Level.INFO,"Hello, World",null);
  XSLTLayout layout=(XSLTLayout)createLayout();
  String result=layout.format(event);
  Element parsedResult=parse(result);
  checkEventElement(parsedResult,event);
  int childElementCount=0;
  for (Node node=parsedResult.getFirstChild(); node != null; node=node.getNextSibling()) {
switch (node.getNodeType()) {
case Node.ELEMENT_NODE:
      childElementCount++;
    checkMessageElement((Element)node,"Hello, World");
  break;
case Node.COMMENT_NODE:
break;
case Node.TEXT_NODE:
break;
default :
fail("Unexpected node type");
break;
}
}
assertEquals(1,childElementCount);
}
