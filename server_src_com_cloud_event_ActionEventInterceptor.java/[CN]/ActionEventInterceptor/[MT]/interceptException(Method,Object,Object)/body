{
  ActionEvent actionEvent=method.getAnnotation(ActionEvent.class);
  if (actionEvent != null) {
    CallContext ctx=CallContext.current();
    long userId=ctx.getCallingUserId();
    long accountId=ctx.getCallingAccountId();
    long startEventId=ctx.getStartEventId();
    String eventDescription=actionEvent.eventDescription();
    if (ctx.getEventDetails() != null) {
      eventDescription+=". " + ctx.getEventDetails();
    }
    if (actionEvent.create()) {
      long eventId=ActionEventUtils.onCreatedActionEvent(userId,accountId,EventVO.LEVEL_ERROR,actionEvent.eventType(),"Error while creating entity for " + eventDescription);
      ctx.setStartEventId(eventId);
    }
 else {
      ActionEventUtils.onCompletedActionEvent(userId,accountId,EventVO.LEVEL_ERROR,actionEvent.eventType(),"Error while " + eventDescription,startEventId);
    }
  }
}
