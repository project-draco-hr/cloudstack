@attr(tags=['advanced', 'intervlan'])
def test_08_user_data(self):
    ' Test user data in virtual machines\n        '
    try:
        ssh = self.vm_1.get_ssh_client(ipaddress=self.public_ip_1.ipaddress.ipaddress, reconnect=True)
        self.debug('SSH into VM is successfully')
    except Exception as e:
        self.fail('Failed to SSH into instance')
    routers = Router.list(self.apiclient, zoneid=self.zone.id, listall=True)
    self.assertEqual(isinstance(routers, list), True, 'Check list response returns a valid list')
    router = routers[0]
    self.debug('check the userdata with that of present in router')
    try:
        cmds = [('wget http://%s/latest/user-data' % router.guestipaddress), 'cat user-data']
        for c in cmds:
            result = ssh.execute(c)
            self.debug(('%s: %s' % (c, result)))
    except Exception as e:
        self.fail(('Failed to SSH in Virtual machine: %s' % e))
    res = str(result)
    self.assertEqual(res.count(self.services['virtual_machine']['userdata']), 1, 'Verify user data from router')
    return
