{
  final TransactionLegacy txn=TransactionLegacy.currentTxn();
  txn.start();
  final DomainRouterVO newRouter=super.persist(router);
  if (guestNetworks != null && !guestNetworks.isEmpty()) {
    for (    final Network guestNetwork : guestNetworks) {
      addRouterToGuestNetwork(router,guestNetwork);
    }
  }
  txn.commit();
  return newRouter;
}
