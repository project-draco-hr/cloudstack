{
  boolean processed=false;
  for (  Command cmd : commands) {
    if (cmd instanceof PingCommand) {
      Transaction txn=Transaction.currentTxn();
      txn.transitToUserManagedConnection(_concierge.conn());
      try {
        HostVO host=_hostDao.findById(agentId);
        if (host == null) {
          if (s_logger.isDebugEnabled()) {
            s_logger.debug("Cant not find host " + agentId);
          }
        }
 else {
          _hostDao.updateStatus(host,Event.Ping,_msId);
        }
        processed=true;
      }
  finally {
        txn.transitToAutoManagedConnection(Transaction.CLOUD_DB);
      }
    }
  }
  return processed;
}
