{
  Pair<List<VolumeJoinVO>,Integer> result=searchForVolumesInternal(cmd);
  ListResponse<VolumeResponse> response=new ListResponse<VolumeResponse>();
  ResponseView respView=ResponseView.Restricted;
  if (cmd instanceof ListVolumesCmdByAdmin) {
    respView=ResponseView.Full;
  }
  List<VolumeResponse> volumeResponses=ViewResponseHelper.createVolumeResponse(respView,result.first().toArray(new VolumeJoinVO[result.first().size()]));
  response.setResponses(volumeResponses,result.second());
  return response;
}
