{
  String key=cmd.getKey();
  ResourceTag.TaggedResourceType resourceType=cmd.getResourceType();
  String resourceId=cmd.getResourceId();
  Long id=_taggedResourceMgr.getResourceId(resourceId,resourceType);
  List<ResourceDetailResponse> responseList=new ArrayList<ResourceDetailResponse>();
  List<? extends ResourceDetail> detailList=new ArrayList<ResourceDetail>();
  ResourceDetail requestedDetail=null;
  if (resourceType == ResourceTag.TaggedResourceType.Volume) {
    if (key == null) {
      detailList=_volumeDetailDao.findDetails(id);
    }
 else {
      requestedDetail=_volumeDetailDao.findDetail(id,key);
    }
  }
 else   if (resourceType == ResourceTag.TaggedResourceType.Nic) {
    if (key == null) {
      detailList=_nicDetailDao.findDetails(id);
    }
 else {
      requestedDetail=_nicDetailDao.findDetail(id,key);
    }
  }
 else   if (resourceType == ResourceTag.TaggedResourceType.UserVm) {
    if (key == null) {
      detailList=_userVmDetailDao.findDetailsList(id);
    }
 else {
      requestedDetail=_userVmDetailDao.findDetail(id,key);
    }
  }
 else   if (resourceType == ResourceTag.TaggedResourceType.Zone) {
    if (key == null) {
      detailList=_dcDetailsDao.findDetailsList(id);
    }
 else {
      requestedDetail=_dcDetailsDao.findDetail(id,key);
    }
  }
 else {
    throw new UnsupportedServiceException("Resource type " + resourceType + " is not supported by the cloudStack");
  }
  if (requestedDetail != null) {
    ResourceDetailResponse detailResponse=createResourceDetailsResponse(id,requestedDetail.getName(),requestedDetail.getValue(),resourceType);
    responseList.add(detailResponse);
  }
 else {
    for (    ResourceDetail detail : detailList) {
      ResourceDetailResponse detailResponse=createResourceDetailsResponse(id,detail.getName(),detail.getValue(),resourceType);
      responseList.add(detailResponse);
    }
  }
  return responseList;
}
