{
  String key=cmd.getKey();
  ResourceTag.TaggedResourceType resourceType=cmd.getResourceType();
  String resourceId=cmd.getResourceId();
  Long id=_taggedResourceMgr.getResourceId(resourceId,resourceType);
  if (resourceType == ResourceTag.TaggedResourceType.Volume) {
    List<VolumeDetailVO> volumeDetailList;
    if (key == null) {
      volumeDetailList=_volumeDetailDao.findDetails(id);
    }
 else {
      VolumeDetailVO volumeDetail=_volumeDetailDao.findDetail(id,key);
      volumeDetailList=new LinkedList<VolumeDetailVO>();
      volumeDetailList.add(volumeDetail);
    }
    List<ResourceDetailResponse> volumeDetailResponseList=new ArrayList<ResourceDetailResponse>();
    for (    VolumeDetailVO volumeDetail : volumeDetailList) {
      ResourceDetailResponse volumeDetailResponse=new ResourceDetailResponse();
      volumeDetailResponse.setResourceId(id.toString());
      volumeDetailResponse.setName(volumeDetail.getName());
      volumeDetailResponse.setValue(volumeDetail.getValue());
      volumeDetailResponse.setResourceType(ResourceTag.TaggedResourceType.Volume.toString());
      volumeDetailResponse.setObjectName("volumedetail");
      volumeDetailResponseList.add(volumeDetailResponse);
    }
    return volumeDetailResponseList;
  }
 else {
    List<NicDetailVO> nicDetailList;
    if (key == null) {
      nicDetailList=_nicDetailDao.findDetails(id);
    }
 else {
      NicDetailVO nicDetail=_nicDetailDao.findDetail(id,key);
      nicDetailList=new LinkedList<NicDetailVO>();
      nicDetailList.add(nicDetail);
    }
    List<ResourceDetailResponse> nicDetailResponseList=new ArrayList<ResourceDetailResponse>();
    for (    NicDetailVO nicDetail : nicDetailList) {
      ResourceDetailResponse nicDetailResponse=new ResourceDetailResponse();
      nicDetailResponse.setName(nicDetail.getName());
      nicDetailResponse.setValue(nicDetail.getValue());
      nicDetailResponse.setResourceType(ResourceTag.TaggedResourceType.Nic.toString());
      nicDetailResponse.setObjectName("nicdetail");
      nicDetailResponseList.add(nicDetailResponse);
    }
    return nicDetailResponseList;
  }
}
