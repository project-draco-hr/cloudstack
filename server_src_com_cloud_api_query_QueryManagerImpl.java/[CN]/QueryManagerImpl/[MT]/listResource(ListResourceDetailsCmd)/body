{
  String key=cmd.getKey();
  ResourceTag.ResourceObjectType resourceType=cmd.getResourceType();
  String resourceIdStr=cmd.getResourceId();
  long resourceId=_taggedResourceMgr.getResourceId(resourceIdStr,resourceType);
  List<? extends ResourceDetail> detailList=new ArrayList<ResourceDetail>();
  ResourceDetail requestedDetail=null;
  if (key == null) {
    detailList=_resourceMetaDataMgr.getDetails(resourceId,resourceType);
  }
 else {
    requestedDetail=_resourceMetaDataMgr.getDetail(resourceId,resourceType,key);
  }
  List<ResourceDetailResponse> responseList=new ArrayList<ResourceDetailResponse>();
  if (requestedDetail != null) {
    ResourceDetailResponse detailResponse=createResourceDetailsResponse(resourceId,requestedDetail.getName(),requestedDetail.getValue(),resourceType);
    responseList.add(detailResponse);
  }
 else {
    for (    ResourceDetail detail : detailList) {
      ResourceDetailResponse detailResponse=createResourceDetailsResponse(resourceId,detail.getName(),detail.getValue(),resourceType);
      responseList.add(detailResponse);
    }
  }
  return responseList;
}
