{
  String key=cmd.getKey();
  ResourceTag.TaggedResourceType resourceType=cmd.getResourceType();
  String resourceId=cmd.getResourceId();
  Long id=_taggedResourceMgr.getResourceId(resourceId,resourceType);
  List<ResourceDetailResponse> responseList=new ArrayList<ResourceDetailResponse>();
  if (resourceType == ResourceTag.TaggedResourceType.Volume) {
    List<VolumeDetailVO> detailList;
    if (key == null) {
      detailList=_volumeDetailDao.findDetails(id);
    }
 else {
      VolumeDetailVO volumeDetail=_volumeDetailDao.findDetail(id,key);
      detailList=new LinkedList<VolumeDetailVO>();
      detailList.add(volumeDetail);
    }
    for (    VolumeDetailVO detail : detailList) {
      ResourceDetailResponse detailResponse=createResourceDetailsResponse(id,detail.getName(),detail.getValue(),ResourceTag.TaggedResourceType.Volume);
      responseList.add(detailResponse);
    }
  }
 else   if (resourceType == ResourceTag.TaggedResourceType.Nic) {
    List<NicDetailVO> detailList;
    if (key == null) {
      detailList=_nicDetailDao.findDetails(id);
    }
 else {
      NicDetailVO nicDetail=_nicDetailDao.findDetail(id,key);
      detailList=new LinkedList<NicDetailVO>();
      detailList.add(nicDetail);
    }
    for (    NicDetailVO detail : detailList) {
      ResourceDetailResponse detailResponse=createResourceDetailsResponse(id,detail.getName(),detail.getValue(),ResourceTag.TaggedResourceType.Nic);
      responseList.add(detailResponse);
    }
  }
 else   if (resourceType == ResourceTag.TaggedResourceType.UserVm) {
    List<UserVmDetailVO> detailList;
    if (key == null) {
      detailList=_userVmDetailDao.findDetailsList(id);
    }
 else {
      UserVmDetailVO vmDetail=_userVmDetailDao.findDetail(id,key);
      detailList=new LinkedList<UserVmDetailVO>();
      detailList.add(vmDetail);
    }
    for (    UserVmDetailVO detail : detailList) {
      ResourceDetailResponse detailResponse=createResourceDetailsResponse(id,detail.getName(),detail.getValue(),ResourceTag.TaggedResourceType.UserVm);
      responseList.add(detailResponse);
    }
  }
 else   if (resourceType == ResourceTag.TaggedResourceType.Zone) {
    List<DcDetailVO> details;
    if (key == null) {
      details=_dcDetailsDao.findDetailsList(id);
    }
 else {
      DcDetailVO zoneDetail=_dcDetailsDao.findDetail(id,key);
      details=new LinkedList<DcDetailVO>();
      details.add(zoneDetail);
    }
    List<ResourceDetailResponse> dcDetailResponseList=new ArrayList<ResourceDetailResponse>();
    for (    DcDetailVO detail : details) {
      ResourceDetailResponse detailResponse=createResourceDetailsResponse(id,detail.getName(),detail.getValue(),ResourceTag.TaggedResourceType.Zone);
      responseList.add(detailResponse);
    }
  }
 else {
    throw new UnsupportedServiceException("Resource type " + resourceType + " is not supported by the cloudStack");
  }
  return responseList;
}
