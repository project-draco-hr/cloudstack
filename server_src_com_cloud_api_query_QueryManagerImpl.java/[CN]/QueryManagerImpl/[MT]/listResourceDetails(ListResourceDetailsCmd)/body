{
  String key=cmd.getKey();
  Boolean forDisplay=cmd.forDisplay();
  ResourceTag.ResourceObjectType resourceType=cmd.getResourceType();
  String resourceIdStr=cmd.getResourceId();
  Long resourceId=null;
  if (resourceIdStr != null) {
    resourceId=_taggedResourceMgr.getResourceId(resourceIdStr,resourceType);
  }
  List<? extends ResourceDetail> detailList=new ArrayList<ResourceDetail>();
  ResourceDetail requestedDetail=null;
  if (key == null) {
    detailList=_resourceMetaDataMgr.getDetailsList(resourceId,resourceType,forDisplay);
  }
 else {
    requestedDetail=_resourceMetaDataMgr.getDetail(resourceId,resourceType,key);
    if (forDisplay != null && requestedDetail.isDisplay() != forDisplay) {
      requestedDetail=null;
    }
  }
  List<ResourceDetailResponse> responseList=new ArrayList<ResourceDetailResponse>();
  if (requestedDetail != null) {
    ResourceDetailResponse detailResponse=createResourceDetailsResponse(requestedDetail,resourceType);
    responseList.add(detailResponse);
  }
 else {
    for (    ResourceDetail detail : detailList) {
      ResourceDetailResponse detailResponse=createResourceDetailsResponse(detail,resourceType);
      responseList.add(detailResponse);
    }
  }
  return responseList;
}
