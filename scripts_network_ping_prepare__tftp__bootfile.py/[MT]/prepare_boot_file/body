def prepare_boot_file():
    try:
        pxelinux = join(tftp_dir, 'pxelinux.cfg')
        if (exists(pxelinux) == False):
            makedirs(pxelinux)
        cfg_name = ('01-' + mac.replace(':', '-'))
        cfg_path = join(pxelinux, cfg_name)
        f = open(cfg_path, 'w')
        stuff = (template % (cifs_server, share, directory, image_to_restore, cifs_username, cifs_password))
        f.write(stuff)
        f.close()
        return 0
    except IOError as e:
        print e
        return 1
