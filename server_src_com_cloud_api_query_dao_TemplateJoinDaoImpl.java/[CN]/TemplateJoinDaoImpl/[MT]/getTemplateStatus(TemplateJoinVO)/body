{
  boolean isAdmin=false;
  Account caller=CallContext.current().getCallingAccount();
  if ((caller == null) || _accountService.isAdmin(caller.getType())) {
    isAdmin=true;
  }
  String templateStatus=null;
  if (isAdmin || caller.getId() == template.getAccountId()) {
    if (template.getDownloadState() != Status.DOWNLOADED) {
      templateStatus="Processing";
      if (template.getDownloadState() == VMTemplateHostVO.Status.DOWNLOAD_IN_PROGRESS) {
        if (template.getDownloadPercent() == 100) {
          templateStatus="Installing Template";
        }
 else {
          templateStatus=template.getDownloadPercent() + "% Downloaded";
        }
      }
 else {
        templateStatus=template.getErrorString();
      }
    }
 else     if (template.getDownloadState() == VMTemplateHostVO.Status.DOWNLOADED) {
      templateStatus="Download Complete";
    }
 else {
      templateStatus="Successfully Installed";
    }
  }
  return templateStatus;
}
