{
  Properties ipEventParams=new Properties();
  String ipAddress=null;
  boolean isSourceNat=false;
  UsageEventVO usageEvent=null;
  ipEventParams.load(new StringReader(event.getParameters()));
  ipAddress=ipEventParams.getProperty("address");
  if (ipAddress == null) {
    ipAddress=ipEventParams.getProperty("guestIPaddress");
    if (ipAddress == null) {
      return null;
    }
  }
  isSourceNat=Boolean.parseBoolean(ipEventParams.getProperty("sourceNat"));
  if (isSourceNat)   return null;
  if (EventTypes.EVENT_NET_IP_ASSIGN.equals(event.getType())) {
    long zoneId=Long.parseLong(ipEventParams.getProperty("dcId"));
    usageEvent=new UsageEventVO(EventTypes.EVENT_NET_IP_ASSIGN,event.getAccountId(),zoneId,0L,ipAddress,0L);
  }
 else   if (EventTypes.EVENT_NET_IP_RELEASE.equals(event.getType())) {
    if (!isSourceNat) {
      usageEvent=new UsageEventVO(EventTypes.EVENT_NET_IP_RELEASE,event.getAccountId(),0L,0L,ipAddress,0L);
    }
  }
  return usageEvent;
}
