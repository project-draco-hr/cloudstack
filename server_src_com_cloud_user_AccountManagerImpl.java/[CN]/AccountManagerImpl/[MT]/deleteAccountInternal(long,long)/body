{
  boolean result=false;
  try {
    List<UserVO> users=_userDao.listByAccount(accountId);
    for (    UserVO user : users) {
      _userDao.remove(user.getId());
    }
    result=_accountDao.remove(accountId);
    if (!result) {
      s_logger.error("Unable to delete account " + accountId);
      return false;
    }
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Remove account " + accountId);
    }
    AccountVO account=_accountDao.findByIdIncludingRemoved(accountId);
    deleteAccount(account);
    result=true;
    return result;
  }
 catch (  Exception e) {
    s_logger.error("exception deleting account: " + accountId,e);
    return false;
  }
 finally {
    String description="Account:" + accountId;
    if (result) {
      EventUtils.saveEvent(UserContext.current().getUserId(),accountId,EventVO.LEVEL_INFO,EventTypes.EVENT_ACCOUNT_DELETE,"Successfully deleted " + description,startEventId);
    }
 else {
      EventUtils.saveEvent(UserContext.current().getUserId(),accountId,EventVO.LEVEL_ERROR,EventTypes.EVENT_ACCOUNT_DELETE,"Error deleting " + description,startEventId);
    }
  }
}
