{
  long numToIncrement=(delta.length == 0) ? 1 : delta[0].longValue();
  if (m_resourceCountLock.lock(120)) {
    try {
      _resourceCountDao.updateAccountCount(accountId,type,true,numToIncrement);
      Account account=_accountDao.findByIdIncludingRemoved(accountId);
      Long domainId=account.getDomainId();
      while (domainId != null) {
        _resourceCountDao.updateDomainCount(domainId,type,true,numToIncrement);
        DomainVO domain=_domainDao.findById(domainId);
        domainId=domain.getParent();
      }
    }
  finally {
      m_resourceCountLock.unlock();
    }
  }
}
