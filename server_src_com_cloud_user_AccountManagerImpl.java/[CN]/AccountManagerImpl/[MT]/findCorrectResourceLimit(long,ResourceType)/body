{
  long max=-1;
  ResourceLimitVO limit=_resourceLimitDao.findByAccountIdAndType(accountId,type);
  if (limit != null) {
    max=limit.getMax().longValue();
  }
 else {
    try {
switch (type) {
case public_ip:
        max=Long.parseLong(_configDao.getValue(Config.DefaultMaxAccountPublicIPs.key()));
      break;
case snapshot:
    max=Long.parseLong(_configDao.getValue(Config.DefaultMaxAccountSnapshots.key()));
  break;
case template:
max=Long.parseLong(_configDao.getValue(Config.DefaultMaxAccountTemplates.key()));
break;
case user_vm:
max=Long.parseLong(_configDao.getValue(Config.DefaultMaxAccountUserVms.key()));
break;
case volume:
max=Long.parseLong(_configDao.getValue(Config.DefaultMaxAccountVolumes.key()));
break;
}
}
 catch (NumberFormatException nfe) {
s_logger.error("Invalid value is set for the default account limit.");
}
}
return max;
}
