{
  if (listProjectResourcesCriteria != null) {
    sc.addAnd("accountType",SearchCriteria.Op.EQ,Account.ACCOUNT_TYPE_PROJECT);
  }
  if (!permittedDomains.isEmpty()) {
    if (isRecursive) {
      for (int i=0; i < permittedDomains.size(); i++) {
        Domain domain=_domainDao.findById(permittedDomains.get(i));
        aclSc.addOr("domainPath" + i,SearchCriteria.Op.LIKE,domain.getPath() + "%");
      }
    }
 else {
      aclSc.addOr("domainIdIN",SearchCriteria.Op.IN,permittedDomains.toArray());
    }
  }
  if (!permittedAccounts.isEmpty()) {
    aclSc.addOr("accountIdIN",SearchCriteria.Op.IN,permittedAccounts.toArray());
  }
  if (!permittedResources.isEmpty()) {
    aclSc.addOr("idIn",SearchCriteria.Op.IN,permittedResources.toArray());
  }
  sc.addAnd("accountIdIn",SearchCriteria.Op.SC,aclSc);
}
