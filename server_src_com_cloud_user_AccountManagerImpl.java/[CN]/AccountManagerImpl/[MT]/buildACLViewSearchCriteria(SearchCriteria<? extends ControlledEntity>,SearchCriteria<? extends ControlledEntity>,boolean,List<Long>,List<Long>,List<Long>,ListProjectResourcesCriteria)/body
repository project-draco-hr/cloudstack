{
  if (listProjectResourcesCriteria != null) {
    if (listProjectResourcesCriteria == ListProjectResourcesCriteria.SkipProjectResources) {
      sc.addAnd("accountType",SearchCriteria.Op.NEQ,Account.ACCOUNT_TYPE_PROJECT);
    }
 else     if (listProjectResourcesCriteria == ListProjectResourcesCriteria.ListProjectResourcesOnly) {
      sc.addAnd("accountType",SearchCriteria.Op.EQ,Account.ACCOUNT_TYPE_PROJECT);
    }
  }
  if (permittedDomains.isEmpty() && permittedAccounts.isEmpty() && permittedResources.isEmpty())   return;
  if (!permittedDomains.isEmpty()) {
    if (isRecursive) {
      for (int i=0; i < permittedDomains.size(); i++) {
        Domain domain=_domainDao.findById(permittedDomains.get(i));
        aclSc.addOr("domainPath",SearchCriteria.Op.LIKE,domain.getPath() + "%");
      }
    }
 else {
      aclSc.addOr("domainId",SearchCriteria.Op.IN,permittedDomains.toArray());
    }
  }
  if (!permittedAccounts.isEmpty()) {
    aclSc.addOr("accountId",SearchCriteria.Op.IN,permittedAccounts.toArray());
  }
  if (!permittedResources.isEmpty()) {
    aclSc.addOr("id",SearchCriteria.Op.IN,permittedResources.toArray());
  }
  sc.addAnd("accountId",SearchCriteria.Op.SC,aclSc);
}
