{
  Long userId=cmd.getId();
  User user=getUserIncludingRemoved(userId);
  if (user == null) {
    throw new InvalidParameterValueException("unable to find user by id");
  }
  if (user.getId() == User.UID_SYSTEM) {
    throw new PermissionDeniedException("user id : " + user.getId() + " is system account, update is not allowed");
  }
  String[] keys=new String[2];
  Transaction txn=Transaction.currentTxn();
  txn.start();
  keys[0]=createUserApiKey(userId);
  keys[1]=createUserSecretKey(userId);
  txn.commit();
  return keys;
}
