{
  Map<String,HostVmStateReportEntry> states=new HashMap<String,HostVmStateReportEntry>();
  if (hostId != null) {
    vmDao=ComponentContext.getComponent(VMInstanceDao.class);
    final List<? extends VMInstanceVO> vms=vmDao.listByHostId(hostId);
    for (    VMInstanceVO vm : vms) {
      states.put(vm.getInstanceName(),new HostVmStateReportEntry(vm.getState() == State.Running ? PowerState.PowerOn : PowerState.PowerOff,"host-" + hostId,null));
    }
  }
  return states;
}
