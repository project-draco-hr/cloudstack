{
  NetworkVO networkObject=_networkDao.findById(profile.getId());
  if (networkObject.getBroadcastDomainType() != BroadcastDomainType.Lswitch || networkObject.getBroadcastUri() == null) {
    s_logger.warn("BroadcastUri is empty or incorrect for guestnetwork " + networkObject.getDisplayText());
    return;
  }
  List<BigSwitchVnsDeviceVO> devices=_bigswitchVnsDao.listByPhysicalNetwork(networkObject.getPhysicalNetworkId());
  if (devices.isEmpty()) {
    s_logger.error("No BigSwitch Controller on physical network " + networkObject.getPhysicalNetworkId());
    return;
  }
  BigSwitchVnsDeviceVO bigswitchVnsDevice=devices.get(0);
  HostVO bigswitchVnsHost=_hostDao.findById(bigswitchVnsDevice.getHostId());
  String tenantId=profile.getNetworkDomain();
  DeleteVnsNetworkCommand cmd=new DeleteVnsNetworkCommand(tenantId,BroadcastDomainType.getValue(networkObject.getBroadcastUri()));
  _agentMgr.easySend(bigswitchVnsHost.getId(),cmd);
  super.shutdown(profile,offering);
}
