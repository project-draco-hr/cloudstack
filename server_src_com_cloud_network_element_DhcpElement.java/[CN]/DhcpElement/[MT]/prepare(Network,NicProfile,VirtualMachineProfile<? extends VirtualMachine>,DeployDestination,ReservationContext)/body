{
  if (canHandle(config.getGuestType(),dest)) {
    if (config.getTrafficType() != TrafficType.Guest || vm.getType() != Type.User) {
      s_logger.trace("DHCP only cares about guest network and User VMs");
      return false;
    }
    if (vm.getType() != VirtualMachine.Type.User) {
      return false;
    }
    @SuppressWarnings("unchecked") VirtualMachineProfile<UserVm> uservm=(VirtualMachineProfile<UserVm>)vm;
    return _routerMgr.addVirtualMachineIntoNetwork(config,nic,uservm,dest,context,true) != null;
  }
 else {
    return false;
  }
}
