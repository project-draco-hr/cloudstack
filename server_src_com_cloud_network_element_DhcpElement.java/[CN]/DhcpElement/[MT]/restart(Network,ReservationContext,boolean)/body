{
  DataCenter dc=_configMgr.getZone(network.getDataCenterId());
  DeployDestination dest=new DeployDestination(dc,null,null,null);
  NetworkOffering offering=_configMgr.getNetworkOffering(network.getNetworkOfferingId());
  if (!canHandle(network.getGuestType(),dest,offering.getTrafficType())) {
    s_logger.trace("Dhcp element doesn't handle network restart for the network " + network);
    return false;
  }
  List<DomainRouterVO> routers=_routerDao.listByNetworkAndRole(network.getId(),Role.DHCP_USERDATA);
  if (routers == null || routers.isEmpty()) {
    s_logger.trace("Can't find dhcp element in network " + network.getId());
    return true;
  }
  Long host_id=new Long(0);
  for (  DomainRouterVO router : routers) {
    if (host_id == null || host_id == 0) {
      host_id=(router.getHostId() != null ? router.getHostId() : router.getLastHostId());
    }
    if (cleanup) {
      if (router.getState() != State.Stopped && _routerMgr.stopRouter(router.getId(),false) == null) {
        s_logger.warn("Failed to stop dhcp element " + router + " as a part of network "+ network+ " restart");
      }
      if (_routerMgr.destroyRouter(router.getId()) == null) {
        s_logger.warn("Failed to destroy dhcp element " + router + " as a part of network "+ network+ " restart");
      }
    }
  }
  if (host_id == null || host_id == 0) {
    throw new ResourceUnavailableException("Fail to locate dhcp element in network " + network.getId(),this.getClass(),0);
  }
  Cluster cluster=_configMgr.getCluster(_hostDao.findById(host_id).getClusterId());
  Pod pod=_configMgr.getPod(_hostDao.findById(host_id).getPodId());
  dest=new DeployDestination(dc,pod,cluster,null);
  return implement(network,offering,dest,context);
}
