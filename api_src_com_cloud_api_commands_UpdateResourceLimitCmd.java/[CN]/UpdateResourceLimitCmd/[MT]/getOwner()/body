{
  Long ownerId=null;
  ResourceOwnerType resourceOwnerType=null;
  if (domainId != null) {
    if (_domainService.getDomain(domainId) == null) {
      throw new InvalidParameterValueException("Unable to find domain by id=" + domainId);
    }
    if (accountName != null) {
      Account account=_accountService.getActiveAccountByName(accountName,domainId);
      if (account != null) {
        ownerId=account.getId();
        resourceOwnerType=ResourceOwnerType.Account;
      }
 else {
        throw new InvalidParameterValueException("Unable to find account by name " + accountName + " in domain id="+ domainId);
      }
    }
 else {
      ownerId=domainId;
      resourceOwnerType=ResourceOwnerType.Domain;
    }
  }
 else   if (projectId != null) {
    if (_projectService.getProject(projectId) == null) {
      throw new InvalidParameterValueException("Unable to find project by id " + projectId);
    }
    ownerId=projectId;
    resourceOwnerType=ResourceOwnerType.Domain;
  }
  if (ownerId == null) {
    throw new InvalidParameterValueException("Please specify projectId or domainId or domainId/accountName");
  }
  return new Pair<Long,ResourceOwnerType>(ownerId,resourceOwnerType);
}
