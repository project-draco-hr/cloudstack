{
  SearchBuilder<NetworkVO> searchBuilder=controller.getNetworkDao().createSearchBuilder();
  searchBuilder.and("trafficType",searchBuilder.entity().getTrafficType(),Op.EQ);
  searchBuilder.and("cidr",searchBuilder.entity().getCidr(),Op.EQ);
  searchBuilder.and("networkOfferingId",searchBuilder.entity().getNetworkOfferingId(),Op.EQ);
  SearchCriteria<NetworkVO> sc=searchBuilder.create();
  sc.setParameters("networkOfferingId",controller.getManager().getVpcRouterOffering().getId());
  sc.setParameters("cidr",cidr);
  sc.setParameters("trafficType",Networks.TrafficType.Guest);
  List<NetworkVO> dbNets=controller.getNetworkDao().search(sc,null);
  if (dbNets == null || dbNets.size() == 0) {
    return null;
  }
  if (dbNets.size() > 1) {
    s_logger.warn("more than one network found with cidr: " + cidr);
  }
  return dbNets.get(0);
}
