{
  final VirtualRouter router=userdata.getRouter();
  final Commands commands=new Commands(Command.OnError.Stop);
  final VirtualMachineProfile profile=userdata.getProfile();
  final NicVO nicVo=userdata.getNicVo();
  final UserVmVO userVM=userdata.getUserVM();
  final DeployDestination destination=userdata.getDestination();
  if (router.getPodIdToDeployIn().longValue() == destination.getPod().getId()) {
    userdata.createPasswordCommand(router,profile,nicVo,commands);
    userdata.createVmDataCommand(router,userVM,nicVo,userVM.getDetail("SSH.PublicKey"),commands);
    return _applianceManager.sendCommandsToRouter(router,commands);
  }
  return true;
}
