def soft_mount(mountpoint, remoteserver, remotepath, transport):
    "Mount the remote NFS export at 'mountpoint'"
    try:
        if (not util.ioretry((lambda : util.isdir(mountpoint)))):
            util.ioretry((lambda : util.makedirs(mountpoint)))
    except util.CommandException as inst:
        raise NfsException(('Failed to make directory: code is %d' % inst.code))
    options = ('soft,timeo=%d,retrans=%d,%s' % (SOFTMOUNT_TIMEOUT, SOFTMOUNT_RETRANS, transport))
    options += ',acdirmin=0,acdirmax=0'
    try:
        util.ioretry((lambda : util.pread(['mount.nfs', ('%s:%s' % (remoteserver, remotepath)), mountpoint, '-o', options])), errlist=[errno.EPIPE, errno.EIO], maxretry=2, nofail=True)
    except util.CommandException as inst:
        raise NfsException(('mount failed with return code %d' % inst.code))
