{
  List<QuotaTariffVO> result=new ArrayList<QuotaTariffVO>();
  Date effectiveDate=cmd.getEffectiveDate() == null ? new Date() : cmd.getEffectiveDate();
  Date adjustedEffectiveDate=_quotaService.computeAdjustedTime(effectiveDate);
  if (s_logger.isDebugEnabled()) {
    s_logger.debug("Effective datec=" + effectiveDate + " quotatype="+ cmd.getUsageType()+ " Adjusted date="+ adjustedEffectiveDate);
  }
  if (cmd.getUsageType() != null) {
    QuotaTariffVO tariffPlan=_quotaTariffDao.findTariffPlanByUsageType(cmd.getUsageType(),adjustedEffectiveDate);
    if (tariffPlan != null) {
      result.add(tariffPlan);
    }
  }
 else {
    result=_quotaTariffDao.listAllTariffPlans(adjustedEffectiveDate);
  }
  return result;
}
