{
  TransportAddress transportAddress=TransportAddress.fromAddressString(endpoint.getEndpointAddress());
  if (transportAddress == null)   return false;
  boolean found=false;
synchronized (this) {
    TransportEndpointSite endpointSite=_endpointMap.get(transportAddress.getEndpointId());
    if (endpointSite.getAddress().equals(transportAddress)) {
      found=true;
      _endpointMap.remove(transportAddress.getEndpointId());
    }
  }
  if (found) {
    endpoint.onDetachIndication(endpoint.getEndpointAddress());
    return true;
  }
  return false;
}
