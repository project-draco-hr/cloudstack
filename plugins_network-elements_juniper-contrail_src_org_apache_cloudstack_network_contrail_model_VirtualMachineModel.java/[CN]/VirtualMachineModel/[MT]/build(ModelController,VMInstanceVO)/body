{
  setProperties(controller,instance);
  UserVm userVm=controller.getVmDao().findById(instance.getId());
  if (userVm != null && userVm.getUserData() != null) {
    s_logger.debug("vm " + instance.getInstanceName() + " user data: "+ userVm.getUserData());
    final Gson json=new Gson();
    Map<String,String> kvmap=json.fromJson(userVm.getUserData(),new TypeToken<Map<String,String>>(){
    }
.getType());
    String data=kvmap.get("service-instance");
    if (data != null) {
      buildServiceInstance(controller,data);
    }
  }
}
