{
  try {
    String args="";
    if (add) {
      args+=" -A ";
    }
 else {
      args+=" -D ";
    }
    args+=" -l ";
    args+=pubIP;
    args+=" -c ";
    args+=nicname;
    args+=" -g ";
    args+=gateway;
    args+=" -m ";
    args+=netmask;
    args+=" -n ";
    args+=subnet;
    String result=routerProxy("vpc_ipassoc.sh",routerIP,args);
    if (result != null) {
      throw new InternalErrorException("KVM plugin \"vpc_ipassoc\" failed:" + result);
    }
  }
 catch (  Exception e) {
    String msg="Unable to assign public IP address due to " + e.toString();
    s_logger.warn(msg,e);
    throw new Exception(msg);
  }
}
