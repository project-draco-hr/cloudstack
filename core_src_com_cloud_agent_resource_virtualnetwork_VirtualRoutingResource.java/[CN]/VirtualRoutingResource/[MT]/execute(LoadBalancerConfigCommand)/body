{
  String routerIp=cmd.getAccessDetail(NetworkElementCommand.ROUTER_IP);
  if (routerIp == null) {
    return new Answer(cmd);
  }
  LoadBalancerConfigurator cfgtr=new HAProxyConfigurator();
  String[] config=cfgtr.generateConfiguration(cmd);
  String tmpCfgFileContents="";
  for (int i=0; i < config.length; i++) {
    tmpCfgFileContents+=config[i];
    tmpCfgFileContents+="\n";
  }
  String tmpCfgFilePath="/etc/haproxy/";
  String tmpCfgFileName="haproxy.cfg.new";
  ExecutionResult result=_vrDeployer.createFileInVR(cmd.getRouterAccessIp(),tmpCfgFilePath,tmpCfgFileName,tmpCfgFileContents);
  if (!result.isSuccess()) {
    return new Answer(cmd,false,"Fail to copy LB config file to VR");
  }
  List<ConfigItem> cfg=generateConfig(cmd);
  ConfigItem c=cfg.get(0);
  result=_vrDeployer.executeInVR(cmd.getRouterAccessIp(),c.getScript(),c.getArgs());
  return new Answer(cmd,result.isSuccess(),result.getDetails());
}
