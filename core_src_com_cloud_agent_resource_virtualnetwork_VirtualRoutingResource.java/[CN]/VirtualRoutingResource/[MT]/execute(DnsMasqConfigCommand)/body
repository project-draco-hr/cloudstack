{
  final Script command=new Script(_callDnsMasqPath,_timeout,s_logger);
  String routerIp=cmd.getAccessDetail(NetworkElementCommand.ROUTER_IP);
  DnsMasqConfigurator configurator=new DnsMasqConfigurator();
  String[] config=configurator.generateConfiguration(cmd);
  String cfgFileName=routerIp.replace(".","-") + "dns.cgf";
  String tmpCfgFileContents="";
  for (int i=0; i < config.length; i++) {
    tmpCfgFileContents+=config[i];
    tmpCfgFileContents+="\n";
  }
  File permKey=new File("/root/.ssh/id_rsa.cloud");
  String cfgFilePath="/tmp/" + cfgFileName;
  try {
    SshHelper.scpTo(routerIp,3922,"root",permKey,null,"/tmp/",tmpCfgFileContents.getBytes(),cfgFileName,null);
    command.add(routerIp);
    command.add(cfgFilePath);
    final String result=command.execute();
    return new Answer(cmd,result == null,result);
  }
 catch (  Exception e) {
    return new Answer(cmd,false,e.getMessage());
  }
}
