{
  UserContext.current().setEventDetails(" Id: " + cmd.getId());
  Account caller=UserContext.current().getCaller();
  Long id=cmd.getId();
  Site2SiteCustomerGateway customerGateway=_customerGatewayDao.findById(id);
  if (customerGateway == null) {
    throw new InvalidParameterValueException("Fail to find customer gateway with " + id + " !");
  }
  _accountMgr.checkAccess(caller,null,false,customerGateway);
  List<Site2SiteVpnConnectionVO> vpnConnections=_vpnConnectionDao.listByCustomerGatewayId(id);
  if (vpnConnections != null && vpnConnections.size() != 0) {
    throw new InvalidParameterValueException("Unable to delete VPN customer gateway " + id + " because there is still related VPN connections!");
  }
  _customerGatewayDao.remove(id);
  return true;
}
