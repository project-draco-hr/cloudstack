{
  Long customerGatewayId=cmd.getCustomerGatewayId();
  Site2SiteCustomerGateway customerGateway=_customerGatewayDao.findById(customerGatewayId);
  Long vpnGatewayId=cmd.getVpnGatewayId();
  Site2SiteVpnGateway vpnGateway=_vpnGatewayDao.findById(vpnGatewayId);
  if (_vpnConnectionDao.findByCustomerGatewayId(customerGatewayId) != null || _vpnConnectionDao.findByVpnGatewayId(vpnGatewayId) != null) {
    throw new InvalidParameterValueException("The vpn connection with customer gateway id " + customerGatewayId + " or vpn gateway id "+ vpnGatewayId+ " already existed!");
  }
  Site2SiteVpnConnectionVO conn=new Site2SiteVpnConnectionVO(vpnGatewayId,customerGatewayId);
  _vpnConnectionDao.persist(conn);
  return conn;
}
