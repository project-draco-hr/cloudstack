{
  StringBuffer sb=new StringBuffer();
  List<Object> params=new ArrayList<Object>();
  SearchBuilder<SObjectVO> SearchByBucket=createSearchBuilder();
  List<SObjectVO> objects=new ArrayList<SObjectVO>();
  SearchByBucket.and("SBucketID",SearchByBucket.entity().getBucketID(),SearchCriteria.Op.EQ);
  SearchByBucket.and("DeletionMark",SearchByBucket.entity().getDeletionMark(),SearchCriteria.Op.NULL);
  Transaction txn=Transaction.currentTxn();
  try {
    txn.start();
    SearchCriteria<SObjectVO> sc=SearchByBucket.create();
    sc.setParameters("SBucketID",bucket.getId());
    objects=listBy(sc);
    for (    SObjectVO sObjectVO : objects) {
      Set<SObjectItemVO> items=new HashSet<SObjectItemVO>(itemDao.getItems(sObjectVO.getId()));
      sObjectVO.setItems(items);
    }
    return objects;
  }
  finally {
    txn.close();
  }
}
