{
  if (cmd instanceof StartupRoutingCommand) {
    StartupRoutingCommand scCmd=(StartupRoutingCommand)cmd;
    if (scCmd.getHypervisorType() == Hypervisor.Type.XenServer || scCmd.getHypervisorType() == Hypervisor.Type.KVM || scCmd.getHypervisorType() == Hypervisor.Type.VmWare) {
      List<StoragePoolVO> pools=_poolDao.listBy(host.getDataCenterId(),host.getPodId(),host.getClusterId());
      for (      StoragePoolVO pool : pools) {
        Long hostId=host.getId();
        s_logger.debug("Host " + hostId + " connected, sending down storage pool information ...");
        if (_storageManager.addPoolToHost(hostId,pool)) {
          _storageManager.createCapacityEntry(pool);
        }
      }
    }
  }
  return true;
}
