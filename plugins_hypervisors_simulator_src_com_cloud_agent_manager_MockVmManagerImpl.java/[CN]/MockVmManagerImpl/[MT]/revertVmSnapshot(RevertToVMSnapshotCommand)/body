{
  String vm=cmd.getVmName();
  String snapshot=cmd.getTarget().getSnapshotName();
  MockVMVO vmVo=_mockVmDao.findByVmName(cmd.getVmName());
  if (vmVo == null) {
    return new RevertToVMSnapshotAnswer(cmd,false,"No VM by name " + cmd.getVmName());
  }
  s_logger.debug("Reverted to snapshot " + snapshot + " of VM "+ vm);
  return new RevertToVMSnapshotAnswer(cmd,cmd.getVolumeTOs(),vmVo.getState() == State.Running ? PowerState.PowerOn : PowerState.PowerOff);
}
