{
  Transaction txn=Transaction.open(Transaction.SIMULATOR_DB);
  try {
    txn.start();
    List<MockVMVO> vms=_mockVmDao.findByHostGuid(hostGuid);
    Map<String,MockVMVO> vmMap=new HashMap<String,MockVMVO>();
    for (    MockVMVO vm : vms) {
      vmMap.put(vm.getName(),vm);
    }
    txn.commit();
    return vmMap;
  }
 catch (  Exception ex) {
    txn.rollback();
    throw new CloudRuntimeException("unable to fetch vms  from host " + hostGuid,ex);
  }
 finally {
    txn.close();
    txn=Transaction.open(Transaction.CLOUD_DB);
    txn.close();
  }
}
