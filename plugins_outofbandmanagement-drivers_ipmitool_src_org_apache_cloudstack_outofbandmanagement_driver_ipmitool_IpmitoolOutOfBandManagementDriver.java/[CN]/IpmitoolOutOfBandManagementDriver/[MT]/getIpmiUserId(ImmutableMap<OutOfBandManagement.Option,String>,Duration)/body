{
  final String username=options.get(OutOfBandManagement.Option.USERNAME);
  if (Strings.isNullOrEmpty(username)) {
    throw new CloudRuntimeException("Empty IPMI user configured, cannot proceed to find user's ID");
  }
  final List<String> ipmiToolCommands=IPMITOOL.getIpmiToolCommandArgs(IpmiToolPath.value(),IpmiToolInterface.value(),IpmiToolRetries.value(),options,"user","list");
  final OutOfBandManagementDriverResponse output=IPMITOOL.executeCommands(ipmiToolCommands,timeOut);
  if (!output.isSuccess()) {
    throw new CloudRuntimeException("Failed to find IPMI user to change password, error: " + output.getError());
  }
  final String userId=IPMITOOL.findIpmiUser(output.getResult(),username);
  if (Strings.isNullOrEmpty(userId)) {
    throw new CloudRuntimeException("No IPMI user ID found for the username: " + username);
  }
  return userId;
}
