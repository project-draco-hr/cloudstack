{
  String vmName=cmd.getVmName();
synchronized (this._vmstates) {
    this._vmstates.put(vmName,State.Starting);
  }
  try {
    Xen xen=new Xen(c);
    Xen.Vm vm=xen.getRunningVmConfig(vmName);
    xen.rebootVm(_ovmObject.deDash(vm.getVmRootDiskPoolId()),vm.getVmUuid());
    vm=xen.getRunningVmConfig(vmName);
    Integer vncPort=vm.getVncPort();
    return new RebootAnswer(cmd,null,vncPort);
  }
 catch (  Exception e) {
    s_logger.debug("Reboot " + vmName + " failed",e);
    return new RebootAnswer(cmd,e.getMessage(),false);
  }
 finally {
synchronized (this._vmstates) {
      this._vmstates.put(cmd.getVmName(),State.Running);
    }
  }
}
