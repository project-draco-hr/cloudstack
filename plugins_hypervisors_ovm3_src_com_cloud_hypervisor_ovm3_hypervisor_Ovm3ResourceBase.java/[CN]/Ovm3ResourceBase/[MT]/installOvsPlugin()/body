{
  try {
    com.trilead.ssh2.Connection sshConnection=SSHCmdHelper.acquireAuthorizedConnection(_ip,_username,_password);
    if (sshConnection == null) {
      throw new ConfigurationException(String.format("Unable to " + "connect to server(IP=%1$s, username=%2$s, " + "password=%3$s",_ip,_username,_password));
    }
    SCPClient scp=new SCPClient(sshConnection);
    String userDataScript="scripts/vm/hypervisor/ovm3/cloudstack.py";
    String userDataScriptPath=Script.findScript("",userDataScript);
    if (userDataScriptPath == null) {
      throw new ConfigurationException("Can not find " + userDataScript);
    }
    scp.put(userDataScriptPath,"","0755");
    String prepareCmd=String.format("./cloudstack.py " + "--ssl=" + this._agentSsl + " "+ "--port="+ this._agentPort);
    if (!SSHCmdHelper.sshExecuteCmd(sshConnection,prepareCmd)) {
      throw new ConfigurationException("Module insertion at " + _host + " failed");
    }
  }
 catch (  Exception es) {
    s_logger.error("Unexpected exception ",es);
    String msg="Unable to install module in agent";
    s_logger.error(msg);
    throw new CloudRuntimeException(msg);
  }
}
