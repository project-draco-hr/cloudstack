{
  String vmName=cmd.getName();
  String privateIp=cmd.getIp();
  int cmdPort=cmd.getPort();
  int interval=cmd.getInterval();
  int retries=cmd.getRetries();
  if (s_logger.isDebugEnabled()) {
    s_logger.debug("Trying port " + privateIp + ":"+ cmdPort);
  }
  try {
    CloudStackPlugin cSp=new CloudStackPlugin(c);
    if (!cSp.domrCheckPort(privateIp,cmdPort,retries,interval)) {
      s_logger.info(vmName + ":" + cmdPort+ " nok");
      return new CheckSshAnswer(cmd,"unable to connect");
    }
    s_logger.info(vmName + ":" + cmdPort+ " ok");
  }
 catch (  Exception e) {
    s_logger.error("Can not reach port on System vm " + vmName + " due to exception",e);
    return new CheckSshAnswer(cmd,e);
  }
  if (s_logger.isDebugEnabled()) {
    s_logger.debug("Ping command port succeeded for vm " + vmName + " "+ cmd);
  }
  if (VirtualMachineName.isValidRouterName(vmName)) {
    if (s_logger.isDebugEnabled()) {
      s_logger.debug("Execute network usage setup command on " + vmName);
    }
  }
  return new CheckSshAnswer(cmd);
}
