{
  NicTO[] nics=spec.getNics();
  for (  NicTO nic : nics) {
    if (nic.isSecurityGroupEnabled()) {
      if (spec.getType().equals(VirtualMachine.Type.User)) {
      }
    }
    try {
      if (getNetwork(nic) != null)       vm.addVif(nic.getDeviceId(),getNetwork(nic),nic.getMac());
    }
 catch (    Exception e) {
      String msg="Unable to add vif " + nic.getType() + " for "+ spec.getName()+ " "+ e.getMessage();
      s_logger.debug(msg);
      throw new CloudRuntimeException(msg);
    }
  }
  vm.setupVifs();
  return true;
}
