{
  SearchCriteriaService<TemplatePrimaryDataStoreVO,TemplatePrimaryDataStoreVO> sc=SearchCriteria2.create(TemplatePrimaryDataStoreVO.class);
  sc.addAnd(sc.getEntity().getTemplateId(),Op.EQ,template.getId());
  sc.addAnd(sc.getEntity().getPoolId(),Op.EQ,dataStore.getId());
  sc.addAnd(sc.getEntity().getDownloadState(),Op.EQ,VMTemplateStorageResourceAssoc.Status.DOWNLOADED);
  TemplatePrimaryDataStoreVO templateStoreVO=sc.find();
  if (templateStoreVO == null) {
    return null;
  }
  TemplateOnPrimaryDataStoreObject templateStoreObject=new TemplateOnPrimaryDataStoreObject(dataStore,template,templateStoreVO,templateStoreDao,this);
  return templateStoreObject;
}
