{
  parentDir=(String)params.get("template.parent");
  if (parentDir == null) {
    throw new ConfigurationException("Unable to find the parent root for the templates");
  }
  String value=(String)params.get("public.templates.root.dir");
  if (value == null) {
    value=TemplateConstants.DEFAULT_TMPLT_ROOT_DIR;
  }
  if (value.startsWith(File.separator)) {
    publicTemplateRepo=value;
  }
 else {
    publicTemplateRepo=parentDir + File.separator + value;
  }
  if (!publicTemplateRepo.endsWith(File.separator)) {
    publicTemplateRepo+=File.separator;
  }
  publicTemplateRepo+=TemplateConstants.DEFAULT_TMPLT_FIRST_LEVEL_DIR;
  if (!_storage.mkdirs(publicTemplateRepo)) {
    throw new ConfigurationException("Unable to create public templates directory");
  }
}
