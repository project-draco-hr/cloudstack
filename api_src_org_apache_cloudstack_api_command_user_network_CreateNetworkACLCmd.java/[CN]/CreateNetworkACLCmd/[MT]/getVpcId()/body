{
  Long vpcId=null;
  if (getACLId() != null) {
    NetworkACL acl=_networkACLService.getNetworkACL(getACLId());
    if (acl == null) {
      throw new InvalidParameterValueException("Invalid aclId is given");
    }
    vpcId=acl.getVpcId();
  }
 else   if (getNetworkId() != null) {
    Network network=_networkService.getNetwork(getNetworkId());
    if (network == null) {
      throw new InvalidParameterValueException("Invalid networkId is given");
    }
    vpcId=network.getVpcId();
  }
  if (vpcId == null) {
    throw new InvalidParameterValueException("Can create network ACL only for the ACL belonging to the VPC");
  }
  return vpcId;
}
