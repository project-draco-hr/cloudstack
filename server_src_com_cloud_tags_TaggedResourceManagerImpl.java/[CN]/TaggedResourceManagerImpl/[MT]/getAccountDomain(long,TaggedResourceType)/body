{
  Pair<Long,Long> pair=null;
  GenericDao<?,Long> dao=_daoMap.get(resourceType);
  Class<?> claz=DbUtil.getEntityBeanType(dao);
  while (claz != null && claz != Object.class) {
    try {
      String tableName=DbUtil.getTableName(claz);
      if (tableName == null) {
        throw new InvalidParameterValueException("Unable to find resource of type " + resourceType + " in the database");
      }
      pair=_identityDao.getAccountDomainInfo(tableName,resourceId);
      if (pair.first() != null || pair.second() != null) {
        break;
      }
    }
 catch (    Exception ex) {
    }
    claz=claz.getSuperclass();
  }
  Long accountId=pair.first();
  Long domainId=pair.second();
  if (accountId == null) {
    accountId=Account.ACCOUNT_ID_SYSTEM;
  }
  if (domainId == null) {
    domainId=Domain.ROOT_DOMAIN;
  }
  return new Pair<Long,Long>(accountId,domainId);
}
