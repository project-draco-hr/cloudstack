{
  if (!_isEnabled) {
    return;
  }
switch (vmState) {
case Destroyed:
case Error:
case Migrating:
case Expunging:
case Starting:
case Unknown:
    return;
case Running:
  handleVmStateChange(instance,false);
break;
case Stopping:
case Stopped:
checkAndRemove(instance);
handleVmStateChange(instance,true);
break;
}
}
