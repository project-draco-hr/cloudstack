{
  if (!_isEnabled || !status || (vm.getType() != VirtualMachine.Type.User && vm.getType() != VirtualMachine.Type.DomainRouter)) {
    return false;
  }
  if (VirtualMachine.State.isVmStopped(oldState,event,newState)) {
    _mgr.handleVmStateTransition((VMInstanceVO)vm,State.Stopped);
  }
  return true;
}
