{
  HashMap<String,HostVmStateReportEntry> report=new HashMap<String,HostVmStateReportEntry>();
  Map<String,State> states=_simMgr.getVmStates(this.hostGuid);
  for (  String vmName : states.keySet()) {
    State state=states.get(vmName);
    if (state == State.Running) {
      report.put(vmName,new HostVmStateReportEntry(PowerState.PowerOn,agentHost.getName()));
    }
 else     if (state == State.Stopped) {
      report.put(vmName,new HostVmStateReportEntry(PowerState.PowerOff,agentHost.getName()));
    }
 else {
      report.put(vmName,new HostVmStateReportEntry(PowerState.PowerUnknown,agentHost.getName()));
    }
  }
  return report;
}
