def performVPCTests(self, vpc_off):
    self.logger.debug(('Creating VPCs with  offering ID %s' % vpc_off.id))
    vpc_1 = self.createVPC(vpc_off, cidr='10.0.1.0/24')
    vpc_2 = self.createVPC(vpc_off, cidr='10.0.2.0/24')
    self.cleanup = [vpc_1, vpc_2, vpc_off, self.account]
    physical_networks = get_physical_networks(self.apiclient, self.zone.id)
    if (not physical_networks):
        self.fail('No Physical Networks found!')
    vlans = physical_networks[0].vlan.split('-')
    vlan_1 = int(vlans[0])
    network_1 = self.createNetwork(vpc_1, gateway='10.0.1.1')
    network_2 = self.createNetwork(vpc_2, gateway='10.0.2.1')
    vm1 = self.createVM(network_1)
    vm2 = self.createVM(network_2)
    self.cleanup.insert(0, vm1)
    self.cleanup.insert(0, vm2)
    acl1 = self.createACL(vpc_1)
    self.createACLItem(acl1.id, cidr='0.0.0.0/0')
    privateGw_1 = self.createPvtGw(vpc_1, '10.0.3.100', '10.0.3.101', acl1.id, vlan_1)
    self.replacePvtGwACL(acl1.id, privateGw_1.id)
    acl2 = self.createACL(vpc_2)
    self.createACLItem(acl2.id, cidr='0.0.0.0/0')
    privateGw_2 = self.createPvtGw(vpc_2, '10.0.3.101', '10.0.3.100', acl2.id, vlan_1)
    self.replacePvtGwACL(acl2.id, privateGw_2.id)
    self.replaceNetworkAcl(acl1.id, network_1)
    self.replaceNetworkAcl(acl2.id, network_2)
    staticRoute_1 = self.createStaticRoute(privateGw_1.id, cidr='10.0.2.0/24')
    staticRoute_2 = self.createStaticRoute(privateGw_2.id, cidr='10.0.1.0/24')
    public_ip_1 = self.acquire_publicip(vpc_1, network_1)
    public_ip_2 = self.acquire_publicip(vpc_2, network_2)
    nat_rule_1 = self.create_natrule(vpc_1, vm1, public_ip_1, network_1)
    nat_rule_2 = self.create_natrule(vpc_2, vm2, public_ip_2, network_2)
    self.check_pvt_gw_connectivity(vm1, public_ip_1, vm2.nic[0].ipaddress)
    self.check_pvt_gw_connectivity(vm2, public_ip_2, vm1.nic[0].ipaddress)
