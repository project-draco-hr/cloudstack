{
  HostVO fromHost=_hostDao.findById(proxy.getId());
  if (!_consoleProxyDao.updateIf(proxy,Event.MigrationRequested,proxy.getHostId())) {
    s_logger.debug("State for " + proxy.toString() + " has changed so migration can not take place.");
    return false;
  }
  MigrateCommand cmd=new MigrateCommand(proxy.getInstanceName(),host.getPrivateIpAddress(),false);
  Answer answer=_agentMgr.easySend(fromHost.getId(),cmd);
  if (answer == null) {
    return false;
  }
  _storageMgr.unshare(proxy,fromHost);
  return true;
}
