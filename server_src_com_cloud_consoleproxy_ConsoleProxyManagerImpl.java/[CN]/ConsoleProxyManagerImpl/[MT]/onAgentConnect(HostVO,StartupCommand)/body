{
  if (host.getType() == Type.ConsoleProxy) {
    if (s_logger.isInfoEnabled()) {
      s_logger.info("Console proxy agent is connected. proxy: " + host.getName());
    }
    if (_IpAllocator != null && _IpAllocator.exteralIpAddressAllocatorEnabled()) {
      try {
        ConsoleProxyVO console=findConsoleProxyByHost(host);
        if (console == null) {
          s_logger.debug("Can't find console proxy ");
          return;
        }
        console.setPrivateIpAddress(cmd.getPrivateIpAddress());
        console.setPrivateNetmask(cmd.getPrivateNetmask());
        console.setPublicIpAddress(cmd.getPublicIpAddress());
        console.setPublicNetmask(cmd.getPublicNetmask());
        _consoleProxyDao.persist(console);
      }
 catch (      NumberFormatException e) {
      }
    }
  }
}
