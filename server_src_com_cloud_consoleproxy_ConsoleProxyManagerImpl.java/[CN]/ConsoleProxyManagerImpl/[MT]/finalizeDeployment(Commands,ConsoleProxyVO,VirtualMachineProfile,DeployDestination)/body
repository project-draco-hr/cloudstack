{
  Start2Command cmd=cmds.getCommand(Start2Command.class);
  VirtualMachineTO vm=cmd.getVirtualMachine();
  StringBuilder buf=new StringBuilder();
  buf.append(" template=domP type=consoleproxy");
  buf.append(" host=").append(_mgmt_host);
  buf.append(" port=").append(_mgmt_port);
  buf.append(" name=").append(vm.getName());
  if (_sslEnabled) {
    buf.append(" premium=true");
  }
  buf.append(" zone=").append(dest.getDataCenter().getId());
  buf.append(" pod=").append(dest.getPod().getId());
  buf.append(" guid=Proxy.").append(vm.getId());
  buf.append(" proxy_vm=").append(vm.getId());
  NicTO controlNic=null;
  for (  NicTO nic : vm.getNics()) {
    int deviceId=nic.getDeviceId();
    buf.append(" eth").append(deviceId).append("ip=").append(nic.getIp());
    buf.append(" eth").append(deviceId).append("mask=").append(nic.getNetmask());
    if (nic.isDefaultNic()) {
      buf.append(" gateway=").append(nic.getGateway());
      buf.append(" dns1=").append(nic.getDns1());
      if (nic.getDns2() != null) {
        buf.append(" dns2=").append(nic.getDns2());
      }
    }
    if (nic.getType() == TrafficType.Management) {
      buf.append(" localgw=").append(dest.getPod().getGateway());
    }
 else     if (nic.getType() == TrafficType.Control) {
      controlNic=nic;
    }
  }
  String bootArgs=buf.toString();
  if (s_logger.isDebugEnabled()) {
    s_logger.debug("Boot Args for " + vm + ": "+ bootArgs);
  }
  vm.setBootArgs(bootArgs);
  if (controlNic == null) {
    throw new CloudRuntimeException("Didn't start a control port");
  }
  SshMonitor monitor=new SshMonitor(controlNic.getIp(),3922);
  vm.setMonitor(monitor);
  return true;
}
