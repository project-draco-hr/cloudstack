{
  AsyncJobExecutor asyncExecutor=BaseAsyncJobExecutor.getCurrentExecutor();
  if (asyncExecutor != null) {
    AsyncJobVO job=asyncExecutor.getJob();
    if (s_logger.isInfoEnabled())     s_logger.info("Stop console proxy " + proxyVmId + ", update async job-"+ job.getId());
    _asyncMgr.updateAsyncJobAttachment(job.getId(),"console_proxy",proxyVmId);
  }
  ConsoleProxyVO proxy=_consoleProxyDao.findById(proxyVmId);
  if (proxy == null) {
    if (s_logger.isDebugEnabled())     s_logger.debug("Stopping console proxy failed: console proxy " + proxyVmId + " no longer exists");
    return false;
  }
  try {
    return stop(proxy,startEventId);
  }
 catch (  AgentUnavailableException e) {
    if (s_logger.isDebugEnabled())     s_logger.debug("Stopping console proxy " + proxy.getName() + " failed : exception "+ e.toString());
    return false;
  }
}
