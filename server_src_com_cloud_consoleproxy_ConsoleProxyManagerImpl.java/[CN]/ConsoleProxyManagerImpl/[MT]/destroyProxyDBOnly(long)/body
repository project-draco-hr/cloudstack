{
  Transaction txn=Transaction.currentTxn();
  try {
    txn.start();
    _volsDao.deleteVolumesByInstance(vmId);
    ConsoleProxyVO proxy=_consoleProxyDao.findById(vmId);
    if (proxy != null) {
      if (proxy.getPublicIpAddress() != null) {
      }
      _consoleProxyDao.remove(vmId);
    }
    txn.commit();
    return true;
  }
 catch (  Exception e) {
    s_logger.error("Caught this error: ",e);
    txn.rollback();
    return false;
  }
 finally {
    s_logger.debug("console proxy vm is destroyed from DB : " + vmId);
  }
}
