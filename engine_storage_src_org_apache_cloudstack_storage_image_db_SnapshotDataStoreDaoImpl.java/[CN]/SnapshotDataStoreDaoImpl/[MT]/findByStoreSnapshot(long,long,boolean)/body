{
  SearchCriteria<SnapshotDataStoreVO> sc=storeSnapshotSearch.create();
  sc.setParameters("store_id",storeId);
  sc.setParameters("snapshot_id",snapshotId);
  sc.setParameters("destroyed",false);
  if (!lock)   return findOneIncludingRemovedBy(sc);
 else   return lockOneRandomRow(sc,true);
}
