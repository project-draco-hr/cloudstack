{
  Transaction txn=Transaction.currentTxn();
  txn.start();
  srcVolume.setReservationId(reservationId);
  srcVolume=_volumeMgr.processEvent(srcVolume,Volume.Event.CopyRequested);
  Volume destVolume=_volumeMgr.allocateDuplicateVolume(srcVolume);
  destVolume=_volumeMgr.processEvent(destVolume,Volume.Event.CreateRequested);
  txn.commit();
  DataStore srcStore=_storageProviderMgr.getDataStore(srcVolume.getPoolId());
  VolumeStrategy vs=srcStore.getVolumeStrategy();
  vs.migrateVolume(srcVolume,destVolume,destStore);
  txn.start();
  srcVolume=_volumeMgr.processEvent(srcVolume,Volume.Event.OperationSucceeded);
  destVolume=_volumeMgr.processEvent(destVolume,Volume.Event.OperationSucceeded);
  txn.commit();
  srcVolume=_volumeMgr.processEvent(srcVolume,Volume.Event.DestroyRequested);
  vs.deleteVolume(srcVolume);
  _volumeMgr.processEvent(srcVolume,Volume.Event.OperationSucceeded);
  return destVolume;
}
