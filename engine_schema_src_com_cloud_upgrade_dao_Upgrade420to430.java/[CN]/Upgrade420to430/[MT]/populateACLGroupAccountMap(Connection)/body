{
  PreparedStatement acctInsert=null;
  PreparedStatement acctQuery=null;
  ResultSet rs=null;
  s_logger.debug("Populating acl_group_account_map table for existing accounts...");
  try {
    acctInsert=conn.prepareStatement("INSERT INTO `cloud`.`acl_group_account_map` (group_id, account_id) values(?, ?)");
    acctQuery=conn.prepareStatement("select id, type from `cloud`.`account` where removed is null");
    rs=acctQuery.executeQuery();
    while (rs.next()) {
      Long acct_id=rs.getLong("id");
      short type=rs.getShort("type");
      acctInsert.setLong(1,type + 1);
      acctInsert.setLong(2,acct_id);
      acctInsert.executeUpdate();
    }
  }
 catch (  SQLException e) {
    String msg="Unable to populate acl_group_account_map for existing accounts." + e.getMessage();
    s_logger.error(msg);
    throw new CloudRuntimeException(msg,e);
  }
 finally {
    try {
      if (rs != null) {
        rs.close();
      }
      if (acctInsert != null) {
        acctInsert.close();
      }
      if (acctQuery != null) {
        acctQuery.close();
      }
    }
 catch (    SQLException e) {
    }
  }
  s_logger.debug("Completed populate acl_group_account_map for existing accounts.");
}
