{
  assert(subject != null);
  assert(subscriber != null);
  if (_gate.enter()) {
    try {
      SubscriptionNode current=locate(subject,null,true);
      assert(current != null);
      current.addSubscriber(subscriber);
    }
  finally {
      _gate.leave();
    }
  }
 else {
synchronized (_pendingActions) {
      _pendingActions.add(new ActionRecord(ActionType.Subscribe,subject,subscriber));
    }
  }
}
