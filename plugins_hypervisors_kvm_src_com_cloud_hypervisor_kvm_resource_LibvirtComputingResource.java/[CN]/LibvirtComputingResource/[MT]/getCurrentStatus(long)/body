{
  final HashMap<String,State> newStates=sync();
  if (!_can_bridge_firewall) {
    return new PingRoutingCommand(com.cloud.host.Host.Type.Routing,id,newStates,this.getHostVmStateReport());
  }
 else {
    HashMap<String,Pair<Long,Long>> nwGrpStates=syncNetworkGroups(id);
    return new PingRoutingWithNwGroupsCommand(getType(),id,newStates,this.getHostVmStateReport(),nwGrpStates);
  }
}
