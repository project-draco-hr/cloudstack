{
  try {
    final Connect conn=LibvirtConnection.getConnectionByVmName(cmd.getVmName());
    final PowerState state=getVmState(conn,cmd.getVmName());
    Integer vncPort=null;
    if (state == PowerState.PowerOn) {
      vncPort=getVncPort(conn,cmd.getVmName());
    }
    return new CheckVirtualMachineAnswer(cmd,state,vncPort);
  }
 catch (  final LibvirtException e) {
    return new CheckVirtualMachineAnswer(cmd,e.getMessage());
  }
}
