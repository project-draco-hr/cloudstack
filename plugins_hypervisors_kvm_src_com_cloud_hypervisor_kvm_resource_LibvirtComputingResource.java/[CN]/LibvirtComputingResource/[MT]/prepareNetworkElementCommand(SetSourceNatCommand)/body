{
  Connect conn;
  String routerName=cmd.getAccessDetail(NetworkElementCommand.ROUTER_NAME);
  String routerIP=cmd.getAccessDetail(NetworkElementCommand.ROUTER_IP);
  IpAddressTO pubIP=cmd.getIpAddress();
  try {
    conn=LibvirtConnection.getConnectionByVmName(routerName);
    Integer devNum=0;
    String pubVlan=pubIP.getBroadcastUri();
    List<InterfaceDef> pluggedNics=getInterfaces(conn,routerName);
    for (    InterfaceDef pluggedNic : pluggedNics) {
      String pluggedVlanBr=pluggedNic.getBrName();
      String pluggedVlanId=getBroadcastUriFromBridge(pluggedVlanBr);
      if (pubVlan.equalsIgnoreCase(Vlan.UNTAGGED) && pluggedVlanBr.equalsIgnoreCase(_publicBridgeName)) {
        break;
      }
 else       if (pluggedVlanBr.equalsIgnoreCase(_linkLocalBridgeName)) {
      }
 else       if (pluggedVlanId == null) {
        return new ExecutionResult(false,"unable to find the vlan id for bridge " + pluggedVlanBr + " when attempting to set up"+ pubVlan+ " on router "+ routerName);
      }
 else       if (pluggedVlanId.equals(pubVlan)) {
        break;
      }
      devNum++;
    }
    pubIP.setNicDevId(devNum);
    return new ExecutionResult(true,"success");
  }
 catch (  LibvirtException e) {
    String msg="Ip SNAT failure due to " + e.toString();
    s_logger.error(msg,e);
    return new ExecutionResult(false,msg);
  }
}
