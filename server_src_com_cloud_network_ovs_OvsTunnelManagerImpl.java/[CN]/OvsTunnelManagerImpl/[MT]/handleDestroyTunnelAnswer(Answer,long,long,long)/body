{
  String toStr=(to == 0 ? "all peers" : Long.toString(to));
  if (ans.getResult()) {
    OvsTunnelAccountVO lock=_tunnelAccountDao.acquireInLockTable(Long.valueOf(1));
    if (lock == null) {
      s_logger.warn(String.format("failed to lock ovs_tunnel_account, remove record of tunnel(from=%1$s, to=%2$s account=%3$s) failed",from,to,account));
      return;
    }
    if (to == 0) {
      _tunnelAccountDao.removeByFromAccount(from,account);
    }
 else {
      _tunnelAccountDao.removeByFromToAccount(from,to,account);
    }
    _tunnelAccountDao.releaseFromLockTable(lock.getId());
    s_logger.debug(String.format("Destroy tunnel(account:%1$s, from:%2$s, to:%3$s) successful",account,from,toStr));
  }
 else {
    s_logger.debug(String.format("Destroy tunnel(account:%1$s, from:%2$s, to:%3$s) failed",account,from,toStr));
  }
}
