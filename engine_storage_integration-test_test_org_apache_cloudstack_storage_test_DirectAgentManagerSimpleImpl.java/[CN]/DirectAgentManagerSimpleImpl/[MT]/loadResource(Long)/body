{
  HostVO host=hostDao.findById(hostId);
  Map<String,Object> params=new HashMap<String,Object>();
  params.put("guid",host.getGuid());
  params.put("ipaddress",host.getPrivateIpAddress());
  params.put("username","root");
  params.put("password","password");
  params.put("zone",String.valueOf(host.getDataCenterId()));
  params.put("pod",String.valueOf(host.getPodId()));
  ServerResource resource=null;
  if (host.getHypervisorType() == HypervisorType.XenServer) {
    resource=new XcpOssResource();
  }
  try {
    resource.configure(host.getName(),params);
    hostResourcesMap.put(hostId,resource);
  }
 catch (  ConfigurationException e) {
    logger.debug("Failed to load resource:" + e.toString());
  }
  HostEnvironment env=new HostEnvironment();
  SetupCommand cmd=new SetupCommand(env);
  cmd.setNeedSetup(true);
  resource.executeRequest(cmd);
}
