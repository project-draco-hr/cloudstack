{
  try {
    VpnUser vpnUser=_networkService.addVpnUser(this);
    if (vpnUser != null) {
      VpnUsersResponse vpnResponse=new VpnUsersResponse();
      vpnResponse.setId(vpnUser.getId());
      vpnResponse.setUserName(vpnUser.getUsername());
      vpnResponse.setAccountName(vpnUser.getAccountName());
      Account accountTemp=_entityMgr.findById(Account.class,vpnUser.getAccountId());
      if (accountTemp != null) {
        vpnResponse.setDomainId(accountTemp.getDomainId());
        vpnResponse.setDomainName(_entityMgr.findById(Domain.class,accountTemp.getDomainId()).getName());
      }
      vpnResponse.setResponseName(getCommandName());
      vpnResponse.setObjectName("vpnuser");
      this.setResponseObject(vpnResponse);
    }
 else {
      throw new ServerApiException(BaseCmd.INTERNAL_ERROR,"Failed to add vpn user");
    }
  }
 catch (  ConcurrentOperationException ex) {
    s_logger.warn("Exception: ",ex);
    throw new ServerApiException(BaseCmd.INTERNAL_ERROR,ex.getMessage());
  }
}
