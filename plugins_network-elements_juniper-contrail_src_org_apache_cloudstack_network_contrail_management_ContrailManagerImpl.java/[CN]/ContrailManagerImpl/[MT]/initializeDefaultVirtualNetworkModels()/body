{
  List<TrafficType> types=new ArrayList<TrafficType>();
  types.add(TrafficType.Management);
  types.add(TrafficType.Storage);
  types.add(TrafficType.Control);
  List<NetworkVO> dbNets=findJuniperManagedNetworks(types);
  for (  NetworkVO net : dbNets) {
    VirtualNetworkModel vnModel=getDatabase().lookupVirtualNetwork(null,getCanonicalName(net),net.getTrafficType());
    if (vnModel == null) {
      vnModel=new VirtualNetworkModel(net,null,getCanonicalName(net),net.getTrafficType());
      vnModel.build(getModelController(),net);
      try {
        if (!vnModel.verify(getModelController())) {
          vnModel.update(getModelController());
        }
      }
 catch (      Exception ex) {
        s_logger.warn("virtual-network update: ",ex);
      }
      getDatabase().getVirtualNetworks().add(vnModel);
    }
  }
}
