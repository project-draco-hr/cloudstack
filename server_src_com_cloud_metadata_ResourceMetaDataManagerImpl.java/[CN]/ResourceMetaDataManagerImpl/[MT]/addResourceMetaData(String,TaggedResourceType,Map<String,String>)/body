{
  Transaction txn=Transaction.currentTxn();
  txn.start();
  for (  String key : details.keySet()) {
    Long id=_taggedResourceMgr.getResourceId(resourceId,resourceType);
    if (_daoMap.get(resourceType).findById(id) == null) {
      throw new InvalidParameterValueException("Unable to find resource by id " + resourceId + " and type "+ resourceType);
    }
    String value=details.get(key);
    if (value == null || value.isEmpty()) {
      throw new InvalidParameterValueException("Value for the key " + key + " is either null or empty");
    }
    if (resourceType == TaggedResourceType.Volume) {
      VolumeDetailVO v=new VolumeDetailVO(id,key,value);
      _volumeDetailDao.persist(v);
    }
 else     if (resourceType == TaggedResourceType.Nic) {
      NicDetailVO n=new NicDetailVO(id,key,value);
      _nicDetailDao.persist(n);
    }
 else     if (resourceType == TaggedResourceType.UserVm) {
      UserVmDetailVO userVmDetail=new UserVmDetailVO(id,key,value);
      _userVmDetailDao.persist(userVmDetail);
    }
 else {
      throw new InvalidParameterValueException("The resource type " + resourceType + " is not supported by the API yet");
    }
  }
  txn.commit();
  return true;
}
