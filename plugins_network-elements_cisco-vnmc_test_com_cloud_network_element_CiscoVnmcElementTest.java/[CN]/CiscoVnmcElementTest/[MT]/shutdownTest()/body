{
  URI uri=URI.create("vlan://123");
  Network network=mock(Network.class);
  when(network.getId()).thenReturn(1L);
  when(network.getBroadcastDomainType()).thenReturn(BroadcastDomainType.Vlan);
  when(network.getDataCenterId()).thenReturn(1L);
  when(network.getBroadcastUri()).thenReturn(uri);
  ReservationContext context=mock(ReservationContext.class);
  when(_networkAsa1000vMapDao.findByNetworkId(network.getId())).thenReturn(mock(NetworkAsa1000vMapVO.class));
  List<CiscoVnmcControllerVO> devices=new ArrayList<CiscoVnmcControllerVO>();
  devices.add(mock(CiscoVnmcControllerVO.class));
  when(_ciscoVnmcDao.listByPhysicalNetwork(network.getPhysicalNetworkId())).thenReturn(devices);
  HostVO hostVO=mock(HostVO.class);
  when(hostVO.getId()).thenReturn(1L);
  when(_hostDao.findById(anyLong())).thenReturn(hostVO);
  Answer answer=mock(Answer.class);
  when(answer.getResult()).thenReturn(true);
  when(_agentMgr.easySend(anyLong(),any(CleanupLogicalEdgeFirewallCommand.class))).thenReturn(answer);
  assertTrue(_element.shutdown(network,context,true));
}
