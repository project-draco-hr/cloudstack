{
  int width=800;
  int height=600;
  if (vc != null) {
    width=vc.scaledWidth;
    height=vc.scaledHeight;
  }
  if (s_logger.isTraceEnabled())   s_logger.trace("getFrameBufferJpeg, w: " + width + ", h: "+ height);
  BufferedImage bufferedImage=new BufferedImage(width,height,BufferedImage.TYPE_3BYTE_BGR);
  if (vc != null && vc.memImage != null) {
synchronized (vc.memImage) {
      Graphics2D g=bufferedImage.createGraphics();
      g.drawImage(vc.memImage,0,0,width,height,0,0,width,height,null);
    }
  }
  byte[] imgBits=null;
  try {
    imgBits=jpegFromImage(bufferedImage);
  }
 catch (  IOException e) {
  }
  return imgBits;
}
