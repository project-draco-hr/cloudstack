{
  ClusterVO cluster=_clusterDao.findById(clusterId);
  if (cluster == null) {
    throw new CloudRuntimeException("Cannot find cluster for ID " + clusterId);
  }
  List<HostVO> hosts=_hostDao.listByInAllStatus(Host.Type.Routing,clusterId,cluster.getPodId(),cluster.getDataCenterId());
  if (hosts.isEmpty()) {
    throw new CloudRuntimeException("No host up to associate a storage pool with in cluster " + clusterId);
  }
  return prepareNodes(getClusterName(clusterId),hosts);
}
