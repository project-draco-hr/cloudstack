{
  final Connection conn=getConnection();
  s_logger.debug("7. The VM " + cmd.getVmName() + " is in Starting state");
  try {
    Set<VM> vms=null;
    try {
      vms=VM.getByNameLabel(conn,cmd.getVmName());
    }
 catch (    final XenAPIException e0) {
      s_logger.debug("getByNameLabel failed " + e0.toString());
      return new RebootAnswer(cmd,"getByNameLabel failed " + e0.toString(),false);
    }
catch (    final Exception e0) {
      s_logger.debug("getByNameLabel failed " + e0.getMessage());
      return new RebootAnswer(cmd,"getByNameLabel failed",false);
    }
    for (    final VM vm : vms) {
      try {
        rebootVM(conn,vm,vm.getNameLabel(conn));
      }
 catch (      final Exception e) {
        final String msg=e.toString();
        s_logger.warn(msg,e);
        return new RebootAnswer(cmd,msg,false);
      }
    }
    return new RebootAnswer(cmd,"reboot succeeded",true);
  }
  finally {
    s_logger.debug("8. The VM " + cmd.getVmName() + " is in Running state");
  }
}
