{
  String iScsiName=details.get(DiskTO.IQN);
  String storageHost=details.get(DiskTO.STORAGE_HOST);
  String chapInitiatorUsername=details.get(DiskTO.CHAP_INITIATOR_USERNAME);
  String chapInitiatorSecret=details.get(DiskTO.CHAP_INITIATOR_SECRET);
  String mountpoint=details.get(DiskTO.MOUNT_POINT);
  String protocoltype=details.get(DiskTO.PROTOCOL_TYPE);
  if (StoragePoolType.NetworkFilesystem.toString().equalsIgnoreCase(protocoltype)) {
    String poolid=storageHost + ":" + mountpoint;
    String namelable=mountpoint;
    String volumedesc=storageHost + ":" + mountpoint;
    return getNfsSR(conn,poolid,namelable,storageHost,mountpoint,volumedesc);
  }
 else {
    return getIscsiSR(conn,iScsiName,storageHost,iScsiName,chapInitiatorUsername,chapInitiatorSecret,true);
  }
}
