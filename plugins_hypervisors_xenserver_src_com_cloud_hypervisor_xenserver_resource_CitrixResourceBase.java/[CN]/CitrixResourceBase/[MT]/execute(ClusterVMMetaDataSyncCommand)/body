{
  final Connection conn=getConnection();
  Pool pool;
  try {
    pool=Pool.getByUuid(conn,_host.getPool());
    final Pool.Record poolr=pool.getRecord(conn);
    final Host.Record hostr=poolr.master.getRecord(conn);
    if (!_host.getUuid().equals(hostr.uuid)) {
      return new ClusterVMMetaDataSyncAnswer(cmd.getClusterId(),null);
    }
  }
 catch (  final Throwable e) {
    s_logger.warn("Check for master failed, failing the Cluster sync VMMetaData command");
    return new ClusterVMMetaDataSyncAnswer(cmd.getClusterId(),null);
  }
  final HashMap<String,String> vmMetadatum=clusterVMMetaDataSync(conn);
  return new ClusterVMMetaDataSyncAnswer(cmd.getClusterId(),vmMetadatum);
}
