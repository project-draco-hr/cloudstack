{
  ImageDataStoreVO store=imageStoreDao.findByUuid(params.get("uuid"));
  if (store != null) {
    throw new CloudRuntimeException("duplicate uuid");
  }
  store=new ImageDataStoreVO();
  store.setName(params.get("name"));
  store.setProtocol(params.get("protocol"));
  store.setProvider(Long.parseLong(params.get("provider")));
  store.setScope(Enum.valueOf(ScopeType.class,params.get("scope")));
  store.setUuid(params.get("uuid"));
  store=imageStoreDao.persist(store);
  return store;
}
