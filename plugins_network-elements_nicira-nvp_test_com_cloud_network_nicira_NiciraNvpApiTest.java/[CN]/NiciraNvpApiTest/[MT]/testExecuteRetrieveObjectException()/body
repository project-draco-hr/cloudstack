{
  method=mock(GetMethod.class);
  when(method.getStatusCode()).thenReturn(HttpStatus.SC_OK);
  when(method.getResponseBodyAsString()).thenReturn("{ \"uuid\" : \"aaaa\" }");
  when(client.executeMethod((HttpMethod)any())).thenThrow(new HttpException());
  try {
    api.executeRetrieveObject(LogicalSwitch.class,"/",Collections.<String,String>emptyMap());
  }
  finally {
    verify(method,times(1)).releaseConnection();
  }
}
