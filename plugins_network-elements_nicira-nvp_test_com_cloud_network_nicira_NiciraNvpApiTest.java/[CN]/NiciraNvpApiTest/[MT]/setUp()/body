{
  HttpClientParams hmp=mock(HttpClientParams.class);
  when(client.getParams()).thenReturn(hmp);
  api=new NiciraNvpApi(){
    @Override protected HttpClient createHttpClient(){
      return client;
    }
    @Override protected HttpMethod createMethod(    String type,    String uri){
      return method;
    }
  }
;
  api.setAdminCredentials("admin","adminpass");
  api.setControllerAddress("localhost");
}
