{
  final SecurityProfile inputSecProfile=new SecurityProfile();
  method=mock(PostMethod.class);
  when(method.getStatusCode()).thenReturn(HttpStatus.SC_CREATED);
  when(method.getResponseBodyAsString()).thenReturn(SEC_PROFILE_JSON_RESPONSE);
  final SecurityProfile actualSecProfile=api.createSecurityProfile(inputSecProfile);
  verify(method,times(1)).releaseConnection();
  assertEquals("Wrong Uuid in the newly created SecurityProfile",UUID,actualSecProfile.getUuid());
  assertEquals("Wrong Uuid in the newly created SecurityProfile",HREF,actualSecProfile.getHref());
  assertEquals("Wrong Schema in the newly created SecurityProfile",SCHEMA,actualSecProfile.getSchema());
  assertEquals("Wrong URI for SecurityProfile creation REST service",NiciraNvpApi.SEC_PROFILE_URI_PREFIX,uri);
  assertEquals("Wrong HTTP method for SecurityProfile creation REST service",NiciraNvpApi.POST_METHOD_TYPE,type);
}
