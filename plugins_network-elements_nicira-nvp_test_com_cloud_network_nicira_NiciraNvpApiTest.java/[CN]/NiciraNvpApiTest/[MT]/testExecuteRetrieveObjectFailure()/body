{
  method=mock(GetMethod.class);
  when(method.getStatusCode()).thenReturn(HttpStatus.SC_INTERNAL_SERVER_ERROR);
  when(method.getResponseBodyAsString()).thenReturn(UUID_JSON_RESPONSE);
  final Header header=mock(Header.class);
  when(header.getValue()).thenReturn("text/html");
  when(method.getResponseHeader("Content-Type")).thenReturn(header);
  when(method.getResponseBodyAsString()).thenReturn("Off to timbuktu, won't be back later.");
  when(method.isRequestSent()).thenReturn(true);
  try {
    api.executeRetrieveObject(LogicalSwitch.class,"/",Collections.<String,String>emptyMap());
  }
  finally {
    verify(method,times(1)).releaseConnection();
  }
}
