{
  NicTO to=new NicTO();
  to.setDeviceId(nic.getDeviceId());
  to.setBroadcastType(config.getBroadcastDomainType());
  to.setType(config.getTrafficType());
  to.setIp(nic.getIp4Address());
  to.setNetmask(nic.getNetmask());
  to.setMac(nic.getMacAddress());
  if (config.getDns1() != null) {
    to.setDns1(config.getDns1());
  }
  if (config.getDns2() != null) {
    to.setDns2(config.getDns2());
  }
  if (nic.getGateway() != null) {
    to.setGateway(nic.getGateway());
  }
 else {
    to.setGateway(config.getGateway());
  }
  to.setDefaultNic(nic.isDefaultNic());
  to.setBroadcastUri(nic.getBroadcastUri());
  to.setIsolationuri(nic.getIsolationUri());
  if (profile != null) {
    to.setDns1(profile.getDns1());
    to.setDns2(profile.getDns2());
  }
  return to;
}
