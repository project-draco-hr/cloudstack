{
  int nicCount=getActiveNicsInNetwork(networkId);
  if (nicCount > 0) {
    throw new InvalidParameterValueException("Unable to remove the network id=" + networkId + " as it has active Nics.");
  }
  Long userId=UserContext.current().getCallerUserId();
  Account caller=UserContext.current().getCaller();
  NetworkVO network=_networksDao.findById(networkId);
  if (network == null) {
    throw new InvalidParameterValueException("unable to find network " + networkId);
  }
  if (!_accountMgr.isAdmin(caller.getType())) {
    if (network.getAccountId() != caller.getId()) {
      throw new PermissionDeniedException("Account " + caller.getAccountName() + " does not own network id="+ networkId+ ", permission denied");
    }
  }
 else {
    Account owner=_accountMgr.getAccount(network.getAccountId());
    _accountMgr.checkAccess(caller,owner);
  }
  return deleteNetworkInternal(networkId,userId);
}
