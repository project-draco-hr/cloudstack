{
  if (profile.getDeviceId() != null) {
    vo.setDeviceId(profile.getDeviceId());
  }
 else   if (deviceId != null) {
    vo.setDeviceId(deviceId++);
  }
  vo.setDefaultNic(profile.isDefaultNic());
  if (profile.getIp4Address() != null) {
    vo.setIp4Address(profile.getIp4Address());
    vo.setState(NicVO.State.Reserved);
  }
  if (profile.getMacAddress() != null) {
    vo.setMacAddress(profile.getMacAddress());
  }
  vo.setMode(profile.getMode());
  vo.setNetmask(profile.getNetmask());
  vo.setGateway(profile.getGateway());
  return deviceId;
}
