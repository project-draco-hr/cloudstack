{
  Map<Service,Map<Capability,String>> zoneCapabilities=getZoneCapabilities(zoneId);
  Map<Service,Map<Capability,String>> networkCapabilities=new HashMap<Service,Map<Capability,String>>();
  for (  Service service : zoneCapabilities.keySet()) {
    if (isServiceSupportedByNetworkOffering(networkOfferingId,service)) {
      networkCapabilities.put(service,zoneCapabilities.get(service));
    }
  }
  return networkCapabilities;
}
