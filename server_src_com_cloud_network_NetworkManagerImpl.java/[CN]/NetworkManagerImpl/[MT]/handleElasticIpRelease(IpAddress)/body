{
  boolean success=true;
  Long networkId=ip.getAssociatedWithNetworkId();
  if (networkId != null) {
    Network guestNetwork=getNetwork(networkId);
    NetworkOffering offering=_configMgr.getNetworkOffering(guestNetwork.getNetworkOfferingId());
    if (offering.getElasticIp() && ip.getElastic() == true) {
      UserContext ctx=UserContext.current();
      if (!releasePublicIpAddress(ip.getId(),ctx.getCallerUserId(),ctx.getCaller())) {
        s_logger.warn("Unable to release elastic ip address id=" + ip.getId());
        success=false;
      }
 else {
        s_logger.warn("Successfully released elastic ip address id=" + ip.getId());
      }
    }
  }
  return success;
}
