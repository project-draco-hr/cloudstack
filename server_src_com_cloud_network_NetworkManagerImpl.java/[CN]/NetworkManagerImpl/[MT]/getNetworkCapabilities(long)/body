{
  Network network=getNetwork(networkId);
  if (network == null) {
    throw new InvalidParameterValueException("Unable to find network by id " + networkId);
  }
  Map<Service,Map<Capability,String>> zoneCapabilities=getZoneCapabilities(network.getDataCenterId());
  Map<Service,Map<Capability,String>> networkCapabilities=new HashMap<Service,Map<Capability,String>>();
  for (  Service service : zoneCapabilities.keySet()) {
    if (isServiceSupported(networkId,service)) {
      networkCapabilities.put(service,zoneCapabilities.get(service));
    }
  }
  return networkCapabilities;
}
