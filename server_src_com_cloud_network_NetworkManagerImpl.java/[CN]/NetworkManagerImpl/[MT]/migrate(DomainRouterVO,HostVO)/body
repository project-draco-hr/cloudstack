{
  final HostVO fromHost=_hostDao.findById(router.getHostId());
  if (!_routerDao.updateIf(router,Event.MigrationRequested,router.getHostId())) {
    s_logger.debug("State for " + router.toString() + " has changed so migration can not take place.");
    return false;
  }
  final MigrateCommand cmd=new MigrateCommand(router.getInstanceName(),host.getPrivateIpAddress(),false);
  final Answer answer=_agentMgr.easySend(fromHost.getId(),cmd);
  if (answer == null) {
    return false;
  }
  final List<VolumeVO> vols=_volsDao.findCreatedByInstance(router.getId());
  if (vols.size() == 0) {
    return true;
  }
  _storageMgr.unshare(router,vols,fromHost);
  return true;
}
