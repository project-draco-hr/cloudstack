{
  Account owner=_accountMgr.getActiveAccount(accountName,domainId);
  if (owner == null) {
    throw new InvalidParameterValueException("Unable to find account " + accountName + " in domain "+ domainId+ ", permission denied");
  }
  if (_supportDomainLevelVirtualNetwork) {
    return _networksDao.listDomainSpecificNetworks(domainId,zoneId,GuestIpType.Virtual);
  }
 else {
    return _networksDao.listBy(owner.getId(),zoneId,GuestIpType.Virtual);
  }
}
