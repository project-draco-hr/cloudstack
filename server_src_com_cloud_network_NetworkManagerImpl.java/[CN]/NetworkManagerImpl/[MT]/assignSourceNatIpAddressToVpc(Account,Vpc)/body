{
  long dcId=vpc.getZoneId();
  IPAddressVO sourceNatIp=getExistingSourceNat(owner.getId(),null,vpc.getId());
  PublicIp ipToReturn=null;
  if (sourceNatIp != null) {
    ipToReturn=new PublicIp(sourceNatIp,_vlanDao.findById(sourceNatIp.getVlanId()),NetUtils.createSequenceBasedMacAddress(sourceNatIp.getMacAddress()));
  }
 else {
    ipToReturn=assignDedicateIpAddress(owner,null,vpc.getId(),dcId,true);
  }
  return ipToReturn;
}
