{
  boolean success=true;
  List<PublicIp> srcNatpublicIps=new ArrayList<PublicIp>();
  if (publicIps != null && !publicIps.isEmpty()) {
    for (    PublicIp ip : publicIps) {
      if (ip.isSourceNat()) {
        srcNatpublicIps.add(ip);
      }
    }
  }
  for (  NetworkElement element : _networkElements) {
    try {
      if (!(element instanceof FirewallServiceProvider)) {
        continue;
      }
      FirewallServiceProvider e=(FirewallServiceProvider)element;
      s_logger.trace("Asking " + element + " to apply ip associations");
      e.applyIps(network,srcNatpublicIps);
    }
 catch (    ResourceUnavailableException e) {
      success=false;
      if (!continueOnError) {
        throw e;
      }
 else {
        s_logger.debug("Resource is not available: " + element.getName(),e);
      }
    }
  }
  return success;
}
