{
  IPAddressVO ip=_ipAddressDao.findById(rule.getPublicIpAddress());
  VlanVO vlan=_vlanDao.findById(new Long(ip.getVlanDbId()));
  rule.setVlanNetmask(vlan.getVlanNetmask());
  final SetFirewallRuleCommand cmd=new SetFirewallRuleCommand(router.getInstanceName(),router.getPrivateIpAddress(),rule,oldPrivateIP,oldPrivatePort);
  final Answer ans=_agentMgr.easySend(hostId,cmd);
  if (ans == null) {
    return false;
  }
 else {
    return ans.getResult();
  }
}
