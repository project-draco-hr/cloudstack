{
  Account caller=UserContext.current().getCaller();
  Long networkId=cmd.getNetworkId();
  Network network=null;
  if (networkId != null) {
    network=_networksDao.findById(networkId);
    if (network == null) {
      throw new InvalidParameterValueException("Network id is invalid: " + networkId);
    }
  }
  Account owner=_accountMgr.getActiveAccount(cmd.getEntityOwnerId());
  if (!_accountMgr.isAdmin(caller.getType())) {
    _accountMgr.checkAccess(caller,network);
  }
 else {
    Domain domain=_domainDao.findById(owner.getDomainId());
    _accountMgr.checkAccess(caller,domain);
  }
  s_logger.debug("Restarting network " + networkId + "...");
  if (!applyIpAssociations(network,false)) {
    s_logger.warn("Failed to apply ips as a part of network " + networkId + " restart");
    return false;
  }
 else {
    s_logger.debug("Ip addresses are reapplied successfully as a part of network " + networkId + " restart");
  }
  List<LoadBalancingRule> lbRules=_lbMgr.listByNetworkId(networkId);
  if (!applyRules(lbRules,true)) {
    s_logger.warn("Failed to apply load balancing rules as a part of network " + network.getId() + " restart");
    return false;
  }
 else {
    s_logger.debug("Load balancing rules are reapplied successfully as a part of network " + networkId + " restart");
  }
  List<? extends PortForwardingRule> pfRules=_rulesMgr.listByNetworkId(networkId);
  if (!applyRules(pfRules,true)) {
    s_logger.warn("Failed to apply port forwarding rules as a part of network " + network.getId() + " restart");
    return false;
  }
 else {
    s_logger.debug("Port forwarding rules are reapplied successfully as a part of network " + networkId + " restart");
  }
  s_logger.debug("Network " + networkId + " is restarted successfully.");
  return true;
}
