{
  Long networkId=cmd.getNetworkId();
  User caller=_accountMgr.getActiveUser(UserContext.current().getCallerUserId());
  Account callerAccount=_accountMgr.getActiveAccount(caller.getAccountId());
  NetworkVO network=_networksDao.findById(networkId);
  if (network == null) {
    throw new InvalidParameterValueException("Network with id=" + networkId + " doesn't exist");
  }
  if (!(network.getState() == Network.State.Implemented || network.getState() == Network.State.Setup)) {
    throw new InvalidParameterValueException("Network is not in the right state to be restarted. Correct states are: " + Network.State.Implemented + ", "+ Network.State.Setup);
  }
  Account owner=_accountMgr.getAccount(network.getAccountId());
  ReservationContext context=new ReservationContextImpl(null,null,caller,owner);
  _accountMgr.checkAccess(callerAccount,network);
  boolean success=true;
  success=restartNetwork(networkId,true,context);
  if (success) {
    s_logger.debug("Network id=" + networkId + " is restarted successfully.");
  }
 else {
    s_logger.warn("Network id=" + networkId + " failed to restart.");
  }
  return success;
}
