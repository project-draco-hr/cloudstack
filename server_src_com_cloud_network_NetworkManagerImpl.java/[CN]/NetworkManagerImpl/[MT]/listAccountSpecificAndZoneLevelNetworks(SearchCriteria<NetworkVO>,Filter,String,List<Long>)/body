{
  SearchCriteria<NetworkVO> ssc=_networksDao.createSearchCriteria();
  SearchCriteria<NetworkVO> accountSC=_networksDao.createSearchCriteria();
  if (!permittedAccounts.isEmpty()) {
    accountSC.addAnd("accountId",SearchCriteria.Op.IN,permittedAccounts.toArray());
  }
  accountSC.addAnd("isShared",SearchCriteria.Op.EQ,false);
  if (path != null) {
    Set<Long> allowedDomains=_domainMgr.getDomainChildrenIds(path);
    accountSC.addAnd("domainId",SearchCriteria.Op.IN,allowedDomains.toArray());
  }
  ssc.addOr("id",SearchCriteria.Op.SC,accountSC);
  SearchCriteria<NetworkVO> zoneSC=_networksDao.createSearchCriteria();
  zoneSC.addAnd("isDomainSpecific",SearchCriteria.Op.EQ,false);
  zoneSC.addAnd("isShared",SearchCriteria.Op.EQ,true);
  ssc.addOr("id",SearchCriteria.Op.SC,zoneSC);
  sc.addAnd("id",SearchCriteria.Op.SC,ssc);
  return _networksDao.search(sc,searchFilter);
}
