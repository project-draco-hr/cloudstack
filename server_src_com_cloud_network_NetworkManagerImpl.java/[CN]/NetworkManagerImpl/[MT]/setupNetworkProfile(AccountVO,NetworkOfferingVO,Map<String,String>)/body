{
  for (  NetworkProfiler profiler : _networkProfilers) {
    NetworkConfiguration profile=profiler.convert(offering,null,params,owner);
    if (profile == null) {
      continue;
    }
    if (profile.getId() != null) {
      if (profile instanceof NetworkConfigurationVO) {
        return (NetworkConfigurationVO)profile;
      }
 else {
        return _networkProfileDao.findById(profile.getId());
      }
    }
    NetworkConfigurationVO vo=new NetworkConfigurationVO(profile,owner.getId(),offering.getId());
    return _networkProfileDao.persist(vo);
  }
  throw new CloudRuntimeException("Unable to convert network offering to network profile: " + offering.getId());
}
