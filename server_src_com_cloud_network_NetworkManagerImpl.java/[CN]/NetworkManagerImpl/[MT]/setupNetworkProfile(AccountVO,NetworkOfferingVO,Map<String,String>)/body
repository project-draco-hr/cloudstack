{
  for (  NetworkProfiler profiler : _networkProfilers) {
    NetworkProfile profile=profiler.convert(offering,params,owner);
    if (profile == null) {
      continue;
    }
    if (profile.getId() != null) {
      if (profile instanceof NetworkProfileVO) {
        return (NetworkProfileVO)profile;
      }
 else {
        return _networkProfileDao.findById(profile.getId());
      }
    }
    NetworkProfileVO vo=new NetworkProfileVO(profile,owner.getId(),offering.getId());
    return _networkProfileDao.persist(vo);
  }
  throw new CloudRuntimeException("Unable to convert network offering to network profile: " + offering.getId());
}
