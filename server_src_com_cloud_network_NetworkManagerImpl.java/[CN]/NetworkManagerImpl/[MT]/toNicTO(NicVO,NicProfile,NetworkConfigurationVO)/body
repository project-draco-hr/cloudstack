{
  NicTO to=new NicTO();
  to.setDeviceId(nic.getDeviceId());
  to.setBroadcastType(config.getBroadcastDomainType());
  to.setType(config.getTrafficType());
  to.setIp(nic.getIp4Address());
  to.setNetmask(nic.getNetmask());
  to.setMac(nic.getMacAddress());
  if (config.getDns() != null) {
    String[] tokens=config.getDns().split(",");
    to.setDns1(tokens[0]);
    if (tokens.length > 2) {
      to.setDns2(tokens[1]);
    }
  }
  if (nic.getGateway() != null) {
    to.setGateway(nic.getGateway());
  }
 else {
    to.setGateway(config.getGateway());
  }
  to.setDefaultNic(nic.isDefaultNic());
  to.setBroadcastUri(nic.getBroadcastUri());
  to.setIsolationuri(nic.getIsolationUri());
  if (profile != null) {
    to.setDns1(profile.getDns1());
    to.setDns2(profile.getDns2());
  }
  return to;
}
