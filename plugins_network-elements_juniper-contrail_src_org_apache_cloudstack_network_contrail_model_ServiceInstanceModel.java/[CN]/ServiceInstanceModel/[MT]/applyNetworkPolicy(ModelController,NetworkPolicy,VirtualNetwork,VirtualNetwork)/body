{
  left.setNetworkPolicy(policy,new VirtualNetworkPolicyType(new VirtualNetworkPolicyType.SequenceType(1,0),null));
  left.clearNetworkIpam();
  try {
    ApiConnector api=controller.getApiAccessor();
    api.update(left);
  }
 catch (  IOException ex) {
    throw new CloudRuntimeException("Unable to update virtual-network",ex);
  }
  right.setNetworkPolicy(policy,new VirtualNetworkPolicyType(new VirtualNetworkPolicyType.SequenceType(1,0),null));
  right.clearNetworkIpam();
  try {
    ApiConnector api=controller.getApiAccessor();
    api.update(right);
  }
 catch (  IOException ex) {
    throw new CloudRuntimeException("Unable to update virtual-network",ex);
  }
}
