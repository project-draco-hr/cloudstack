{
  if (config.getTrafficType() != TrafficType.Public) {
    return null;
  }
  if (nic == null) {
    nic=new NicProfile(ReservationStrategy.Create,null,null,null,null);
  }
  String mac=_networkMgr.getNextAvailableMacAddressInNetwork(config.getId());
  nic.setMacAddress(mac);
  DataCenter dc=_dcDao.findById(config.getDataCenterId());
  getIp(nic,dc,vm);
  if (nic.getIp4Address() == null) {
    nic.setStrategy(ReservationStrategy.Start);
  }
 else {
    nic.setStrategy(ReservationStrategy.Create);
  }
  return nic;
}
